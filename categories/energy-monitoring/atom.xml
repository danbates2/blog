<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: energy monitoring | Blog | OpenEnergyMonitor]]></title>
  <link href="http://blog.openenergymonitor.org/categories/energy-monitoring/atom.xml" rel="self"/>
  <link href="http://blog.openenergymonitor.org/"/>
  <updated>2016-04-22T01:40:16+00:00</updated>
  <id>http://blog.openenergymonitor.org/</id>
  <author>
    <name><![CDATA[Glyn Hudson]]></name>
    <email><![CDATA[support@openenergymonitor.zendesk.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Fridge Defrosting]]></title>
    <link href="http://blog.openenergymonitor.org/2013/06/fridge-defrosting/"/>
    <updated>2013-06-18T08:33:00+00:00</updated>
    <id>http://blog.openenergymonitor.org/2013/06/fridge-defrosting</id>
    <content type="html"><![CDATA[<p><i>Update 27/06/13:</i><br /><br /><i>As kindly pointed out by Jörg Becker in the comments below I mad an error with the timebase. I had assumed If I zoomed in the same amount that the time base would be the same, I had not realised that this was not actually the case. Below is an updated screen grab with the correct time period. As we can see the power in the window is pretty much the same 0.28/0.29Kwh. <b>Defrosting the fridge does not seem to have had much of a reduction effect in the power consumption, just an increased duty cycle. </b>Apologies for my original misleading post below. </i><br /><i><br /></i><i>Thanks again to Jörg Becker for pointing this out. </i><br /><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-Vik0egttfrE/Ucyk1GcjMEI/AAAAAAAAe5M/raIhQn9IDt4/s878/Selection_001.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="290" src="http://1.bp.blogspot.com/-Vik0egttfrE/Ucyk1GcjMEI/AAAAAAAAe5M/raIhQn9IDt4/s640/Selection_001.png" width="640" /></a>&lt;/div&gt;<br /><br />Yesterday I defrosted my fridge, I was amazed at the effect it had on it’s energy consumption and pattern.<br /><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-4F_yH3w2vFc/UcAZE8BjQ5I/AAAAAAAAe2c/w0hauc9OyMk/s1600/fridge+defrost.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="222" src="http://1.bp.blogspot.com/-4F_yH3w2vFc/UcAZE8BjQ5I/AAAAAAAAe2c/w0hauc9OyMk/s640/fridge+defrost.jpg" width="640" /></a>&lt;/div&gt;<br /><strike>Energy consumption due to fridge dropped from 2.29 Kwh/d to 1.09Kwh/d, about a 50% readuction. The pattern of energy consumption changed a fair bit, now defrosted the fridge switches on for a much shorter period of time, &nbsp;obviously getting up to&nbsp;down to temperature much quicker.</strike><br /><strike><br /></strike><strike>If I keep the fridge defrosted regularly all year it should save me around £60 a year.</strike><br /><br />I am aware that my fridge is quite an old model and a new model would use less energy overall and not require defrosting. Something to thing about for the future..</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[New emoncms features part 2 - Email notifier]]></title>
    <link href="http://blog.openenergymonitor.org/2012/02/emoncms-features-part-2-email-notifier/"/>
    <updated>2012-02-18T23:31:00+00:00</updated>
    <id>http://blog.openenergymonitor.org/2012/02/emoncms-features-part-2-email-notifier</id>
    <content type="html"><![CDATA[<div class="separator" style="clear: both; text-align: left;">Its good to know as soon as possible if there is an issue with an installed energy monitor, such as the base station dropping offline or a problem with RF connection. This is a rough and ready first implementation of an email notifier for emoncms, that sends you an email to say that a feed has become inactive or a feed is&nbsp;equal&nbsp;to a certain value. No longer are the days when you log in to emoncms just to find that there are two days of missing data as&nbsp;happened&nbsp;to me on feb 6-7 <a href="http://openenergymonitor.org/emon/emoncms/showcase">here</a></div>
<div class="separator" style="clear: both; text-align: left;"><br /></div>
<div class="separator" style="clear: both; text-align: left;"><b>A walkthrough</b></div>
<div class="separator" style="clear: both; text-align: left;"><br /></div>
<div class="separator" style="clear: both; text-align: left;">1) Click on a feed in the feed list to bring up the feed view page, scroll down to the bottom and click on set notifications:</div>
<div class="separator" style="clear: both; text-align: center;"><br /></div>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-oUq0bwGDyiQ/T0AoJkpEZNI/AAAAAAAACX0/cI3odOAz6P8/s1600/notift_feedview.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="230" src="http://1.bp.blogspot.com/-oUq0bwGDyiQ/T0AoJkpEZNI/AAAAAAAACX0/cI3odOAz6P8/s320/notift_feedview.png" width="320" /></a></div>
<div class="separator" style="clear: both; text-align: center;"><br /></div>
<div class="separator" style="clear: both; text-align: left;">2) Select the events that you want notifications for. Notification on value and on inactive both work. Periodic notification is yet to be implemented.</div>
<div class="separator" style="clear: both; text-align: center;"><br /></div>
<div class="separator" style="clear: both; text-align: center;"><br /></div>
<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Q8in3h0PPZ0/T0AoeSLmCFI/AAAAAAAACX8/GXJCyeeQjZU/s1600/notify_feedsettings.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-Q8in3h0PPZ0/T0AoeSLmCFI/AAAAAAAACX8/GXJCyeeQjZU/s320/notify_feedsettings.png" width="216" /></a></div>
<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />3) Click on edit mail settings and enter in the recipient email address. This only has to be done once as it is the same for all notifications.<br /><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-4U29I5trf2c/T0ApRWFl_5I/AAAAAAAACYE/0z7LJZ02xMQ/s1600/notify_recipients.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="222" src="http://1.bp.blogspot.com/-4U29I5trf2c/T0ApRWFl_5I/AAAAAAAACYE/0z7LJZ02xMQ/s320/notify_recipients.png" width="320" /></a>&lt;/div&gt;<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />If you want to send the notifications to multiple addresses, just put in a comma between each address.<br /><br />4) Unplug your emonbase!! and check your email:<br /><br />&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://3.bp.blogspot.com/-_woWFUXfPMo/T0ApmAkoAlI/AAAAAAAACYM/GlkiXxJQ-uM/s1600/notify_emailsubject.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="19" src="http://3.bp.blogspot.com/-_woWFUXfPMo/T0ApmAkoAlI/AAAAAAAACYM/GlkiXxJQ-uM/s320/notify_emailsubject.png" width="320" /></a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://1.bp.blogspot.com/-r3iUkNr2rbs/T0AppLU7ICI/AAAAAAAACYU/CHQufBFe38s/s1600/notift_emailbody.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="95" src="http://1.bp.blogspot.com/-r3iUkNr2rbs/T0AppLU7ICI/AAAAAAAACYU/CHQufBFe38s/s320/notift_emailbody.png" width="320" /></a>&lt;/div&gt;<b><br /></b><br /><b><br /></b><br /><b><br /></b><br /><b><br /></b><br /><b><br /></b><br />&lt;div style="text-align: left;"&gt;<b><br /></b>&lt;/div&gt;&lt;div style="text-align: left;"&gt;It can be tried out here: <a href="http://vis.openenergymonitor.org/emoncms3">http://vis.openenergymonitor.org/emoncms3</a>&lt;/div&gt;<b><br /></b><br /><b>Behind the scenes</b><br /><b><br /></b><br /><b>Main scripts:</b><br /><b><span class="Apple-style-span" style="font-weight: normal;"></span></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Models/notify_model.php">notify_model.php</a></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Models/mail_model.php">mail_model.php</a></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Controllers/notify_controller.php">notify_controller.php</a></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Views/notify_view.php">notify_view.php</a></b><br /><br /><b><br /></b><br /><b>Installation/Setup</b><br />1) To use the notifier on your own server you will need php mail installed, to do this on ubuntu enter the following into terminal<br /><br /><span class="Apple-style-span" style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px;">sudo apt-get install php-pear<br />sudo pear install mail<br />sudo pear install Net_SMTP<br />sudo pear install Auth_SASL<br />sudo pear install mail_mime</span><br /><b><br /></b><br />2) In emoncms3/Includes copy the default.mail_settings.php file and rename too<a href="https://github.com/openenergymonitor/emoncms3/blob/master/Includes/default.mail_settings.php"> mail_settings.php</a> and enter in your mail server settings.<br /><br />3) Open the file <a href="https://github.com/openenergymonitor/emoncms3/blob/master/cron.php">cron.php</a> and change the key password to something unique, this is used to ensure that only you can run the cron.php script.<br /><br />4) Create a cronjob, in ubuntu start by opening crontab: $ crontab -e<br />Then add a cronjob that calls the cron.php script including the key that you created. To call the cron.php script once a minute try the following:<br /><br /><br /># m h  dom mon dow   command<br />* * * * * wget -q -O /dev/null “http://localhost/emoncms3/cron.php?key=YOURKEY<br /><br /><br />5) If your using the same database as a previous emoncms version, you will need to create the new notify database tables. This can be done in index.php by pasting <b>require “Includes/setup.php”; </b>in the top. Its probably worth removing it afterwards.<br /><br />6) Configure your feeds as in the screens above!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[3 Phases AC monitoring]]></title>
    <link href="http://blog.openenergymonitor.org/2012/02/if-you-are-active-member-of/"/>
    <updated>2012-02-13T11:49:00+00:00</updated>
    <id>http://blog.openenergymonitor.org/2012/02/if-you-are-active-member-of</id>
    <content type="html"><![CDATA[<div dir="ltr" style="text-align: left;" trbidi="on">Note: this topic is still in development, there is an on-going discussion on the forum:&nbsp;<a href="http://openenergymonitor.org/emon/node/431">http://openenergymonitor.org/emon/node/431</a><br /><br />If you are an active member of OpenEnergyMonitor.org, then you know for sure that one of the challenges the project is facing is monitoring tri-phase AC systems (220V-400V).<br /><div>In theory it is as simple and easy as monitoring three one-phase systems with one voltage sensor per voltage phase, but in real life, it is not as easy as that.</div><div>Most of the time, plugs of the different phases are far from each others, and often there are no plugs for one or more phases (if it's for a special purpose like a night water heater). So this implies cabling one plug for each of the three phases in the cabinet and using 3 voltage sensors.</div><div><br /></div><div>This would hit one of the most important&nbsp;features of OpenEnergyMonitor: non-invasiveness.&nbsp;It would imply significantly more cabling and electrical work, this would also mean higher costs.</div><div><br /></div><div>I happen to know enough about principles of electrical power to be convinced that we can use one voltage sensor and three current sensors to monitor three-phases systems. Here is the theory:</div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-QxOn2-0s1_8/Tzjt2UEskxI/AAAAAAAAAQw/FeAWyFnM0nY/s1600/acp50.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-QxOn2-0s1_8/Tzjt2UEskxI/AAAAAAAAAQw/FeAWyFnM0nY/s1600/acp50.gif" /></a></div><div class="separator" style="clear: both; text-align: center;"><i><span style="font-size: xx-small;">Source:&nbsp;http://www.electronics-tutorials.ws/</span></i></div><div class="separator" style="clear: both; text-align: left;">The three voltage vectors are <b>always</b> shifted by 120°. What changes is the angle between a certain phase voltage and current vectors (a change caused by the properties of your load, but that's another story). So if the angle between two voltage vectors is always the same, then the phase shift of a current vector to the another phase voltage vector is exactly the phase shift of that current vector to its voltage vector + 120°.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b>Example from the figure above:</b></div><div class="separator" style="clear: both; text-align: left;">Phaseshift of red phase current and voltage= Phaseshift of red current vector and yellow voltage vector.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">So if we calculate the power factor of a current with any other voltage, we will of course get a wrong one, but we can always shift it by 120° and get the right one.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">I have a setup of what I call "See-a-Watt" (which is basically a device based on the plans and code of OpenEnergyMonitor, but that combines data acquisition ethernet connection) installed in a building on the campus of my university, with access to a three-phases installation. So I decided to test the theory there.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The approach is as follows:</div><div class="separator" style="clear: both; text-align: left;"></div><ol style="text-align: left;"><li>Sample one voltage waveform out of three</li><li>Sample three current waveforms (of each phase</li><li>Calculate the phase shift (aka. power factor) of each of the three current waveforms to the one voltage waveform.</li><li>Send Vrms1, I1,I2, I3 and the power factors relative to each phase to emonCMS</li><li>Reverse the power factors to get the "wrong" phase, then compensate it with&nbsp;120° and recalculate the "right" power factor</li><li>Calculate the "right" powers = Ix * Vrms1 *'correct PF'</li></ol><br /><div class="separator" style="clear: both; text-align: left;">With the help of Trystan (he's much better with PHP than me and he knows emonCMS like the back of his hand) we implemented a function in emonCMS that reverses the "wrong" PF to the "wrong" phase shift angle, then shift it by + or -&nbsp;120° and recalculate the PF.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">This setup is working now for more than 6 weeks without any problem and the accuracy is comparable to the traditional accuracy of the non-invasive method: 1-2% not more.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Here is the code on the device side:&nbsp;<a href="https://github.com/AminfiBerlin/See-a-Watt-3-Phases">https://github.com/AminfiBerlin/See-a-Watt-3-Phases</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">and here is the commit on emonCMS that introduced the phaseshift function:&nbsp;<a href="https://github.com/openenergymonitor/emoncms3/commit/a41c57d457df77697540b1a89a74486951e058ee">https://github.com/openenergymonitor/emoncms3/commit/a41c57d457df77697540b1a89a74486951e058ee</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Needless to say that this is still in beta, I did not have any problem with it so far but that doesn't mean it's perfect. Please feel free to download the code and test it in every possible way.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><i>This is my first real contribution to any OpenSource project at all, I feel so proud and happy to be able to give back as much as I can.</i></div><div class="separator" style="clear: both; text-align: left;"><i><br /></i></div><div class="separator" style="clear: both; text-align: left;"><i>By&nbsp;<span class="Apple-style-span" style="background-color: white; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px;"><a href="http://openenergymonitor.org/emon/user/15">Amin Zayani</a></span></i></div><div><br /></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Kirikou: an open electricity monitor]]></title>
    <link href="http://blog.openenergymonitor.org/2010/12/kirikou-open-electricity-monitor/"/>
    <updated>2010-12-20T00:40:00+00:00</updated>
    <id>http://blog.openenergymonitor.org/2010/12/kirikou-open-electricity-monitor</id>
    <content type="html"><![CDATA[<div style="text-align: left;">Hello everyone,</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">This is my first contribution to this blog after months of reading it :)</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">I am Amin, I study a Bsc. of "<a href="http://www.tu-cottbus.de/fakultaet4/de/environment/">Environmental and Resource Management</a>" at the BTU, and I am currently doing an internship at the technical department at <a href="http://www.wagner-solar.com/wagnerEN/?ref=/wagnerDE/">Wagner und Co. Solartechnik</a> in Marburg.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">My main task in this internship is to dimension and design photovoltaic systems for our clients overseas, and I could not help but notice how pricy the existing monitoring solutions are: more than 400 euros for a box that monitors your inverter's production and makes the data available on the internet. So I started thinking about building a system that does that for a very "affordable" cost. And since I have caught the Arduino virus for quite some time (Wired magazine's fault), I started to think about making an Arduino-based photovoltaic plant monitor, this is how I found the open energy monitor initiative.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">Months of browsing and thinking made this little idea grow in my head like a good cancer, and talking to people about it generated mostly positive feedback.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">I am now determined to launch a commercial product (<a href="http://diydrones.com/">DIY-Drones</a> business model, more or less) that is based on the open energy monitor. This device, which I name for the moment Kirikou, will monitor the mains AC that comes from the meter to the distribution box in each building, plus 5 to 20 sub-circuit consumers. It will not require the intervention of an electrician (clip CT's). It will send the data to Pachube or Google Charts via Wifi. And it will cost 200-240 euros per unit.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">Quite an ambitious target I know, but with the help and support of the inventors, the community and some other people, I am confident that I can make it take off. <a href="http://blog.ponoko.com/index.php?s=%22ten+rules+for+maker%22">Open source hardware businesses</a> started to pop up like mushrooms the last years, and that's fantastic! It is only fair to share the knowledge about things, it is a win-win situation for everyone and I really hope to see many businesses based on the open energy monitor.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">There are also some unconventional ways to get it started, like these sponsoring programs that help entrepreneurs get on their feet in the beginning. A very good friend sent me this link to the Zurich HUB fellowship, and I applied.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">I thought it would be in the spirit of the competition to get a community involved, and I created this Ulule page (screenshot below) to raise 120 euros to build my electricity monitor based on the Blackwidow board.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;"><a href="http://www.ulule.com/kirikou-an-open-source-electricity-monitor/"><img src="http://sphotos.ak.fbcdn.net/hphotos-ak-snc4/hs1168.snc4/151044_10150324187775461_904875460_15862761_726884_n.jpg" /></a></div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">I am really excited to start this adventure with the support of a community, I believe that we could develop and spread this together.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">I believe the first step should be to get more organized and communicate more efficiently on the technical choices and so on.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">Your feedback, comments, criticism is most welcome, you can also visit <a href="http://www.bouhablog.com/">my blog</a> if you want to know me better.</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">By the way, the verdict from the Zurich HUB will be announced on Dec 20th (in a few hours), please wish me good luck :)</div>
<div style="text-align: left;"><br /></div>
<div style="text-align: left;">Amin</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hall effect sensor circuit diagram]]></title>
    <link href="http://blog.openenergymonitor.org/2009/09/hall-effect-sensor-circuit-diagram/"/>
    <updated>2009-09-03T23:23:00+00:00</updated>
    <id>http://blog.openenergymonitor.org/2009/09/hall-effect-sensor-circuit-diagram</id>
    <content type="html"><![CDATA[<p>The circuit is an inverting amplifier circuit. The 100k pot level shifts the input signal. It can be set so that the output lies within the arduino’s 0 to 5V input range.  The 1k pot sets the amplification factor. By varying both pot’s it is possible to set the current measurement range of the circuit. Note the output is inverted so that when the current increases the signal input to the arduino decreases from 5V to 0V.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_Yqa3j9ZhET8/SqBP73s9otI/AAAAAAAAAZ4/DhH-QrpshxA/s1600-h/circuit.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 178px;" src="http://3.bp.blogspot.com/_Yqa3j9ZhET8/SqBP73s9otI/AAAAAAAAAZ4/DhH-QrpshxA/s400/circuit.png" alt="" id="BLOGGER_PHOTO_ID_5377385845063787218" border="0" /></a></p>
]]></content>
  </entry>
  
</feed>
