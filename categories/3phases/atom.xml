<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 3phases | Blog | OpenEnergyMonitor]]></title>
  <link href="http://blog.openenergymonitor.org/categories/3phases/atom.xml" rel="self"/>
  <link href="http://blog.openenergymonitor.org/"/>
  <updated>2016-04-21T23:25:44+00:00</updated>
  <id>http://blog.openenergymonitor.org/</id>
  <author>
    <name><![CDATA[Glyn Hudson]]></name>
    <email><![CDATA[support@openenergymonitor.zendesk.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[3 Phases AC monitoring]]></title>
    <link href="http://blog.openenergymonitor.org/2012/02/13/if-you-are-active-member-of/"/>
    <updated>2012-02-13T11:49:00+00:00</updated>
    <id>http://blog.openenergymonitor.org/2012/02/13/if-you-are-active-member-of</id>
    <content type="html"><![CDATA[<div dir="ltr" style="text-align: left;" trbidi="on">
  <p>Note: this topic is still in development, there is an on-going discussion on the forum: <a href="http://openenergymonitor.org/emon/node/431">http://openenergymonitor.org/emon/node/431</a><br /><br />If you are an active member of OpenEnergyMonitor.org, then you know for sure that one of the challenges the project is facing is monitoring tri-phase AC systems (220V-400V).<br />&lt;div&gt;In theory it is as simple and easy as monitoring three one-phase systems with one voltage sensor per voltage phase, but in real life, it is not as easy as that.&lt;/div&gt;&lt;div&gt;Most of the time, plugs of the different phases are far from each others, and often there are no plugs for one or more phases (if it’s for a special purpose like a night water heater). So this implies cabling one plug for each of the three phases in the cabinet and using 3 voltage sensors.&lt;/div&gt;&lt;div&gt;<br />&lt;/div&gt;&lt;div&gt;This would hit one of the most important features of OpenEnergyMonitor: non-invasiveness. It would imply significantly more cabling and electrical work, this would also mean higher costs.&lt;/div&gt;&lt;div&gt;<br />&lt;/div&gt;&lt;div&gt;I happen to know enough about principles of electrical power to be convinced that we can use one voltage sensor and three current sensors to monitor three-phases systems. Here is the theory:&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<a href="http://4.bp.blogspot.com/-QxOn2-0s1_8/Tzjt2UEskxI/AAAAAAAAAQw/FeAWyFnM0nY/s1600/acp50.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-QxOn2-0s1_8/Tzjt2UEskxI/AAAAAAAAAQw/FeAWyFnM0nY/s1600/acp50.gif" /></a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;<i><span style="font-size: xx-small;">Source: http://www.electronics-tutorials.ws/</span></i>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;The three voltage vectors are <b>always</b> shifted by 120°. What changes is the angle between a certain phase voltage and current vectors (a change caused by the properties of your load, but that’s another story). So if the angle between two voltage vectors is always the same, then the phase shift of a current vector to the another phase voltage vector is exactly the phase shift of that current vector to its voltage vector + 120°.&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<b>Example from the figure above:</b>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;Phaseshift of red phase current and voltage= Phaseshift of red current vector and yellow voltage vector.&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;So if we calculate the power factor of a current with any other voltage, we will of course get a wrong one, but we can always shift it by 120° and get the right one.&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;I have a setup of what I call “See-a-Watt” (which is basically a device based on the plans and code of OpenEnergyMonitor, but that combines data acquisition ethernet connection) installed in a building on the campus of my university, with access to a three-phases installation. So I decided to test the theory there.&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;The approach is as follows:&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;&lt;/div&gt;&lt;ol style="text-align: left;"&gt;&lt;li&gt;Sample one voltage waveform out of three&lt;/li&gt;&lt;li&gt;Sample three current waveforms (of each phase&lt;/li&gt;&lt;li&gt;Calculate the phase shift (aka. power factor) of each of the three current waveforms to the one voltage waveform.&lt;/li&gt;&lt;li&gt;Send Vrms1, I1,I2, I3 and the power factors relative to each phase to emonCMS&lt;/li&gt;&lt;li&gt;Reverse the power factors to get the “wrong” phase, then compensate it with 120° and recalculate the “right” power factor&lt;/li&gt;&lt;li&gt;Calculate the “right” powers = Ix * Vrms1 *‘correct PF’&lt;/li&gt;&lt;/ol&gt;<br />&lt;div class="separator" style="clear: both; text-align: left;"&gt;With the help of Trystan (he’s much better with PHP than me and he knows emonCMS like the back of his hand) we implemented a function in emonCMS that reverses the “wrong” PF to the “wrong” phase shift angle, then shift it by + or - 120° and recalculate the PF.&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;This setup is working now for more than 6 weeks without any problem and the accuracy is comparable to the traditional accuracy of the non-invasive method: 1-2% not more.&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;Here is the code on the device side: <a href="https://github.com/AminfiBerlin/See-a-Watt-3-Phases">https://github.com/AminfiBerlin/See-a-Watt-3-Phases</a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;and here is the commit on emonCMS that introduced the phaseshift function: <a href="https://github.com/openenergymonitor/emoncms3/commit/a41c57d457df77697540b1a89a74486951e058ee">https://github.com/openenergymonitor/emoncms3/commit/a41c57d457df77697540b1a89a74486951e058ee</a>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;Needless to say that this is still in beta, I did not have any problem with it so far but that doesn’t mean it’s perfect. Please feel free to download the code and test it in every possible way.&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<br />&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<i>This is my first real contribution to any OpenSource project at all, I feel so proud and happy to be able to give back as much as I can.</i>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<i><br /></i>&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;<i>By <span class="Apple-style-span" style="background-color: white; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px;"><a href="http://openenergymonitor.org/emon/user/15">Amin Zayani</a></span></i>&lt;/div&gt;&lt;div&gt;<br />&lt;/div&gt;&lt;/div&gt;</p>
</div>
]]></content>
  </entry>
  
</feed>
