---
layout: post
title: Installing emoncms on a raspberry pi
date: '2012-05-30T09:14:00.000-07:00'
author: Trystan Lea
categories:
- emoncms
- raspberry pi
modified_time: '2012-07-24T08:21:45.270-07:00'
thumbnail: http://3.bp.blogspot.com/-RT98jV4_DP8/T8ZFc8GrHoI/AAAAAAAACdE/kSBCcfSSpgU/s72-c/IMAG0781.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-2338620326966433325
blogger_orig_url: http://openenergymonitor.blogspot.com/2012/05/installing-emoncms-on-raspberry-pi.html
---

<div class="separator" style="clear: both; text-align: left;">Update: we now have a more&nbsp;complete&nbsp;guide for installing emoncms on the Pi here:&nbsp;<a href="http://openenergymonitor.org/emon/emoncms/installing-ubuntu-debian-pi">http://openenergymonitor.org/emon/emoncms/installing-ubuntu-debian-pi</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Just got emoncms installed and running on the raspberry pi here, here are my installation notes:</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-RT98jV4_DP8/T8ZFc8GrHoI/AAAAAAAACdE/kSBCcfSSpgU/s1600/IMAG0781.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="225" src="http://3.bp.blogspot.com/-RT98jV4_DP8/T8ZFc8GrHoI/AAAAAAAACdE/kSBCcfSSpgU/s400/IMAG0781.jpg" width="400" /></a></div><b><br /></b><br /><b>1) Initial setup</b><br />Download the debian squeeze image from: <a href="http://www.raspberrypi.org/downloads">http://www.raspberrypi.org/downloads</a> and write to an SD card, following the guide here:<a href="http://www.blogger.com/%C2%A0http://elinux.org/RPi_Easy_SD_Card_Setup"> http://elinux.org/RPi_Easy_SD_Card_Setup</a>. <br /><br />Insert the sd card into the pi, power it up connect up a screen, a keyboard and ethernet.<br /><br /><b>2) Enable SSH (optional)</b><br /><br />You may at this point like to enable ssh in order to do the rest of the setup remotely from your 'normal' computer (running the pi in headless mode). I followed this guide, <a href="http://fusionstrike.com/2012/setting-ssh-ftp-raspberry-pi-debian">http://fusionstrike.com/2012/setting-ssh-ftp-raspberry-pi-debian</a>. The main steps are:<br /><br />$ sudo bash (Not sure if this is needed, apparently it is useful when performing a series of administrative tasks)<br /><br />Crease a public RSA key:<br /><br />$ ssh-keygen -t rsa<br /><br />It will ask where you would like it saved and a pass-phrase, skip these questions by pressing enter. Once finished and the pattern has appeared enter the followin to enables ssh at boot:<br /><br />$ sudo mv /boot/boot_enable_ssh.rc /boot/boot.rc<br /><br />Then to start ssh:<br />$ sudo /etc/init.d/ssh start<br /><br />Find the IP address of your pi ($ ifconfig -a) and then from your computer login to the raspberry pi via ssh, for example:<br /><br />$ ssh pi@192.168.1.17<br />(password: raspberry)<br /><br /><b>3) Update repositories</b><br />It may be worth making sure that all packages are up to date at this point:<br /><br />$ sudo apt-get update<br /><br /><b>4) Install mysql</b><br /><br />$ sudo apt-get install mysql-server mysql-client<br /><br />When the blue dialog&nbsp;appears&nbsp;enter a password for root user, note the password down as you will need it later.<br /><br /><b>5) Install apache2</b><br /><br />$ sudo apt-get install apache2<br /><div><br /></div><div>If apache fails to start (as it did for me) run the following:<br /><br />$ sudo groupadd www-data<br />$ sudo usermod -a -G www-data www-data<br /><br /><b>6) Install php</b><br /><br />$ sudo apt-get install php5 libapache2-mod-php5<br /><br />$ sudo apt-get install php5-mysql<br /><br /><b>7) Enable mod rewrite</b><br /><br />$ sudo a2enmod rewrite<br /><br />$ sudo nano /etc/apache2/sites-enabled/000-default<br /><br />Change (line 7 and line 11), "AllowOverride None" to "AllowOverride All".<br />Save and exit.<br /><br /><b>8)&nbsp;That completes the server installation, restart the server to make everything above operational:</b><br /><b><br /></b><br />$ sudo /etc/init.d/apache2 restart<br /><br /><b>Installing emoncms:</b><br /><br /><b>7) Install git (optional)</b><br /><br />$ sudo apt-get install git-core<br /><br />Follow this tutorial on creating keys etc: <br /><a href="http://help.github.com/linux-set-up-git/">http://help.github.com/linux-set-up-git/</a><br /><br />Finally to download, in the /var/www folder type:<br /><br />$ git clone git@github.com:openenergymonitor/emoncms3.git<br /><br /><b>Alternatively </b>download emoncms and unzip to your server:<br /><a href="https://github.com/openenergymonitor/emoncms3">https://github.com/openenergymonitor/emoncms3</a> <br /><br /><b> 8) Create a MYSQL database </b><br /><br />$ mysql -u root - p<br /><br />Enter the mysql password that you set above.<br />Then enter the sql to create a database:<br /><br />mysql&gt; CREATE DATABASE emoncms;<br /><br /><b> 9) Set emoncms database settings.</b><br />In the folder emoncms3/Includes rename default.settings.php to settings.php. In settings.php&nbsp;enter your mysql username (root) and password, host (localhost) and database name (if as above - emoncms).<br /><b><br /></b><br /><b>10) In an internet browser, load emoncms:</b><br /><br />http://YOURIP/emoncms3<br /><br />That's should be it!<br /><br />Next step is to get a jeelink running to&nbsp;receive&nbsp;and forward data from the emontx to the emoncms installation. Will update shortly.</div>