---
layout: post
title: emonGLCD Solar PV PWM LED Proportional Indication
date: '2012-05-13T07:00:00.000-07:00'
author: Glyn Hudson
categories:
- emonGLCD
- solarPV
modified_time: '2012-05-25T06:00:45.316-07:00'
thumbnail: https://img.youtube.com/vi/H7EXHPc-lU8/default.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-5017293691875237385
blogger_orig_url: http://openenergymonitor.blogspot.com/2012/05/emonglcd-solarpv-led-proportional.html
---

The tri-colour LED's on the emonGLCD V1.3 are connected the the hardware digital PWM lines on the Atmega328. This allows the brightness to be smoothly controlled in 0-255 steps.<br /><br />Up-until&nbsp;now we have not made use of this feature.<br /><br />The video below shows a demo of Solar PV generation and power consumption ramping up and down. The tri-colour LEDs smoothly increase in intensity green or red depending on the amount of power being imported or exported.<br /><br />This should serve as a nice at-a-glance visual indicator to how much power is being imported or exported at any given time. At the moment the example has been configured so that the LED's are at their brightest when 4kW's are being exported or imported. In the future it would be great if the display learnt what size PV system (kWp) is installed.<br /><br /><br /><iframe allowfullscreen="" frameborder="0" height="315" src="http://www.youtube.com/embed/H7EXHPc-lU8" width="560"></iframe><br /><br />It would be possible to implement a similar feature on the Home Energy Monitor display to indicate the level of power being consumed, but this will have to be done carefully not to annoy the user! The problem with this is what&nbsp;constitutes&nbsp;a high level of consumption? To be&nbsp;useful&nbsp;the display needs to 'learn' what's high and what normal level of consumption.<br /><br />Thanks to&nbsp;<a href="http://openenergymonitor.org/emon/user/905">Rob Walker</a>&nbsp;and the discussion on&nbsp;<a href="http://openenergymonitor.org/emon/node/541">this thread</a>&nbsp;for help in implementing this. Rob has also implemented proportional control of the white LED backlight level based on the light level in the room measured by the on-board light sensor (LDR)..nice!<br /><br />All these changes and some other minor&nbsp;improvements&nbsp;have been committed to the emonGLCD github repository:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD">https://github.com/openenergymonitor/EmonGLCD</a>. Please test and report feedback on the forums.<br /><br />Update: The single CT Home Energy Monitor emonGLCD example sketch has been updated to also include proportional red LED PWM brightness control corresponding to the&nbsp;amount&nbsp;of energy being consumed.