---
layout: post
title: emonTH Multiple DS18B20 Sensors
date: '2014-01-18T05:24:00.001-08:00'
author: Glyn Hudson
categories:
- emonTH
modified_time: '2014-01-18T05:24:04.511-08:00'
thumbnail: http://2.bp.blogspot.com/-ux4DUlS0uWw/Utp7RQ83b_I/AAAAAAAAss0/DRiLl_F13D8/s72-c/2014-01-18+12.59.20.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-1404747996459617614
blogger_orig_url: http://blog.openenergymonitor.org/2014/01/emonth-multiple-ds18b20-sensors.html
---

Thanks to&nbsp;<a href="https://github.com/Dave-McCraw">Dave McCraw</a> it's now possible to connect multiple DS18B20 digital temperature sensors to the emonTH on the one-wire bus.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-ux4DUlS0uWw/Utp7RQ83b_I/AAAAAAAAss0/DRiLl_F13D8/s1600/2014-01-18+12.59.20.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/-ux4DUlS0uWw/Utp7RQ83b_I/AAAAAAAAss0/DRiLl_F13D8/s1600/2014-01-18+12.59.20.jpg" height="240" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Two External DS18B20 temperature sensor +&nbsp;internal DHT22 temp&nbsp;+ humidity on emonTH</td></tr></tbody></table><br />Multiple DS18B20 sensors can be (optionally) used alongside an internal DHT22 temperature and humidity sensor. Dave's sketch which is now up in the <a href="https://github.com/openenergymonitor/emonTH">emonTH GitHub repo</a> supports two DS18B20 sensors but can easily be extended to include more.<br /><br />Dave's multiple sensor sketch requires the unique hardware addresses of the DS18B20 sensors hard-coded in the sketch, the '<a href="https://github.com/openenergymonitor/emonTH/tree/master/Simple%20emonTH%20Sensor%20Test/emonTH_temperature_search">emonTH temperature search</a>' utility sketch can be used to discover the addresses. &nbsp;Hardcoding the hardware addresses guarantees Emoncms inputs won't flip around if you replace or add sensors.<br /><br />The multiple DS18B20 sketch includes all the low power saving tricks, the sensors are only switch on when required and the ATMega328 goes to sleep in-between readings switching off all unnecessary functions. Obviously running more than one sensor will consume more power but I would still expect <a href="http://openenergymonitor.blogspot.co.uk/2013/10/emonth-update-software-power.html">battery life</a> to be in the region of 12 months.<br /><br />Using multiple DS18B20 external temperature sensors on the emonTH as lots of exciting possibilities, a few ideas include:<br /><br /><ul><li><a href="http://openenergymonitor.org/emon/applications/heatpump">Heatpump monitoring</a>: inlet, outlet flow temperatures etc.</li><li><a href="http://openenergymonitor.org/emon/applications/shw">Solar hotwater &amp; hot water cylinder monitoring</a>: top, middle and bottom of hot water tank</li><li><a href="http://openenergymonitor.org/emon/openbem">Building temperature investigation</a>: internal, cavity wall and external temperatures to inform openBEM (Building Energy Model)</li></ul><div><br /></div><div>emonTH Shop page:&nbsp;<a href="http://shop.openenergymonitor.com/emonth-temperature-humidity-node/">http://shop.openenergymonitor.com/emonth-temperature-humidity-node/</a></div><div>emonTH main getting started page:&nbsp;<a href="http://openenergymonitor.org/emon/modules/emonTH">http://openenergymonitor.org/emon/modules/emonTH</a></div><div>emonTH GitHub:&nbsp;<a href="https://github.com/openenergymonitor/emonTH">https://github.com/openenergymonitor/emonTH</a></div><div>emonTH technical wiki:&nbsp;<a href="http://wiki.openenergymonitor.org/index.php?title=EmonTH">http://wiki.openenergymonitor.org/index.php?title=EmonTH</a></div><br /><br />