---
layout: post
title: emonGLCD - getting time for the internet
date: '2012-01-17T03:36:00.000-08:00'
author: Glyn Hudson
categories:
- emonGLCD
modified_time: '2012-01-18T14:54:29.260-08:00'
thumbnail: http://2.bp.blogspot.com/--piGVImV4Jc/TxTIRxzzGRI/AAAAAAAAZO8/u3XS1GuN0gA/s72-c/emonGLCD_lab.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-2995145640711251552
blogger_orig_url: http://openenergymonitor.blogspot.com/2012/01/emonglcd-getting-time-for-internet.html
---

The <a href="http://openenergymonitor.org/emon/emonglcd">emonGLCD</a> is an open-hardware wireless graphical LCD display based on the&nbsp;ATmega328&nbsp;microcontroller&nbsp;and is Arduino&nbsp;compatible.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/--piGVImV4Jc/TxTIRxzzGRI/AAAAAAAAZO8/u3XS1GuN0gA/s1600/emonGLCD_lab.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="240" src="http://2.bp.blogspot.com/--piGVImV4Jc/TxTIRxzzGRI/AAAAAAAAZO8/u3XS1GuN0gA/s320/emonGLCD_lab.jpg" width="320" /></a></div><br /><br />The emonGLCD works very well as a real-time living room energy monitoring display. For the <a href="http://openenergymonitor.org/emon/emonglcd">emonGLCD</a> to calculate and display how much energy has been used on the current day it must know when the day begins and ends. Therefore it must know the current time.<br /><br />The emonGLCD does not have a hardware RTC but its possible to implement a very accurate clock using the<a href="https://github.com/jcw/rtclib"> Jeelabs software RTC library</a> and a web-connected Nanode RF. In the <a href="http://openenergymonitor.blogspot.com/2012/01/full-web-connected-home-energy.html">OpenEnergyMonitor end-to-end energy monitoring system</a> the emonGLCD is used in conjunction with the <a href="http://openenergymonitor.org/emon/emontx">emonTx</a> (transmitter) and <a href="http://openenergymonitor.org/emon/emonbase">emonBase/NanodeRF </a>which is used to post data&nbsp;on-line&nbsp;to <a href="http://openenergymonitor.org/emon/emoncms">emoncms.</a><br /><br />When data is posted to the emoncms sever with a http request the sever&nbsp;response contains the current time of the sever. We have written a code example to extract this time from the http header reply and pass it via RFM12B wireless to the emonGLCD. The time on the emonGLCD is always correct. Both the emonGLCD and the NanodeRF receive power monitoring data from the emonTx<br /><br />Demo video (single CT sensor system):<br /><br /><iframe allowfullscreen="" frameborder="0" height="315" src="http://www.youtube.com/embed/QeEXKzrEJ6U" width="420"></iframe><br /><br />Demo video (solar PV monitor system):<br /><br /><iframe allowfullscreen="" frameborder="0" height="315" src="http://www.youtube.com/embed/bGyoscibR04" width="420"></iframe><br /><br />Taking this a step further: when the emonGLCD receives the time from the NanodeRF the emonGLCD&nbsp;transmits&nbsp;back the current room temperature from it's on-board temperature sensor, then the NanodeRF posts this online to emoncms.<br /><br />The Arduino sketch examples are up on github:<br /><br />emonBase/NanodeRF:<br /><a href="https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_singleCT_RTCrelay_GLCDtemp">https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_singleCT_RTCrelay_GLCDtemp</a><br /><br />emonGLCD single CT:<br /><a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_singleCT_AutoTime_TempLog">https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_singleCT_AutoTime_TempLog</a><br /><br />emonGLCd solar PV:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_solarPV_type_1_and_2">https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_solarPV_type_1_and_2</a>