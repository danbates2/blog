---
layout: post
title: 'emonTH Prototype '
date: '2013-06-24T01:57:00.001-07:00'
author: Glyn Hudson
categories:
- Building Energy Modelling
- temperature
- emonTH
- humidity
modified_time: '2013-06-24T01:57:38.849-07:00'
thumbnail: http://3.bp.blogspot.com/-bbtjnWvcv4o/UcNKNyQh0-I/AAAAAAAAe2w/aWQ1Pm4-xTU/s72-c/2013-06-12+09.08.36.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-901188668228911059
blogger_orig_url: http://openenergymonitor.blogspot.com/2013/06/emonth-prototype.html
---

I'm currently working on a little unit called the emonTH, a remote temperature and humidity monitoring node. We wanted a tidy looking, easy to deploy little unit for monitoring the environmental conditions in various rooms of our houses. The temperature and humidity data gathered can be fed into emoncms and used for <a href="http://openenergymonitor.blogspot.co.uk/search/label/Building%20Energy%20Modelling">building energy modelling</a>, heating system optimisation etc.<br /><br />The design so far has got options for DS18B20 temperature sensor or DHT22 sensor for humidity &amp; temperature. External sensors can be connected via terminal block (not soldered in on prototype). The enclosure can be wall mountable. The unit will be battery powered with option for mini-usb power. We have estimated around 6-9 months battery. I hope we might be able to get a year or so battery life with optimization and slowing down the readings to once every few min.<br /><div><br /></div><div>I'm currently testing prototype #1.&nbsp;</div><div><br /></div><div>To keep power consumption down the ATmega328 microcontroller is put to sleep in-between reading and the sensors are powered from digital outputs and are turned off altogether in between readings, this should stop any self heating effects (see <a href="http://openenergymonitor.org/emon/node/2484#comment-13108">forum thread</a>), I'm planning to do some accuracy testing on prototype soon.</div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-bbtjnWvcv4o/UcNKNyQh0-I/AAAAAAAAe2w/aWQ1Pm4-xTU/s1600/2013-06-12+09.08.36.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/-bbtjnWvcv4o/UcNKNyQh0-I/AAAAAAAAe2w/aWQ1Pm4-xTU/s320/2013-06-12+09.08.36.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonTH first prototype with DTH22 and DS18B20</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-G-IkJdFn8uU/UcNKOb7yI7I/AAAAAAAAe20/GcGRXoEM5Hc/s1600/2013-06-12+09.07.50.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://4.bp.blogspot.com/-G-IkJdFn8uU/UcNKOb7yI7I/AAAAAAAAe20/GcGRXoEM5Hc/s320/2013-06-12+09.07.50.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonTH enclosure</td></tr></tbody></table><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">As with other the other OpenEnergyMonitor hardware the emonTH has got an ATmega328 with the Arduino bootloader so it's nice and easy to modify and upload new the code (sketches). For the wireless there is an RFM12B module to be compatible with our other hardware (RFM12Pi base station etc). Again, as with all our other hardware units the schematic and CAD filed will be open-sourced.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="" style="clear: both; text-align: left;">The emonTH uses a little module from <a href="http://shop.ciseco.co.uk/about-us/">Ciseco</a> called <a href="http://shop.ciseco.co.uk/rf-328-bare-arduino-atmega-328-compatible-micro-board-rfu-328/">RFu328</a>. This unit is an ATmega328 plus a radio RFM12B or <a href="http://shop.ciseco.co.uk/rf-328-arduino-atmega-328-compatible-radio-transceiver-rfu-328/">SRF</a> in the same small form factor as an Xbee. We decided to use the RFu328 partly because it's nice and small and makes manufacture easier for us and party since it allows to to easily swap between using the RFM12B radio or the SRF while keeping the flexibly and ease of use of the ATmega328 with Arduino Uno serial bootloader.&nbsp;</div><div class="" style="clear: both; text-align: left;"><br /></div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://openmicros.org/images/RFu-328/RF%C2%B5-328-RFM12-Resistors.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="150" src="http://openmicros.org/images/RFu-328/RF%C2%B5-328-RFM12-Resistors.JPG" width="200" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">RFu328 with RFM12B</td></tr></tbody></table><br /><div>The little red circle on the image above indicates the only hardware charge required when using an RFM12B radio on the RFu328. The SMT resistor is rotated routed 90 degrees swapping over Dig 1 SRF UART (Tx ) to Dig3 (INT 1) to be used as the RFM12B SPI interrupt. The RFu328 with the RFM12B requires a modified JeeLib Arduino library called <a href="https://github.com/openenergymonitor/RFu_jeelib">RFu_JeeLib</a>.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://cdn2.bigcommerce.com/server3700/8d73a/products/221/images/457/IMG_5389__35236.1352109163.1280.1280.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="298" src="http://cdn2.bigcommerce.com/server3700/8d73a/products/221/images/457/IMG_5389__35236.1352109163.1280.1280.JPG" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">RFu328 with SRF &amp; Chip Antenna</td></tr></tbody></table></div>