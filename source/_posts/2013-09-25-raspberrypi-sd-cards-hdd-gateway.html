---
layout: post
title: 'RaspberryPI: SD Cards, HDD, Gateway Forwarder'
date: '2013-09-25T09:44:00.001-07:00'
author: Glyn Hudson
categories:
- emonBase
- raspberry pi
modified_time: '2013-09-25T09:46:05.141-07:00'
thumbnail: http://3.bp.blogspot.com/-0z_9GxPBEr0/UkKqHnyLZRI/AAAAAAAAkmA/5m3pIXesesA/s72-c/20130820_191803.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-3361837990161722586
blogger_orig_url: http://blog.openenergymonitor.org/2013/09/raspberrypi-sd-cards-hdd-gateway.html
---

<div class="separator" style="clear: both; text-align: left;">After several&nbsp;<a href="http://openenergymonitor.blogspot.co.uk/2013/04/introducing-rfm12pi-v2-raspberry-pi.html?q=raspberry+pi">Raspberry Pi emonBase</a>&nbsp;SD card failures between myself and Glyn in the last two weeks and the general experience of short SD card lifespan&nbsp;<a href="http://openenergymonitor.org/emon/node/2292">on the forums</a>&nbsp;(SD cards have a limited number of writes), we thought we'd make a concerted effort this week to move the openenergymonitor Raspberry Pi documentation, pi images and pre-installed SD cards over to the more stable solutions:</div><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-0z_9GxPBEr0/UkKqHnyLZRI/AAAAAAAAkmA/5m3pIXesesA/s1600/20130820_191803.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/-0z_9GxPBEr0/UkKqHnyLZRI/AAAAAAAAkmA/5m3pIXesesA/s320/20130820_191803.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Raspberry Pi emonBase with <a href="http://shop.openenergymonitor.com/raspberry-pi/">RFM12Pi</a> in Pibow Timber Case</td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">1. We read <a href="http://harizanov.com/2013/08/rock-solid-rfm2pi-gateway-solution/">Martin Harizanov's blog post</a> on creating a rock-solid gateway using a read-only filesystem with&nbsp;<a href="http://openenergymonitor.org/emon/user/1531">Jerome&nbsp;Lafréchoux's</a> excellent python <a href="https://github.com/Jerome-github/oem_gateway">oem_gateway</a> to forward data to <a href="http://emoncms.org/">emoncms.org</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">This is a reliable solution which is simple to setup and works well if you just want to forward data to a remote emoncms server like emoncms.org. We have created a Raspberry Pi SD card image for this read-only filesystem oem_gateway setup, see documentation page for full details, there's a link to download it there too:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><a href="http://emoncms.org/site/docs/raspberrypigateway">http://emoncms.org/site/docs/raspberrypigateway</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The ready-to-go pre-loaded SD card available in the shop will be pre-loaded with this image from now on.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">2. We also heard from <a href="http://openenergymonitor.org/emon/node/2292">Paul Reed about his setup</a> where the SD card is just used to boot an external hard drive (powered by a USB hub) with the Pi's root partition running a web server and the full version of emoncms on the external hard drive. This solution is great if you want to keep your data locally or have an additional backup. This could also double up as a 24/7 file server running in your home for music streaming, document backup etc.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Glyn's using the read-only gateway for his setup and I'm going to setup the hard drive local backup in addition to forwarding to emoncms.org for mine.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Here's a diagram that illustrates these different options, including the NanodeRF, local and remote storage, backup options and emoncms data storage options (mysql, timestore etc):</div><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/-1yBlyXKWE8k/UkBuY7OxrbI/AAAAAAAACww/Hbm3i0PkobM/s1600/overview.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="452" src="http://3.bp.blogspot.com/-1yBlyXKWE8k/UkBuY7OxrbI/AAAAAAAACww/Hbm3i0PkobM/s640/overview.png" width="640" /></a></div>If your not sure which way to go, its probably easiest to start with the Raspberry Pi oem_gateway forwarder to emoncms.org, you can re-configure it for local storage and backup via an external harddrive if you want later. If your more comfortable with Arduino code than the Raspberry Pi and linux then the <a href="http://shop.openenergymonitor.com/nanoderf/">NanodeRF (pre-assembled SMT)</a> may be best for you.<br /><div><br /></div><div>To summarise the above with pros and cons, here are the two main emonBase Raspberry Pi options:<br /><div><br /><b>1. Run a read only filesystem on the Pi and forward data straight to a remote emoncms server.</b><br /><b>Developed by Jerome&nbsp;Lafréchoux and&nbsp;Martin Harizanov's</b><br /><a href="http://harizanov.com/2013/08/rock-solid-rfm2pi-gateway-solution/">http://harizanov.com/2013/08/rock-solid-rfm2pi-gateway-solution/</a><br /><ul><li>+ More robust and easier to setup</li><li>+&nbsp;Cheaper and lower power than using an external HDD</li><li>- Does not utilise the full potential of the Pi</li></ul><ul><li>Run IPE – Industrial Perennial Environment a special blackout-proof flavour of Raspbian which can be locked down after setup to work in read only mode</li><li>The <a href="https://github.com/Jerome-github/oem_gateway">Oem Gateway Python scrip</a>t by&nbsp;Jérôme Lafréchoux to forward the data received by the RFM12Pi straight to emoncms.org</li></ul><div><b>2. Move the Pi's file system to an external HDD using the SD card only to boot&nbsp;</b><br />This option requires an external hard drive connected to the Pi through a powered USB hub. This does require extra expense and an increase in power consumption, the hard drive we tested here a 1TB USB hard drive adds 1.8W to the power consumption of the Pi (3.9W). However this option does have several advantages:<br /><ul><li>+&nbsp;Ability to run emoncms on the Pi to log data locally and have full control over your setup as well as forwarding data to a remote emoncms server.</li><li>+&nbsp;You now have the potential to have 24/7 file server running in your house for music streaming document backup etc.</li><li>- More complicated to setup</li><li>- Higher cost and power consumption</li></ul></div></div></div>