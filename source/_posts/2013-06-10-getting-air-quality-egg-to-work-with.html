---
layout: post
title: 'Getting the Air Quality Egg to work with the OpenEnergyMonitor system and
  emoncms '
date: '2013-06-10T14:16:00.000-07:00'
author: Trystan Lea
categories:
- Air Quality Egg
modified_time: '2013-06-15T13:13:33.932-07:00'
thumbnail: http://1.bp.blogspot.com/-hFLyp7hugOI/UbY_UoDQ9rI/AAAAAAAACqk/8k--rKEg83U/s72-c/shield.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-1203156776501931515
blogger_orig_url: http://blog.openenergymonitor.org/2013/06/getting-air-quality-egg-to-work-with.html
---

<br /><div style="margin-bottom: 0cm;">I spent a bit of time today putting a sketch together to get the <a href="http://openenergymonitor.blogspot.co.uk/2013/02/air-quality-egg-sensor-shield.html">AirQuality Egg Shield</a> and <a href="http://openenergymonitor.blogspot.co.uk/2013/02/air-quality-egg.html">Air Quality Egg Remote node</a> to work as a standard sensor node with the OpenEnergyMonitor system, so that I could log data into emoncms to visualise changes over time and use the existing raspberrypi + rfm12pi base station setup thats already receiving data from an emontx and low power temperature nodes.</div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"><span style="font-size: small;">I placed the shield on top of a NanodeRF as it has the RFM12 RF module but Im not actually using the Ethernet part, Im just using the nanode as an arduino with an RFM12 module to form a remote sensor node. This is the same setup as is found inside the&nbsp;</span>Air Quality Egg Remote node.</div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-hFLyp7hugOI/UbY_UoDQ9rI/AAAAAAAACqk/8k--rKEg83U/s1600/shield.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="357" src="http://1.bp.blogspot.com/-hFLyp7hugOI/UbY_UoDQ9rI/AAAAAAAACqk/8k--rKEg83U/s400/shield.jpg" width="400" /></a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">The sketch is adapted from the PollEggBus_EPA sketch developed by <a href="http://wickeddevice.com/">Wicked Device</a> who develop and make the Air Quality Egg and just puts the NO2, CO, temperature and humidity data in the standard data structure of a series of integer values that the emontx and other nodes use.</div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">Download the sketch here to try it out:</div><div style="margin-bottom: 0cm;"><a href="https://github.com/openenergymonitor/Air-Quality-Egg/blob/master/libraries/EggBus/examples/PollEggBus_openenergymonitor/PollEggBus_openenergymonitor.ino">https://github.com/openenergymonitor/Air-Quality-Egg/blob/master/libraries/EggBus/examples/PollEggBus_openenergymonitor/PollEggBus_openenergymonitor.ino</a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">I've now been logging for about 3 hours and there's already some interesting data to look at, I got back from being out on my bike and had a shower at 20:50 you can see the RH shoot up, there also seems to be a spike in NO2 and a dip in CO not sure what that means, any ideas?</div><div style="margin-bottom: 0cm;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-y5QCTJd00pI/UbY_dqJ-P8I/AAAAAAAACqs/uUOOpyo0e6U/s1600/aqe.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="330" src="http://4.bp.blogspot.com/-y5QCTJd00pI/UbY_dqJ-P8I/AAAAAAAACqs/uUOOpyo0e6U/s640/aqe.png" width="640" /></a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;"></div><div style="margin-bottom: 0cm;">Check out the live dashboard here:</div><div style="margin-bottom: 0cm;"><a href="http://emoncms.org/trystan/aqe">http://emoncms.org/trystan/aqe</a></div><div style="margin-bottom: 0cm;"><br /></div><div style="margin-bottom: 0cm;">Air quality is not something I know much about but after discussing it with the <a href="http://openenergymonitor.blogspot.co.uk/2013/05/carbon-coop.html">Carbon Coop</a> guys recently it sounds like a fascinating and important area to understand, Matt from Carbon Coop explained that high levels of CO2 (not monitored on the AQE shield above but something that would be great to add - but more expensive) in buildings create problems around drowsiness and ability to concentrate and so monitoring these things could be important when designing and making sure a building after having undergone retrofit work has healthy air. It would also be interesting to understand in greater detail the longer term health implications of air quality and the aspects of this that we can measure. There certainly seems to be a lot of resources on this on the Air Quality Egg wiki here which should make interesting reading: <a href="http://airqualityegg.wikispaces.com/AirQualityEgg">http://airqualityegg.wikispaces.com/AirQualityEgg</a></div>