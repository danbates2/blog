---
layout: post
title: Finished, working, functional home energy monitor!
date: '2010-01-13T13:47:00.000-08:00'
author: Trystan Lea
categories: 
modified_time: '2010-01-13T14:14:39.038-08:00'
thumbnail: http://1.bp.blogspot.com/_Yqa3j9ZhET8/S05CSiL2pvI/AAAAAAAAA-E/i7-MUpDQu1Y/s72-c/display.jpg
blogger_id: tag:blogger.com,1999:blog-2472065242652647619.post-4382593369868165531
blogger_orig_url: http://blog.openenergymonitor.org/2010/01/finished-working-functional-home-energy.html
---

I have spent some time over the last couple of weeks working on getting a finished energy monitor for the house together and installed in a more permanent way. I managed to finished the build yesterday and it's now working away logging energy consumption data, giving some informative readouts and nice looking graphs :)<br /><br />I decided on having a real time display that can be mounted in some ware visible with a cable running to the main unit that holds the sensor electronics situated near were the mains comes in to the house. The main unit also has a USB pen data logger in it to store detailed data. I also wanted to send data to be graphed on the net and so I have another box near my router that has a second arduino and an arduino ethernet shield in it. The ethernet box is connected to the main unit with a wireless xbee connection.<br /><br />Its quite a complex setup and a bit pricey but I wanted to learn about each element and since I had bought a couple of arduinos, xbee's etc I thought I'd through it all together and make something with lots of crazy and useful things going on in it...<br /><br />Here are some pics of the setup:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_Yqa3j9ZhET8/S05CSiL2pvI/AAAAAAAAA-E/i7-MUpDQu1Y/s1600-h/display.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 300px;" src="http://1.bp.blogspot.com/_Yqa3j9ZhET8/S05CSiL2pvI/AAAAAAAAA-E/i7-MUpDQu1Y/s400/display.jpg" alt="" id="BLOGGER_PHOTO_ID_5426347487209629426" border="0" /></a>The display unit consisting of 4 large green led 7 segments. On the right is a 6 mode – mode chooser so that you can select by turning the potentiometer (bottom – right) whether the display shows real power, apparent power, power factor, RMS Voltage, RMS Current, frequency or cumulative kWh used. The display is connected to the main unit by a cable that goes through the wall at the back of the display.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_Yqa3j9ZhET8/S05Chj5YALI/AAAAAAAAA-U/3yWAbDS1W5M/s1600-h/mainunit.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 300px;" src="http://3.bp.blogspot.com/_Yqa3j9ZhET8/S05Chj5YALI/AAAAAAAAA-U/3yWAbDS1W5M/s400/mainunit.jpg" alt="" id="BLOGGER_PHOTO_ID_5426347745367031986" border="0" /></a>The main unit is the small box in the far left of pic with the white CT sensor wire crossing the shelf over to the sensor clipped on to the main mains wire on the right.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_Yqa3j9ZhET8/S05ChJXJryI/AAAAAAAAA-M/2-y9ijDq798/s1600-h/ethernet.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 300px;" src="http://2.bp.blogspot.com/_Yqa3j9ZhET8/S05ChJXJryI/AAAAAAAAA-M/2-y9ijDq798/s400/ethernet.jpg" alt="" id="BLOGGER_PHOTO_ID_5426347738244165410" border="0" /></a>The ethernet unit connected to the router, the small box on top of the larger box houses the xbee and can be detached if one wanted a wire connection instead.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_Yqa3j9ZhET8/S05C8Uepv6I/AAAAAAAAA-c/sUFFU9whVjw/s1600-h/graph.PNG"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 339px;" src="http://3.bp.blogspot.com/_Yqa3j9ZhET8/S05C8Uepv6I/AAAAAAAAA-c/sUFFU9whVjw/s400/graph.PNG" alt="" id="BLOGGER_PHOTO_ID_5426348205084884898" border="0" /></a>A screenshot of the web based graphing that can be seen live <a href="http://power.openenergymonitor.org/">here</a>.<br />Graphing is done using flot – a very nice piece of software.<br />I'd like to thank John from <a href="http://jarv.org/projects.shtml">jarv.org</a> for his work and help on logging using the ethernet board although he is using open flash charts much of the implementation is very similar.<br /><br />For more pictures of the setup check out the picassa album <a href="http://picasaweb.google.com/trystan.lea/FinishedEnergyMonitor?feat=directlink">here</a>.<br /><br />Over the next two weeks I hope to document it the setup. I hope to manage a section every couple of days in the order of the features below:<br /><br /><span style="font-weight: bold;">Main Features</span><br /><ul><li>Voltage measurement with step down AC to AC adapter,</li><li>Current measurement with CT sensor.</li><li>Power for sensor board provided with same AC to AC adapter used for voltage measurement.</li><li>Calculation of Real power, Apparent power, power factor, RMS voltage, RMS current, frequency, cumulative kWh.<br /></li></ul><ul><li>Display unit consisting of large green 7 segment display, 6 mode – mode chooser and red/green led indicator to indicate when grid is below and above 50Hz.</li></ul><ul><li>USB pen data logging using VDIP1 board</li></ul><ul><li>Xbee wireless link from sensor unit to the Ethernet unit.</li></ul><ul><li>Ethernet board for logging and graphing on internet. </li></ul><ul><li>Flot based graphing on website.</li></ul><br /><span style="font-weight: bold;">Block diagram of the setup:</span><br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_Yqa3j9ZhET8/S05DXGPOrSI/AAAAAAAAA-k/aU-100yqgik/s1600-h/block.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 283px;" src="http://3.bp.blogspot.com/_Yqa3j9ZhET8/S05DXGPOrSI/AAAAAAAAA-k/aU-100yqgik/s400/block.png" alt="" id="BLOGGER_PHOTO_ID_5426348665118567714" border="0" /></a>