<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.1.3">Jekyll</generator><link href="https://blog.openenergymonitor.org/feed.xml" rel="self" type="application/atom+xml" /><link href="https://blog.openenergymonitor.org/" rel="alternate" type="text/html" /><updated>2016-05-20T15:36:39+00:00</updated><id>https://blog.openenergymonitor.org/</id><title>Blog | OpenEnergyMonitor</title><subtitle>OpenEnergyMonitor Blog</subtitle><author><name>Glyn Hudson</name></author><entry><title>Substantial update to emonPi</title><link href="https://blog.openenergymonitor.org/2016/05/emonsd-update-03may16/" rel="alternate" type="text/html" title="Substantial update to emonPi" /><published>2016-05-20T10:00:00+00:00</published><updated>2016-05-20T10:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/05/emonsd-update-03may16</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/05/emonsd-update-03may16/">&lt;p&gt;This latest update to emonSD the pre-built SD card image for the emonPi/emonBase significantly enhances the out-the-box functionality of the emonPi by integrating applications such as nodeRED, openHAB and improved MQTT support.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The emonPi in it’s default configuration works great using Emoncms for data logging and visualisation. However there may be times when more flexibility and the ability to interface with other hardware or services is needed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The emonPi with this latest software update is perfectly positioned to become the heart of a smart home automation system. The ‘always-on’ requirement of energy monitoring and the processing power of the Raspberry Pi makes it a fantastic customisable home-hub. See &lt;em&gt;Related Blog Posts&lt;/em&gt; at the bottom of this post for inspiration as to what can be achieved.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;For the past few years we have made available a pre-built SD card image for the RaspberryPi. Since launching the emonPi last year the pre-built image has been developed extensively. We have now given it a name: &lt;strong&gt;emonSD&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;The latest update to emonSD (&lt;strong&gt;emonSD-03May16&lt;/strong&gt;) now incudes the following all setup and pre-configured:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/emoncms/emoncms&quot;&gt;Emoncms V9&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://guide.openenergymonitor.org/integrations/nodered&quot;&gt;nodeRED&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://guide.openenergymonitor.org/integrations/openhab&quot;&gt;openHAB&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://guide.openenergymonitor.org/technical/mqtt&quot;&gt;MQTT&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://guide.openenergymonitor.org/integrations/lightwaverf/&quot;&gt;Support for MQTT LightWaveRF OOK Control&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://guide.openenergymonitor.org/integrations/mqtt-relay/&quot;&gt;Support for MQTT WiFi control Relay&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.raspberrypi.org/downloads/raspbian/&quot;&gt;RASPBIAN JESSIE LITE&lt;/a&gt; (2015-11-21)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2016/03/raspberry-pi-3/&quot;&gt;Raspberry Pi 3 Suppport&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Including on-board Wifi, external USB Wifi adapter no longer required&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;low-write optimisations for long SD card life-span&lt;/li&gt;
  &lt;li&gt;Root file-system read-only&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;download-latest-emonsd--view-full-change-loghttpsgithubcomopenenergymonitoremonpiwikiemonsd-pre-built-sd-card-download--change-logemonsd-03may16--release&quot;&gt;&lt;a href=&quot;https://github.com/openenergymonitor/emonpi/wiki/emonSD-pre-built-SD-card-Download-&amp;amp;-Change-Log#emonsd-03may16--release&quot;&gt;Download latest emonSD &amp;amp; view full change-log&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;All emonPi / emonBase’s that have been purchased from our online store from June 2015 - May 2016 have been shipped with the old &lt;a href=&quot;https://github.com/openenergymonitor/emonpi/wiki/emonSD-pre-built-SD-card-Download-&amp;amp;-Change-Log#emonsd-17jun15&quot;&gt;17June15&lt;/a&gt; emonSD. The new emonSD 03May16 will now be included by default (&lt;a href=&quot;/2016/05/emonpi-raspberrypi3/&quot;&gt;together with a Raspberry Pi 3&lt;/a&gt;) with all emonPi / emonBase purchases. If you have recently puchased an emonPi and it like the photo (black acrylic fascia) then you have the new emonSD and Raspberry Pi 3inside. The acrylic fascia is required to use the Raspberry Pi 3’s on-board WiFi (&lt;a href=&quot;/2016/05/emonpi-raspberrypi3/&quot;&gt;see blog post&lt;/a&gt;):&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/emonpi-raspi3.jpg&quot; alt=&quot;emonPi Raspberry Pi 3 Acrylic Fascia&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Existing users can download the new emonSD from the link above and flash to a spare SD card and then use the &lt;a href=&quot;https://guide.openenergymonitor.org/setup/import/&quot;&gt;Emoncms backup / import&lt;/a&gt; tool to migrate local Emoncms data.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;We would highly recommend all users that are interested in having the latest features and future update to update to this new emonSD image. The June15 image will not receive any Emoncms updates.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;However if your emonPi is currently stable and is working as indented then don’t feel that upgrading is essential, &lt;em&gt;“If it ain’t broke, don’t f ix it!”&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;documentation&quot;&gt;Documentation&lt;/h2&gt;

&lt;p&gt;As &lt;a href=&quot;2016/05/website-changes/&quot;&gt;previously mentioned on the blog&lt;/a&gt; a couple of weeks ago we have launched a new User Guide website, the launch of this Guide has coincide with the launch of the new emonSD. The User Guide is designed to be the goto location for everything a user needs to know to setup, use and configure an OpenEnergyMonitor system:&lt;/p&gt;

&lt;h3 id=&quot;httpsguideopenenergymonitororghttpsguideopenenergymonitororg&quot;&gt;&lt;a href=&quot;https://guide.openenergymonitor.org&quot;&gt;https://guide.openenergymonitor.org&lt;/a&gt;&lt;/h3&gt;

&lt;h2 id=&quot;related-blog-posts&quot;&gt;Related Blog posts&lt;/h2&gt;

&lt;h3 id=&quot;nodered&quot;&gt;nodeRED&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openenergymonitor.org/categories/nodered/&quot;&gt;Node-RED blog post tag&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openenergymonitor.org/2015/10/emonpi-nodered-and-mqtt/&quot;&gt;emonPi, NodeRed and MQTT&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://2.bp.blogspot.com/-wVqIG0KV_8k/VkPM0XAJCYI/AAAAAAABi1c/EoNQ2OvDVvs/s1600/emoncms_nodered_node.png&quot;&gt;Node-RED Emoncms Node&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openenergymonitor.org/2016/02/outdoor-temperature-data-from-weather/&quot;&gt;Outdoor Temperature Data from Weather Underground to Emoncms &amp;amp; MQTT&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openenergymonitor.org/2015/11/ambient-wind-energy-indicator-using/&quot;&gt;Ambient Wind Energy Indicator using Node-RED and Blink(1) USB&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;openhab&quot;&gt;openHAB&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openenergymonitor.org/2015/12/openenergymonitor-emonpi-and-openhab/&quot;&gt;OpenEnergyMonitor, emonPi and openHAB&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;lightwave-rf&quot;&gt;LightWave RF&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openenergymonitor.org/2015/11/remote-control-of-lightwave-rf-plugs/&quot;&gt;Controling LightWaveRF plugs using emonPi&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Glyn Hudson</name></author><summary>This latest update to emonSD the pre-built SD card image for the emonPi/emonBase significantly enhances the out-the-box functionality of the emonPi by integrating applications such as nodeRED, openHAB and improved MQTT support.


  The emonPi in it’s default configuration works great using Emoncms for data logging and visualisation. However there may be times when more flexibility and the ability to interface with other hardware or services is needed.


The emonPi with this latest software update is perfectly positioned to become the heart of a smart home automation system. The ‘always-on’ requirement of energy monitoring and the processing power of the Raspberry Pi makes it a fantastic customisable home-hub. See Related Blog Posts at the bottom of this post for inspiration as to what can be achieved.



For the past few years we have made available a pre-built SD card image for the RaspberryPi. Since launching the emonPi last year the pre-built image has been developed extensively. We have now given it a name: emonSD.

The latest update to emonSD (emonSD-03May16) now incudes the following all setup and pre-configured:


  Emoncms V9
  nodeRED
  openHAB
  MQTT
  Support for MQTT LightWaveRF OOK Control
  Support for MQTT WiFi control Relay</summary></entry><entry><title>emonPi / emonBase Raspberry Pi 3</title><link href="https://blog.openenergymonitor.org/2016/05/emonpi-raspberrypi3/" rel="alternate" type="text/html" title="emonPi / emonBase Raspberry Pi 3" /><published>2016-05-13T15:00:00+00:00</published><updated>2016-05-13T15:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/05/emonpi-raspberrypi3</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/05/emonpi-raspberrypi3/">&lt;p&gt;All emonPi’s / emonBase’s shipped to date have included a Raspberry Pi 2. In the next week or so we will be upgrading to include a RaspberryPi 3. This is a nice upgrade: approximately double the processor speed and on-board WiFi with zero cost increase.&lt;/p&gt;

&lt;p&gt;Since the RaspberryPi 3 has got on-board WiFi a USB WiFi dongle is not required; even more costing cost saving for our customers, thanks to hard work of the Raspberry Pi foundation and a bit of &lt;a href=&quot;https://en.wikipedia.org/wiki/Moore%27s_law&quot;&gt;Moore’s law&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/emonpi-raspi3.jpg&quot; alt=&quot;emonPi Raspberry Pi 3 Acrylic Fascia&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;If you receive an emonPi with a black acrylic fascia like in the photo above this means you have a RaspberryPi 3 inside. The reason for switching from punched-aluminium end-plates to black acrylic plastic is to allow the RaspberryPi 3’s on-board Wifi to propagate out of the enclosure.&lt;/p&gt;

&lt;p&gt;The Raspberry Pi 3 equipped emonPi’s and emonBase’s will be running the latest &lt;a href=&quot;https://guide.openenergymonitor.org/technical/#software-overview&quot;&gt;emonSD pre-built SD card image&lt;/a&gt; which includes the latest version of Emoncms as well as &lt;a href=&quot;https://guide.openenergymonitor.org/integrations/nodered&quot;&gt;NodeRED&lt;/a&gt; and &lt;a href=&quot;https://guide.openenergymonitor.org/integrations/openhab&quot;&gt;openHAB&lt;/a&gt; pre-installed. Checkout our &lt;a href=&quot;https://guide.openenergymonitor.org/&quot;&gt;new Setup &amp;amp; User Guide&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Note: The Raspberry Pi 3 also includes integrated on-board Bluetooth, however this has been disabled on the emonPi due to a serial port conflict. See our &lt;a href=&quot;/2016/03/raspberry-pi-3/&quot;&gt;original post on the Raspberry Pi 3&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;emonpi-online-store-itemhttpsshopopenenergymonitorcomemonpi-3&quot;&gt;&lt;a href=&quot;https://shop.openenergymonitor.com/emonpi-3/&quot;&gt;emonPi Online Store Item&lt;/a&gt;&lt;/h2&gt;

&lt;h2 id=&quot;emonbase-online-store-itemhttpsshopopenenergymonitorcomemonbase-web-connected-base-station&quot;&gt;&lt;a href=&quot;https://shop.openenergymonitor.com/emonbase-web-connected-base-station/&quot;&gt;emonBase Online Store Item&lt;/a&gt;&lt;/h2&gt;

&lt;h2 id=&quot;getting-start-guide-httpsguideopenenergymonitororg&quot;&gt;&lt;a href=&quot;https://guide.openenergymonitor.org/&quot;&gt;Getting Start Guide &lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/raspberrypi3.jpg&quot; alt=&quot;Raspberry Pi 3&quot; /&gt;&lt;/p&gt;</content><author><name>Glyn Hudson</name></author><summary>All emonPi’s / emonBase’s shipped to date have included a Raspberry Pi 2. In the next week or so we will be upgrading to include a RaspberryPi 3. This is a nice upgrade: approximately double the processor speed and on-board WiFi with zero cost increase.

Since the RaspberryPi 3 has got on-board WiFi a USB WiFi dongle is not required; even more costing cost saving for our customers, thanks to hard work of the Raspberry Pi foundation and a bit of Moore’s law.</summary></entry><entry><title>Emoncms android App QR Code Scanner Setup</title><link href="https://blog.openenergymonitor.org/2016/05/emoncms-qr/" rel="alternate" type="text/html" title="Emoncms android App QR Code Scanner Setup" /><published>2016-05-11T15:00:00+00:00</published><updated>2016-05-11T15:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/05/emoncms-qr</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/05/emoncms-qr/">&lt;p&gt;I would like to highlight a nice improvement to Emoncms and the Emoncms android app that has been contributed by community memebers &lt;a href=&quot;https://community.openenergymonitor.org/users/jumpmaster/activity&quot;&gt;@jumpmaster&lt;/a&gt; and &lt;a href=&quot;https://community.openenergymonitor.org/users/andy_taylor/activity&quot;&gt;@andy_taylor&lt;/a&gt;. See &lt;a href=&quot;https://community.openenergymonitor.org/t/mobile-app-qr-code/149&quot;&gt;development forum thread&lt;/a&gt; on our &lt;a href=&quot;/2016/05/website-changes/&quot;&gt;shiny new forums&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Emoncms MyAccount page now displays a QR code and a couple of handy ‘Copy to Clipboard’ buttons for the API keys:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/emoncms-qr.png&quot; alt=&quot;Emoncms QR code generator&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;em&gt;This updated has been merged into the stable Emoncms branch V9.6. If your running an emonPi/emonBase jsut hit update to pull in the changes. The update will appear on Emoncms.org in the next few days.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;This QR code contains the Emoncms URL and read-API key to automate setting up the &lt;a href=&quot;https://play.google.com/store/apps/details?id=org.emoncms.myapps&amp;amp;hl=en_GB&quot;&gt;Emoncms android app&lt;/a&gt;. The update for the app to support the QR code scanner has been pushed to Googe Play. After the update just can the QR code to setup the app.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/android-qr.png&quot; width=&quot;300&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If your feeds are named &lt;strong&gt;use&lt;/strong&gt; and &lt;strong&gt;use_kwh&lt;/strong&gt; the app will automatically select use these feeds as the Power and kWh feeds.&lt;/p&gt;

&lt;p&gt;Any issues, please post on the &lt;a href=&quot;https://community.openenergymonitor.org/t/mobile-app-qr-code/149&quot;&gt;development forum thread&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thanks again to everyone involved in the development and testing. It’s been great working with an enthusiastic development community over on the new forums. Onwards and upwards :-)&lt;/p&gt;</content><author><name>Glyn Hudson</name></author><summary>I would like to highlight a nice improvement to Emoncms and the Emoncms android app that has been contributed by community memebers @jumpmaster and @andy_taylor. See development forum thread on our shiny new forums.

Emoncms MyAccount page now displays a QR code and a couple of handy ‘Copy to Clipboard’ buttons for the API keys:</summary></entry><entry><title>New Forum, Blog and User Guide Website</title><link href="https://blog.openenergymonitor.org/2016/05/website-changes/" rel="alternate" type="text/html" title="New Forum, Blog and User Guide Website" /><published>2016-05-03T15:00:00+00:00</published><updated>2016-05-03T15:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/05/website-changes</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/05/website-changes/">&lt;p&gt;We have been busy for the past couple of months building some new websites to improve OpenEnergyMonitor.&lt;/p&gt;

&lt;p&gt;Introducing a shiny new:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Community Forum&lt;/li&gt;
  &lt;li&gt;User Guide website&lt;/li&gt;
  &lt;li&gt;Blog&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Later this week on Thursday 5th May 2016 the old forums will be frozen and we will be moving to the new community forums&lt;/strong&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;new-community-forum&quot;&gt;1. New Community Forum&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/Selection_037.png&quot; alt=&quot;image&quot; /&gt;&lt;img src=&quot;/images/Selection_038.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;httpscommunityopenenergymonitororghttpscommunityopenenergymonitororg&quot;&gt;&lt;a href=&quot;https://community.openenergymonitor.org&quot;&gt;https://community.openenergymonitor.org&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;The current &lt;a href=&quot;http://openenergymonitor.org/emon/forum&quot;&gt;OpenEnergyMonitor Forums&lt;/a&gt; have been running (since 2010) on Drupal 6. As of February 2016 Drupal 6 reached EOL. This does not mean that the site will stop working, however, it does mean we have decided the time has come to upgrade the highest traffic and most interacted-with part of the site &amp;gt; The Community Forums.&lt;/p&gt;

&lt;p&gt;Later this week &lt;strong&gt;on Thursday 5th May 2016 the old forum will be frozen&lt;/strong&gt; and we will be moving to the new forum powered by &lt;a href=&quot;https://www.discourse.org/&quot;&gt;Discourse&lt;/a&gt; open-source forum platform hosted and managed us (OpenEnergyMonitor) on our servers.&lt;/p&gt;

&lt;p&gt;You will need to create an account on the new forum. You should receive an email soon inviting you to the new forum, if you join via the link in the email you will receive elevated privileges on the new forum since you have already proved yourself as a trusted user.&lt;/p&gt;

&lt;p&gt;Thanks a lot to the team of community volunteers who have prepare the new forum over the past few weeks.&lt;/p&gt;

&lt;h2 id=&quot;new-user-guide&quot;&gt;2. New User Guide&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/Selection_036.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;httpsguideopenenergymonitororghttpsguideopenenergymonitororg&quot;&gt;&lt;a href=&quot;https://guide.openenergymonitor.org&quot;&gt;https://guide.openenergymonitor.org&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://openenergymonitor.org/emon/&quot;&gt;OpenEnergyMonitor.org&lt;/a&gt; contains has a wealth of information (specifically the &lt;a href=&quot;http://openenergymonitor.org/emon/buildingblocks&quot;&gt;Building Blocks&lt;/a&gt; resources section), however a common issue raised by new users is they feel lost swimming in a sea of information. The user guide has been created to provide just the right amount of information to setup and configure and OpenEnergyMonitor system. The guide is focused on the emonPi but will also cover emonBase (Raspberry Pi + RFM69Pi), emonTx and emonTH.&lt;/p&gt;

&lt;p&gt;The launch of the Guide site coincides with the launch of the new emonSD Raspberry Pi emonPi / emonBase pre built image which includes the latest version of Emoncms as well as MQTT, nodeRED, openHAB and Raspberry Pi 3 support all setup and pre-configured. &lt;a href=&quot;https://community.openenergymonitor.org/t/emonsd-03may16-release/145&quot;&gt;See forum post&lt;/a&gt;. This new emonSD image will be installed as standard with all emonPi/emonBase’s shipped from our store in the next few weeks. &lt;em&gt;We soon be selling the Raspberry Pi 3 as standard with emonPi / emonBase, another blog post on this coming soon..&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The User Guide site will attempt to create a distinction between ‘user’ documentation and ‘developer’ documentation and discussions. The Guide site has been designed to look and work great on mobile devices. We think this is important since stats indicated that users often follow the setup guide on a mobile or tablet while at the install site (think head stuck inside a meter cabinet!). Going forward we would like to standardise on the following locations for documentation:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;User Guide Site - User documentation&lt;/li&gt;
  &lt;li&gt;Forums - User support / Developer discussion separated with categories.&lt;/li&gt;
  &lt;li&gt;GitHub - Technical documentation&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The Hardware Wiki will still exist, however expect hardware documentation to move to &lt;a href=&quot;https://github.com/openenergymonitor/hardware&quot;&gt;GitHub Hardware Repo&lt;/a&gt; over time.&lt;/p&gt;

&lt;h2 id=&quot;new-blog&quot;&gt;3. New Blog&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/Selection_039.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;httpsblogopenenergymonitororghttpsblogopenenergymonitororg&quot;&gt;&lt;a href=&quot;https://blog.openenergymonitor.org&quot;&gt;https://blog.openenergymonitor.org&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;We have wanted to move away from our &lt;a href=&quot;http://openenergymonitor.blogspot.co.uk/&quot;&gt;old Google blogger&lt;/a&gt; for a while. During the learning process building the Guide website I realised that using GitHub and Jekyll would also be a good solution for the blog. Thanks to Google export and a nice &lt;a href=&quot;https://import.jekyllrb.com/docs/blogger/&quot;&gt;Jekyll import script&lt;/a&gt; we managed to migrate over the blog without too much difficulty. Please update your RSS subscription to the &lt;a href=&quot;http://blog.openenergymonitor.org/feed.xml&quot;&gt;new Atom feed.xml&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;technical-info&quot;&gt;Technical info&lt;/h3&gt;

&lt;p&gt;The new Guide and Blog are built using &lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; static site generator with Octopress &lt;a href=&quot;https://github.com/coogie/oscailte&quot;&gt;Oscailte theme&lt;/a&gt; to convert markdown files to html. The sites are &lt;a href=&quot;https://github.com/openenergymonitor/guide&quot;&gt;fully open-source on GitHub &lt;/a&gt; and are hosted by GitHub pages. &lt;a href=&quot;https://travis-ci.org/openenergymonitor/guide/&quot;&gt;Travis CI&lt;/a&gt; has been configured to re-build the static html pages each time a change commit is made. Hosting the site on github will make it easy for anyone to propose a change/fix. The site is served and secured via Cloud Flare using CF’s &lt;a href=&quot;https://blog.cloudflare.com/cloudflare-ca-encryption-origin/&quot;&gt;Universal SSL/TLS to origin&lt;/a&gt;.&lt;/p&gt;</content><author><name>Glyn Hudson</name></author><summary>We have been busy for the past couple of months building some new websites to improve OpenEnergyMonitor.

Introducing a shiny new:


  Community Forum
  User Guide website
  Blog


Later this week on Thursday 5th May 2016 the old forums will be frozen and we will be moving to the new community forums</summary></entry><entry><title>Part 3: Aggregated supply and demand across multiple households</title><link href="https://blog.openenergymonitor.org/2016/05/Part3-Aggregated-supply-and-demand/" rel="alternate" type="text/html" title="Part 3: Aggregated supply and demand across multiple households" /><published>2016-05-02T15:00:00+00:00</published><updated>2016-05-02T15:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/05/Part3-Aggregated-supply-and-demand</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/05/Part3-Aggregated-supply-and-demand/">&lt;p&gt;One of the main problems with looking at demand at the single household level is that demand at this level is very spiky, there are often long periods of low use around 100W and then suddenly a kettle or electric car charger turns on and demand increases by 20-30x in an instant. Solar generation can be very spiky too and so there is room for matching but it can be difficult to get the timing right.&lt;/p&gt;

&lt;p&gt;One solution to increasing supply &amp;amp; demand matching at the household level is to have in home battery storage and diversion to hot water stores – but it may not be the best solution for all cases.&lt;/p&gt;

&lt;p&gt;Aggregating supply and demand across households provides an example of how the degree of matching can be increased significantly by what could be described as sequential demand. Not everyone boils a kettle at the same time or a cloud passing over one households solar pv system may not be passing over another’s.&lt;/p&gt;

&lt;p&gt;In order to explore the extent of increased matching possible through aggregation of supply and demand I have been working with Dominic McCann from Carbon Coop on what could be called a &lt;a href=&quot;https://openenergymonitor.org/dev/smartgrid&quot;&gt;&lt;strong&gt;‘virtual microgrid’ concept&lt;/strong&gt;&lt;/a&gt;, we have a provisional front page for this here - please note that its still in early development:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/smart-grid.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;With only four households aggregating on-site solar, off-site wind, hydro and consumption and with total supply matching total demand over the whole period achieved by scaling the wind component, we can see matching increasing from 46% in the previous example to around 64% here. The resulting average carbon intensity is 132gCO2/kWh.&lt;/p&gt;

&lt;p&gt;At this carbon intensity a heatpump (@ COP 3.0) has a delivered heat carbon intensity of 44gCO2/kWh, 81% less than gas and an EV (@ 3.7 miles/kWh) has a carbon intensity of 22gCO2/km 80% less than a very efficient petrol car doing 60 real world mpg, this compares with a carbon saving of roughly 45% vs direct gas heating and a petrol car if the electricity supply was from a grid supply consisting of gas, coal and nuclear at present UK proportions. Its a bit more complicated than this as more of the co2 was emitted when the EV was charging than at other times, the overall carbon intensity is just an average, Il come back to a more in-depth analysis of this again.&lt;/p&gt;

&lt;p&gt;The result goes some way to illustrating why a mixture of renewable generation sources and aggregated demand ultimately increases the usefulness of the renewable supply and reflects the kind of results we see from running hourly zero carbon energy system models such as the one developed by the Center for Alternative Technology. These indicate that matching levels of between 62% and 78% are possible before storage and significant demand shifting with normal electric demand, heatpump heating demand and EV charging demand. See &lt;a href=&quot;(https://openenergymonitor.org/energymodel/)&quot;&gt;modelled supply/demand matching&lt;/a&gt; based on ZeroCarbonBritain data:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://openenergymonitor.org/dev/smartgrid&quot;&gt;Smart grid test intro page&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Visible currently on the community smart grid test front page is the participating households renewable supply mix, real-time information on grid CO2 intensity and grid wind, solar and hydro. Household demand is not currently shown as there are not enough participants for the demand profile to be sufficiently anonymous.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/supply.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;At the top of the page is a UK grid status indicator that is based on Dominic McCann’s work explained in more detail in &lt;a href=&quot;http://carbon.coop/blog/zapaman/community-smart-grid-prosumer-perspective-part-2&quot;&gt;Dominic’s blog post&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/smartgrid2.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;</content><author><name>Trystan Lea</name></author><summary>One of the main problems with looking at demand at the single household level is that demand at this level is very spiky, there are often long periods of low use around 100W and then suddenly a kettle or electric car charger turns on and demand increases by 20-30x in an instant. Solar generation can be very spiky too and so there is room for matching but it can be difficult to get the timing right.

One solution to increasing supply &amp;amp; demand matching at the household level is to have in home battery storage and diversion to hot water stores – but it may not be the best solution for all cases.

Aggregating supply and demand across households provides an example of how the degree of matching can be increased significantly by what could be described as sequential demand. Not everyone boils a kettle at the same time or a cloud passing over one households solar pv system may not be passing over another’s.

In order to explore the extent of increased matching possible through aggregation of supply and demand I have been working with Dominic McCann from Carbon Coop on what could be called a ‘virtual microgrid’ concept, we have a provisional front page for this here - please note that its still in early development:</summary></entry><entry><title>Part 2: Exploring carbon intensity and renewable energy matching</title><link href="https://blog.openenergymonitor.org/2016/04/Part2-Exploring-carbon-intensity/" rel="alternate" type="text/html" title="Part 2: Exploring carbon intensity and renewable energy matching" /><published>2016-04-28T15:00:00+00:00</published><updated>2016-04-28T15:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/04/Part2-Exploring-carbon-intensity</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/04/Part2-Exploring-carbon-intensity/">&lt;p&gt;&lt;img src=&quot;/images/winderful.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This post describes an approach we have been exploring that uses the MyEnergy emoncms app and work on virtual &lt;a href=&quot;https://github.com/TrystanLea/VirtualSmartGrid&quot;&gt;smart grids&lt;/a&gt; with Dominic McCann from Carbon Coop. There’s a good blog and video on what we’ve been working on over on the &lt;a href=&quot;http://carbon.coop/blog/jonathan/smart-grid-aggregation-dashboard-prototype&quot;&gt;Carbon Coop blog&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;/2016/04/Understand-CO2-intensity-grid-electricity/&quot;&gt;last post&lt;/a&gt; described two approaches to grid carbon intensity that consider the UK grid as a whole. This approach explores what the overall household carbon intensity might be when on-site renewable energy is considered such as home solar but also when renewable energy is bought over the grid, this could be from a green electricity tariff.&lt;/p&gt;

&lt;p&gt;If imported electricity is supplied from a 100% renewable energy supplier in the UK: a large portion of the supply will likely be wind energy (54% of good energy’s ‘fuel’ mix comes from wind) and the UK has the best wind resource in Europe. Incorporating grid wind data and exploring matching with wind and solar, means we can really start to test scenarios such as ZeroCarbonBritain in the present.&lt;/p&gt;

&lt;p&gt;There is real-time data available on UK wind supply and its possible to scale the total UK wind output in order to estimate a household ‘share of UK wind’ in real-time.&lt;/p&gt;

&lt;!--more--&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Calculating a households share of real-time wind output

Between March 2015 and March 2016 the output of UK wind power was on average 2630MW.

If a household buys 54% of 3300 kWh (typical annual household electricity consumption) or about 1800 kWh this converts to an average power of 205 Watts.

The scaling factor to convert total wind power output in MW to a household share is therefore:

scaling factor = 205 W / 2630 MW

The wind power available at any given moment would then be

wind power available = ( 205W / 2630MW ) x uk wind power output (MW)

If total UK wind power is 4000MW the estimated amount available in this example for the household is = (205W/2630MW) x 4000MW = 312 Watts.

Over the year the average available wind power for the household will work out to being 205W but for any given moment it could be more or less than this depending on how much power is being generated at that moment.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;With data on household demand, onsite solar and a share of UK wind, we then work out how much backup supply is needed and from this an estimate of household CO2 intensity.&lt;/p&gt;

&lt;p&gt;The backup CO2 intensity could be a single source such as CCGT gas power or a grid CO2 intensity with the wind power component removed in order to avoid double counting. Using an intensity based on grid: coal, gas, nuclear and interconnectors with the wind component removed may help incentivise use outside of peak periods but as discussed in the last post an extended analysis would be needed to establish what’s best from a carbon perspective.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/week6.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Above: Emoncms MyEnergy App showing onsite solar (yellow), share of uk wind estimate (green) and household demand (blue). Available on emoncms.org or self-hosted installations.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The average CO2 intensities that result from this approach depend on the degree of matching between household demand and the renewable supply. From our experience so far matching can be anywhere between 40% and 70% depending on the nature of the household demand and how much demand shifting effort is undertaken. The resulting average carbon intensity is directly proportional to the level of matching: 40% matching means we need backup supply to cover 60% of the demand reducing the carbon intensity by 40% compared to grid average or perhaps CCGT gas CO2 intensity.&lt;/p&gt;

&lt;p&gt;While far from perfect as no account is taken of what is actually happening on the local network, this approach could be seen as a good middle ground between on the one hand saying that all grid electricity has to be counted at grid average carbon intensity and on the other that all electricity from a green tariff is zero carbon at all times. It provides an incentive for demand shifting to times of high renewable output, while reflecting a substantial carbon reduction benefit that should be available from buying renewable energy across the grid.&lt;/p&gt;

&lt;h3 id=&quot;excessexported-renewable-energy&quot;&gt;Excess/exported renewable energy&lt;/h3&gt;
&lt;p&gt;There is an interesting question as to what happens to excess renewable energy not used by the household in this approach. If the energy is exported to the grid and used by others effectively displacing otherwise needed fossil fuel generation then this carbon saving could offset the carbon emissions emitted by the household when backup electricity was used. The result could mean that regardless of the degree of matching achieved between renewable supply and demand, whether on-site solar or wider grid renewable, the household could achieve net zero carbon by generating and equal amount of renewable supply as demand over a longer time period such as a year. This is a commonly used argument for net zero buildings. On the one hand it makes sense but on the other it relies on there being a wider fossil fuel powered grid in order to displace the fossil fuel generation and it substantially removes the incentive for renewable supply/demand matching.&lt;/p&gt;

&lt;h3 id=&quot;displaced-carbon&quot;&gt;Displaced carbon&lt;/h3&gt;
&lt;p&gt;Perhaps a better way to look at the displaced carbon issue is who is it that actually gets to claim the zero carbon benefit of that electricity. It would make sense that exported electricity is sold and then bought by the other party, once you’re buying renewable energy you would expect to be able to claim the zero carbon benefit of that energy as the user. Counting the exported electricity if bought by another user as displaced carbon would result in double counting in this case.&lt;/p&gt;

&lt;p&gt;This is somewhat complicated by fact that exported solar pv electricity is not metered for small domestic installations in the UK. Instead the amount exported is assumed to be 50% of total generation. The exported electricity is paid for at around 4.91p/kWh but not measured. It’s not clear who gets to claim the carbon saved.&lt;/p&gt;

&lt;h3 id=&quot;next-aggregation&quot;&gt;Next: Aggregation&lt;/h3&gt;
&lt;p&gt;The degree of matching can be increased by aggregating supply and demand across several households. Not everyone boils a kettle at the same time or a cloud passing over one households solar pv system may not be passing over another’s. We have been testing with a limited number of households so far, the effect of aggregation on the degree of supply/demand matching which I will come on to in the next post.&lt;/p&gt;</content><author><name>Trystan Lea</name></author><summary>This post describes an approach we have been exploring that uses the MyEnergy emoncms app and work on virtual smart grids with Dominic McCann from Carbon Coop. There’s a good blog and video on what we’ve been working on over on the Carbon Coop blog.

The last post described two approaches to grid carbon intensity that consider the UK grid as a whole. This approach explores what the overall household carbon intensity might be when on-site renewable energy is considered such as home solar but also when renewable energy is bought over the grid, this could be from a green electricity tariff.

If imported electricity is supplied from a 100% renewable energy supplier in the UK: a large portion of the supply will likely be wind energy (54% of good energy’s ‘fuel’ mix comes from wind) and the UK has the best wind resource in Europe. Incorporating grid wind data and exploring matching with wind and solar, means we can really start to test scenarios such as ZeroCarbonBritain in the present.

There is real-time data available on UK wind supply and its possible to scale the total UK wind output in order to estimate a household ‘share of UK wind’ in real-time.</summary></entry><entry><title>Part 1: Attempting to measure and understand the CO2 intensity of grid electricity</title><link href="https://blog.openenergymonitor.org/2016/04/Understand-CO2-intensity-grid-electricity/" rel="alternate" type="text/html" title="Part 1: Attempting to measure and understand the CO2 intensity of grid electricity" /><published>2016-04-27T15:00:00+00:00</published><updated>2016-04-27T15:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/04/Understand-CO2-intensity-grid-electricity</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/04/Understand-CO2-intensity-grid-electricity/">&lt;p&gt;Zero carbon energy scenarios such as &lt;a href=&quot;http://zerocarbonbritain.org/&quot;&gt;ZeroCarbonBritain&lt;/a&gt; feature significant electrification of energy demands previously provided by fossil fuels such as heating and transport. With electrification it becomes possible to supply these energy demands with renewably generated electricity from primarily wind, solar and backed up by storage technologies from short term stores such as batteries to long term stores such as power to gas.&lt;/p&gt;

&lt;p&gt;We do not of course yet have a zero carbon grid. However there has been significant growth of renewable energy and a decline in coal generation in recent years.&lt;/p&gt;

&lt;p&gt;The CO2 emissions of demand side solutions such as heat pumps and electric vehicles are significantly affected by the co2 intensity of the supply but in many cases installing and using these technologies make sense at the UK’s present supply mix and can make more or less sense depending on how you calculate co2 intensity and where you assume the additional electricity required comes from.&lt;/p&gt;

&lt;!--more--&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;As an example the CO2 intensity of combined cycle gas turbines (CCGT) which provide the majority of electricity generated from gas in the UK have a co2 intensity of 360gCO2/kWh.

At this intensity a well installed heat pump that achieves an average COP of 3.0 delivers heat at a CO2 intensity of 129gCO2/kWh heat including 7% grid losses. This provides a significant 44% co2 emissions reduction compared to having an efficient gas boiler which delivers heat at a CO2 intensity of 230gCO2/kWh.

An electric car achieving a real world mountainous north Wales terrain driving efficiency of 3.7 miles per kWh (5.9km/kWh) including charging losses powered by gas electricity has a co2 intensity of 61gCO2/kWh which again provides a significant 44% co2 emissions reduction compared to real world efficient small petrol car co2 emissions of110 gCO2/km based on: 10.6 kgCO2 per gallon [1] and 60mpg (typical of the most efficient small car real world mpg [2].
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://www.carbonindependent.org/sources_car.html&quot;&gt;[1]&lt;/a&gt;
&lt;a href=&quot;http://www.whatcar.com/car-news/real-world-mpg-efficient-small-cars/1214063&quot;&gt;[2]&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The average CO2 intensity for the UK grid as a whole in 2015 was &lt;a href=&quot;http://www.earth.org.uk/note-on-UK-grid-CO2-intensity-variations.html&quot;&gt;367gCO2/kWh&lt;/a&gt; http://www.earth.org.uk/note-on-UK-grid-CO2-intensity-variations.html#fullyear2015 - providing similar CO2 emission reduction potential to the gas only calculations above.&lt;/p&gt;

&lt;p&gt;It is interesting to note that this average, results from coal generation with a CO2 intensity of 910gCO2/kWh being offset somewhat by generation from renewable energy and nuclear at 0gCO2/kWh resulting in a CO2 intensity that is close to what it would be if gas CCGT was our only supply source – which really highlights how carbon intensive coal is.&lt;/p&gt;

&lt;p&gt;When we move energy demands from one form to another such as replacing a gas boiler with a heat pump the carbon reduction benefits depend heavily on what kind of generation provides for that additional demand. If the additional demand is provided for by CCGT gas turbines the switch makes sense, if it is provided by coal generation at 910gCO2/kWh it does not make so much sense. If it is provided by mix of renewable energy and CCGT is will make even more sense.&lt;/p&gt;

&lt;p&gt;There are several different approaches to calculating the co2 intensity of delivered electricity each with their benefits and drawbacks which I will try and explore below and in further posts.&lt;/p&gt;

&lt;p&gt;Whole grid averageHere we consider the grid as one big system with the CO2 intensity calculated as the total CO2 emitted by all forms of generation divided by the total demand over an extended period of time – one or more years. The co2 intensity of the UK electricity grid for 2015 was 367gCO2/kWh.&lt;/p&gt;

&lt;p&gt;Near real-time co2 intensity using grid wide data&lt;/p&gt;

&lt;p&gt;Here the CO2 intensity is calculated by the total CO2 emitted divided by total demand on typically a 10 minute basis. The CO2 intensity calculated this way will often show higher CO2 intensity in the day where gas and coal are a larger percentage of overall supply than at night time. CO2 intensity is also higher when its colder where demand is pushed up by higher heating requirements.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/ukgrid.png&quot; alt=&quot;UK Grid Carbon&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://openenergymonitor.org/ukgrid&quot;&gt;OpenEnergyMonitor UK Grid page&lt;/a&gt; showing real-time CO2 Intensity.&lt;/p&gt;

&lt;p&gt;If we use this real-time CO2 intensity in order to choose when to use electricity it gets more complicated, we may decide to shift electric vehicle charging or heat pump hot water heating to the night time in order to make use of grid carbon intensities that can often be 50-100gCO2/kWh less than day-time rates, but is this really a valid approach? The lower CO2 intensities at night are as a result of demand being lower and nuclear + renewables making up a larger share of generation, if night time demand is increased through demand shifting, turning on more gas and coal power plants, the carbon intensity would increase as well.&lt;/p&gt;

&lt;p&gt;Given that most of the dis-patchable generation is gas and coal and assuming low levels of wind curtailment at night then it could be argued that the effective carbon intensity of moving demand to the night time should be calculated at the carbon intensity of this dis-patchable generation which depends on the proportion of gas to coal, a more in depth understanding as to how the proportion of gas and coal generation is decided would be needed to assess the carbon value of demand shifting. If the proportions are constant, shifting would make no difference, if gas is ramped up to meet the additional demand there may well be a benefit to shifting on the other hand if the difference is made up with more coal generation there would not be. There’s a bit more on this here using 2011 data from &lt;a href=&quot;http://people.bath.ac.uk/en8sc/GridCarbonIntensity.pdf&quot;&gt;Sam Cooper of Bath University&lt;/a&gt; &lt;a href=&quot;http://www.earth.org.uk/note-on-UK-grid-CO2-intensity-variations.html&quot;&gt;linked from earth notes here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Shifting demand away from peak times may well make sense from a transmission and distribution grid capacity perspective but this is largely a different argument and would require a different calculation to assess. It may also be the case that some wind curtailment does take place although the precise extent of this and where on the grid using more will reduce curtailment is difficult to quantify.&lt;/p&gt;

&lt;p&gt;In the next blog I will discuss the work I’ve been doing with Dominic McCann from the Carbon Coop on estimating CO2 intensity with onsite and green tariff renewable energy considered.&lt;/p&gt;</content><author><name>Trystan Lea</name></author><summary>Zero carbon energy scenarios such as ZeroCarbonBritain feature significant electrification of energy demands previously provided by fossil fuels such as heating and transport. With electrification it becomes possible to supply these energy demands with renewably generated electricity from primarily wind, solar and backed up by storage technologies from short term stores such as batteries to long term stores such as power to gas.

We do not of course yet have a zero carbon grid. However there has been significant growth of renewable energy and a decline in coal generation in recent years.

The CO2 emissions of demand side solutions such as heat pumps and electric vehicles are significantly affected by the co2 intensity of the supply but in many cases installing and using these technologies make sense at the UK’s present supply mix and can make more or less sense depending on how you calculate co2 intensity and where you assume the additional electricity required comes from.</summary></entry><entry><title>GitHub Submodules</title><link href="https://blog.openenergymonitor.org/2016/04/Git-Sub-Modules/" rel="alternate" type="text/html" title="GitHub Submodules" /><published>2016-04-18T15:00:00+00:00</published><updated>2016-04-18T15:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/04/Git-Sub-Modules</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/04/Git-Sub-Modules/">&lt;p&gt;Library management for Arduino has always been a bit of a pain; having to go and download and install all the required libraries for various locations on the internet and hope that they are the correct version.  Library management becomes even more important when debugging and supporting a project as libraries get changed and updated.&lt;/p&gt;

&lt;p&gt;Things have improved in recent years with the increased use of GitHub for Arduino libs allowing changes to be tracked easier and the later version of Arduino IDE including a library manager which can auto-update.&lt;/p&gt;

&lt;p&gt;However I have always wanted to have all required libs and files for a particular project all in once place. I feel that I have now found the best solution (for now!).&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;github-submodules&quot;&gt;GitHub Submodules&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;With git submodules a repository can contain a checkout of another repository as a subdirectory.
The subfolder stores the submodule repository location and a commit ID. This means you can, for example, keep some common code in a separate repository and use a specific, known-working version of this code in other projects.
If the submodule gets an update, the submodule will not get updated in the repo until you specifically pull the changes into them. Also, you can make changes to the submodule from within a project and push those changes to the submodule’s repository to make them available to other projects.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt;

&lt;p&gt;Here is the firmware folder of the &lt;a href=&quot;https://github.com/openenergymonitor/emonpi/tree/master/firmware/libraries&quot;&gt;emonPi GitHub Repo&lt;/a&gt;. The visible sub folders contain the required Arduino libs at a specific point in time.&lt;/p&gt;

&lt;p&gt;Using submodules becomes very useful when testing an update to one of the libraries in a development branch, in the development branch the submodule can be fast-forwarded to the latest version leaving the master branch untouched.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/submodules.png&quot; alt=&quot;Git SubModules&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Submodules also make it easy for users to clone a project repo including all the sketch source code and the Arduino libs at exactly the correct version all from one place. Using the later version of Arduino IDE (1.6+) it’s possible to set the sketchbook location to the project repo to import all the required libs into the IDE.&lt;/p&gt;

&lt;p&gt;To obtain the submodules the repo must be Git cloned (not zip downloaded) then once the repo has been cloned a couple of extra steps are required to import the submodules. Here is an example for cloning the emonPi repo in pull in the sub modules:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ git clone https://github.com/openenergymonitor/emonpi
$ cd emonpi
$ git submodule update
$ git submodule init
$ git submodule update
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><author><name>Glyn Hudson</name></author><summary>Library management for Arduino has always been a bit of a pain; having to go and download and install all the required libraries for various locations on the internet and hope that they are the correct version.  Library management becomes even more important when debugging and supporting a project as libraries get changed and updated.

Things have improved in recent years with the increased use of GitHub for Arduino libs allowing changes to be tracked easier and the later version of Arduino IDE including a library manager which can auto-update.

However I have always wanted to have all required libs and files for a particular project all in once place. I feel that I have now found the best solution (for now!).</summary></entry><entry><title>Home Assistant and emonPi</title><link href="https://blog.openenergymonitor.org/2016/04/Home-Assistant/" rel="alternate" type="text/html" title="Home Assistant and emonPi" /><published>2016-04-01T17:00:00+00:00</published><updated>2016-04-01T17:00:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/04/Home-Assistant</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/04/Home-Assistant/">&lt;p&gt;&lt;a href=&quot;http://home-assistant.io/&quot;&gt;Home Assistant&lt;/a&gt; (HA) is a fully &lt;a href=&quot;https://github.com/balloob/home-assistant&quot;&gt;open-source&lt;/a&gt; home automation platform.&lt;/p&gt;

&lt;p&gt;In terms of functionality it’s quite similar to &lt;a href=&quot;http://openenergymonitor.blogspot.co.uk/search/label/openHAB&quot;&gt;openHAB&lt;/a&gt; however it’s architecture is very different it runs on Python 3 as opposed to java.&lt;/p&gt;

&lt;p&gt;I found home assistant very easy to setup and configure. It’s got some nice auto detect features e.g. It auto-detected by Chromecast devices. Home Assistant has got &lt;a href=&quot;https://home-assistant.io/components/&quot;&gt;pre-built component integrations&lt;/a&gt; with many home automation and monitoring devices and platforms. I was also impressed with the presence detection support, I tested using &lt;a href=&quot;https://home-assistant.io/components/device_tracker.nmap_scanner/&quot;&gt;nmap&lt;/a&gt; to scan my home router for presence of my phone connected to my home WiFi (indication that I’m home…or I forget my phone!) and &lt;a href=&quot;https://home-assistant.io/components/device_tracker.owntracks/&quot;&gt;OwnTracks&lt;/a&gt; MQTT based GPS tracking.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Interfacing with our &lt;a href=&quot;http://openenergymonitor.org/emon/modules/emonpi&quot;&gt;emonPi Raspberry Pi energy monitor&lt;/a&gt; was easy, using MQTT component to connect to emonPi’s MQTT server and subscribe to the power and sensor readings of interest.&lt;/p&gt;

&lt;p&gt;As yet I have not experimented with creating automations with HA .e.g turning off lights and heating when we’re not home. I think I will still prefer using nodeRED for these types of rule based automations. However what HA does well is present a nice clean, mobile friendly and easy to configure front-end interface:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/ha1.jpg&quot; alt=&quot;home assistant&quot; /&gt;
My HA Home Setup So Far&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/ha2.png&quot; alt=&quot;home assistant&quot; /&gt;
Home Assistant has some nice mini graphing features to give you a quick overview.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/ha3.png&quot; alt=&quot;home assistant&quot; /&gt; &lt;img src=&quot;/images/ha4.png&quot; alt=&quot;home assistant&quot; /&gt;&lt;/p&gt;

&lt;p&gt;On a switch node a quite overview will tell you how long the switch has been on or off for. Very useful for checking long long the heating has been on for&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/ha5.png&quot; alt=&quot;home assistant&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Generic emonPi Config Example&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/openenergymonitor/oem_home-assistant&quot;&gt;I have published setup guide to setting up Home Assistant on an emonPi with example config&lt;/a&gt;.&lt;/p&gt;</content><author><name>Glyn Hudson</name></author><summary>Home Assistant (HA) is a fully open-source home automation platform.

In terms of functionality it’s quite similar to openHAB however it’s architecture is very different it runs on Python 3 as opposed to java.

I found home assistant very easy to setup and configure. It’s got some nice auto detect features e.g. It auto-detected by Chromecast devices. Home Assistant has got pre-built component integrations with many home automation and monitoring devices and platforms. I was also impressed with the presence detection support, I tested using nmap to scan my home router for presence of my phone connected to my home WiFi (indication that I’m home…or I forget my phone!) and OwnTracks MQTT based GPS tracking.</summary></entry><entry><title>Raspberry Pi 3</title><link href="https://blog.openenergymonitor.org/2016/03/raspberry-pi-3/" rel="alternate" type="text/html" title="Raspberry Pi 3 " /><published>2016-03-17T00:51:00+00:00</published><updated>2016-03-17T00:51:00+00:00</updated><id>https://blog.openenergymonitor.org/2016/03/raspberry-pi-3</id><content type="html" xml:base="https://blog.openenergymonitor.org/2016/03/raspberry-pi-3/">The latest and greatest from the awesome Raspberry Pi team! An iterative upgrade but very welcome addition of on-board WiFi and a faster processor. &lt;br /&gt;&lt;br /&gt;The &lt;a href=&quot;https://openenergymonitor.org/emon/node/12212&quot;&gt;latest emonSD&lt;/a&gt;&amp;nbsp;for emonPi / emonBase&amp;nbsp;seemed to work out of the box with the RasPi3, however it became apparent that something rather&amp;nbsp;important was missing...serial communication with the emonPi&#39;s ATmega328!&lt;br /&gt;&lt;br /&gt;The emonPi communicates with the RasPi via GPIO 14/15 which on the Model B,B+ and Pi2 is mapped to UART0. However on the Pi3 these pins are mapped to UART1 since UART0 is now used for the Bluetooth module. However UART1 is software UART and baud rate is dependent to clock speed which can change with the CPU load, under voltage and temperature; therefore not stable enough. One hack is to force the CPU to a lower speed ( add core_freq=250 to /boot/cmdline.txt)which cripples the Pi3 performance.&lt;br /&gt;&lt;br /&gt;A better solution for the emonPi is to disable BT and map UART1 back to UART0 (ttyAMA0) so we can talk to the emonPi in the same way as before.&lt;br /&gt;&lt;br /&gt;

    &lt;!--more--&gt;

&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;a href=&quot;https://2.bp.blogspot.com/-tu55USCyQO8/Vun9vCI01vI/AAAAAAABp0c/NPayDX64LusM8Uw1e0aX7QQri6Gqv--HA/s1600/IMG_20160301_164646193_HDR.jpg&quot; imageanchor=&quot;1&quot; style=&quot;margin-left: 1em; margin-right: 1em;&quot;&gt;&lt;img border=&quot;0&quot; height=&quot;225&quot; src=&quot;https://2.bp.blogspot.com/-tu55USCyQO8/Vun9vCI01vI/AAAAAAABp0c/NPayDX64LusM8Uw1e0aX7QQri6Gqv--HA/s400/IMG_20160301_164646193_HDR.jpg&quot; width=&quot;400&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;

First update:&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;sudo apt-get update&lt;br /&gt;sudo apt-get upgrade&lt;br /&gt;sudo apt-get dist-upgrade&lt;br /&gt;sudo rpi-update&lt;/pre&gt;&lt;pre&gt;&lt;/pre&gt;&lt;strong&gt;To disable onboard&amp;nbsp;Pi3 Bluetooth and restore UART0/ttyAMA0 over GPIOs 14 &amp;amp; 15 modify:&lt;/strong&gt;&lt;br /&gt;&lt;pre&gt;&lt;/pre&gt;&lt;pre&gt;sudo nano /boot/config.txt&lt;/pre&gt;&lt;pre&gt;&lt;/pre&gt;Add to the end of the file&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;dtoverlay=pi3-disable-bt&lt;/pre&gt;&lt;pre&gt;&lt;/pre&gt;We also need to run to stop BT modem trying to use UART&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;sudo systemctl disable hciuart&lt;br /&gt;&lt;br /&gt;See &lt;a href=&quot;https://github.com/raspberrypi/firmware/commit/845eb064cb52af00f2ea33c0c9c54136f664a3e4&quot;&gt;RasPi device tree commit for pi3-disable-bt&lt;/a&gt; and raspi &lt;a href=&quot;https://www.raspberrypi.org/forums/viewtopic.php?f=107&amp;amp;t=138223&quot;&gt;forum thread discussion&lt;/a&gt;.&lt;/pre&gt;&lt;br /&gt;Reboot and test serial coms with:&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;sudo minicom -D /dev/ttyAMA0 -b38400&lt;/pre&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;a href=&quot;https://openenergymonitor.org/emon/node/12311&quot;&gt;
    

    
&lt;/a&gt;&lt;a href=&quot;https://openenergymonitor.org/emon/node/12311&quot;&gt;Forum post discussion&lt;/a&gt;&lt;br /&gt;&lt;div&gt;&lt;pre&gt;&lt;/pre&gt;There is an issue using the RasPi3 in the emonPi enclosure, for obvious reasons (laws of physics) the on-board Wifi does not like being enclosed in a metal box! We are working on getting some acrylic end-plates cut for testing. If this goes well we will look at offering the RasPi3 with the emonPi&amp;nbsp;+ acrylic end plates on the enclosure to allow the WiFi signal to roam free.&lt;br /&gt;&lt;br /&gt;Update: here&#39;s a photo of emonPi with prototype acrylic fascias. On-board WiFi works great :-)&lt;br /&gt;&lt;br /&gt;&lt;table align=&quot;center&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; class=&quot;tr-caption-container&quot; style=&quot;margin-left: auto; margin-right: auto; text-align: center;&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;https://1.bp.blogspot.com/-m2AKbaYuYak/VvEY50spANI/AAAAAAABqGE/NCmZeMkRSEEbGg2EqGdhCPmAxT_J8wkwg/s1600/2016-03-19.jpg&quot; imageanchor=&quot;1&quot; style=&quot;margin-left: auto; margin-right: auto;&quot;&gt;&lt;img border=&quot;0&quot; height=&quot;266&quot; src=&quot;https://1.bp.blogspot.com/-m2AKbaYuYak/VvEY50spANI/AAAAAAABqGE/NCmZeMkRSEEbGg2EqGdhCPmAxT_J8wkwg/s400/2016-03-19.jpg&quot; width=&quot;400&quot; /&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;tr-caption&quot; style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: small; text-align: start;&quot;&gt;emonPi with prototype acrylic fascias&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br /&gt;&lt;/div&gt;</content><author><name>Glyn Hudson</name></author><summary>The latest and greatest from the awesome Raspberry Pi team! An iterative upgrade but very welcome addition of on-board WiFi and a faster processor. The latest emonSD&amp;nbsp;for emonPi / emonBase&amp;nbsp;seemed to work out of the box with the RasPi3, however it became apparent that something rather&amp;nbsp;important was missing...serial communication with the emonPi&#39;s ATmega328!The emonPi communicates with the RasPi via GPIO 14/15 which on the Model B,B+ and Pi2 is mapped to UART0. However on the Pi3 these pins are mapped to UART1 since UART0 is now used for the Bluetooth module. However UART1 is software UART and baud rate is dependent to clock speed which can change with the CPU load, under voltage and temperature; therefore not stable enough. One hack is to force the CPU to a lower speed ( add core_freq=250 to /boot/cmdline.txt)which cripples the Pi3 performance.A better solution for the emonPi is to disable BT and map UART1 back to UART0 (ttyAMA0) so we can talk to the emonPi in the same way as before.</summary></entry></feed>
