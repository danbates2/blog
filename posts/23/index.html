<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blog | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="OpenEnergyMonitor Blog">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://blog.openenergymonitor.org/posts/23/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Blog | OpenEnergyMonitor">
    <meta property="og:site_name" content="Blog | OpenEnergyMonitor">
    <meta property="og:url" content="https://blog.openenergymonitor.org/posts/23/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Blog | OpenEnergyMonitor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Blog | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
    
    
    
    <link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
	<link rel="apple-touch-icon" href="/images/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/images/favicon-144.png">
	<meta name="msapplication-config" content="/images/browserconfig.xml">
	
  </head>

  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
  <a href="/" class="site-title">
    <!--<img width='40' src='/images/favicon-192x192.png'> -->
    
    <span style="color:#555;font-weight:bold;font-family:Arial;font-size:20"'>
Open</span><span style="color:#0699fa;font-weight:bold;font-family:Arial;font-size:20"'>EnergyMonitor</span>

  </a>
</div>

<div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  <li><a href="https://openenergymonitor.org">Main Site</a></li>
  <li><a href="https://guide.openenergymonitor.org">User Guide</a></li>
  <li><a href="https://emoncms.org">Emoncms</a></li>
  <li><a href="https://community.openenergymonitor.org">Community</a></li>
  <li><a href="https://shop.openenergymonitor.com    ">Shop<i class="icon icon-shopping-cart"></i></a></li>
</ul>
  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

            
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/07/almost-at-next-emoncms-release-point/">Almost at the next emoncms release point</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-07-26T15:18:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-07-26 15:18:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> two minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/07/almost-at-next-emoncms-release-point/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div>Over the last couple of months I have been working closely with Ildefonso Martínez Marchena from Spain on developing <a href="http://openenergymonitor.org/emon/emoncms">emoncms</a> to the next level and we have been making really good progress.<br /><br />We are almost at the next release point with a lot of big additions including:<br /><br /><span class="Apple-style-span" style="font-size: large;">Dashboards</span><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-jFaSG00Y6vU/UBFbLr7sRrI/AAAAAAAACdk/Rf-cr9OY-MA/s1600/dashscreen.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="332" src="http://3.bp.blogspot.com/-jFaSG00Y6vU/UBFbLr7sRrI/AAAAAAAACdk/Rf-cr9OY-MA/s640/dashscreen.png" width="640" /></a></div><div><ul><li>Support for multiple dashboards</li><li><a href="http://openenergymonitor.org/emon/emoncms/using-emoncms#creating_a_dashboard">A fully visual dashboard editor</a></li><li>Public dashboards via username i.e <a href="http://emoncms.org/trystan">emoncms.org/trystan</a></li><li>Support for ckeditor and simeo file manager</li><li>8 different dial types and a hot water cylinder</li><li>LED’s widgets thanks to Lloyd</li><li>Published and unpublished dashboards for dashboards that are being worked on.</li><li>A reworked dashboard renderer implementation</li></ul><span class="Apple-style-span" style="font-size: large;">Visualisations</span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-c4OirQaVHpM/UBFbi0zgSRI/AAAAAAAACds/j2iHnAF2Fjg/s1600/threshold_order.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="294" src="http://3.bp.blogspot.com/-c4OirQaVHpM/UBFbi0zgSRI/AAAAAAAACds/j2iHnAF2Fjg/s640/threshold_order.png" width="640" /></a></div><div><ul><li>A simple <a href="http://openenergymonitor.org/emon/emoncms/using-emoncms#vis_dp_edit">data-point editor.</a></li><li>Many histogram based visualisations based on <a href="http://openenergymonitor.blogspot.co.uk/2012/05/view-your-power-data-as-histogram-in.html">Paul Allen's histogram input process</a>.</li><li>kWh Comparison Visualisation thanks to <a href="https://twitter.com/galouf/status/217938127430492160">Baptise Gaultier</a></li><li>A new API screen, detailing all the available visualisations and other key features available.</li><li><a href="http://openenergymonitor.org/emon/emoncms/using-emoncms#vis_multigrapg">Editable multigraph.</a></li></ul><span class="Apple-style-span" style="font-size: large;">Data and core</span><br /><ul><li>CSV data input and identification by sensor node inputs.</li><li>Feed Autoconfig</li><li>New averaging process for creating daily temperature averages.</li><li>Setup script improvements</li><li>Thanks to Juan Sidrach for help with general code formatting and multilingual implementation.&nbsp;</li><li><a href="http://twitter.github.com/bootstrap/">Twitter bootstrap</a> based theme.</li></ul><span class="Apple-style-span" style="font-size: large;">Multilingual</span><br /><ul><li><a href="http://openenergymonitor.org/emon/emoncms/using-gettext-on-ubuntu">Multilingual implementation based on gettext</a></li><li>Thanks to Alco for the Dutch translation.</li></ul>All this is available now on github and has been of course throughout development. At this stage we are just polishing the release and updating and writing documentation.<br /><br /><span class="Apple-style-span" style="font-size: large;"><a href="http://emoncms.org/">emoncms.org</a></span><br />We've got the domain and have the latest version running there off the same server and database as vis.openenergymonitor.org so you can still access your<a href="http://vis.openenergymonitor.org/"> vis.openenergymonitor.org</a> data through <a href="http://emoncms.org/">emoncms.org</a>.<br /><br />The idea here is to create a really nice launch page for emoncms and have the live instance hosted there which can be used as a main logging site or for testing before running it on your own server or both. Emoncms.org will still be a beta service for now as its stability and reliability is established.<br /><br /><span class="Apple-style-span" style="font-size: large;">Bug testing</span><br />It would be great if you can try out the new version and let us know of any bugs you find so that we can try to get it as rock solid as possible before this release is complete.<br /><br />Due to a couple of core implementation changes to visualisations and dashboards many of the visualisation URL’s and dashboard scripting have changed so it best to build any old dashboards from scratch using the new visual editor.</div><div><br /></div><div>Have a look at the using emoncms documentation here if you need help with any of the steps:<br /><a href="http://openenergymonitor.org/emon/emoncms/using-emoncms">openenergymonitor.org/emon/emoncms/using-emoncms</a></div><div><br /></div><div>Please submit any bug details either to the issue tracker on github here:</div><div><a href="https://github.com/openenergymonitor/emoncms3/issues">https://github.com/openenergymonitor/emoncms3/issues</a></div><div>or on the forums here:</div><div><a href="http://openenergymonitor.org/emon/forum/5">http://openenergymonitor.org/emon/forum/5</a><br /></div><div>There is also a beginning on code documentation <a href="http://openenergymonitor.org/emon/node/312">here</a>&nbsp;that may come in useful.</div><div><br /></div><div><span class="Apple-style-span" style="font-size: large;">Github</span></div><div><span class="Apple-style-span" style="font-size: large;"><a href="http://github.com/openenergymonitor/emoncms3">github.com/openenergymonitor/emoncms3</a></span></div><div><br /></div><div><span class="Apple-style-span" style="font-size: large;">Installation guides</span></div><div>To install emoncms on your own server have a look at these guides:</div><div><a href="http://openenergymonitor.org/emon/emoncms/installation">General Installation details</a>,&nbsp;<a href="http://openenergymonitor.org/emon/emoncms/installing-ubuntu-debian-pi">PI, Debian, Ubuntu installation</a></div><div><br /></div><div>Let us know how you get on with it.</div></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/07/open-source-sailing-technology-to-clean/">Open source sailing technology to clean up oil spills</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-07-26T10:30:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-07-26 10:30:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/open-source/'>open source</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/07/open-source-sailing-technology-to-clean/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <object height="374" width="526"><param name="movie" value="http://video.ted.com/assets/player/swf/EmbedPlayer.swf"></param><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always"/><param name="wmode" value="transparent"></param><param name="bgColor" value="#ffffff"></param><param name="flashvars" value="vu=http://video.ted.com/talk/stream/2012S/Blank/CesarHarada_2012S-320k.mp4&su=http://images.ted.com/images/ted/tedindex/embed-posters/CesarHarada_2012S-embed.jpg&vw=512&vh=288&ap=0&ti=1499&lang=en&introDuration=15330&adDuration=4000&postAdDuration=830&adKeys=talk=cesar_harada_a_novel_idea_for_cleaning_up_oil_spills;year=2012;theme=a_greener_future;theme=ocean_stories;theme=inspired_by_nature;theme=talks_from_ted_fellows;event=TEDxSummit;tag=global+issues;tag=oceans;tag=open-source;&preAdTag=tconf.ted/embed;tile=1;sz=512x288;" /><embed src="http://video.ted.com/assets/player/swf/EmbedPlayer.swf" pluginspace="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" wmode="transparent" bgColor="#ffffff" width="526" height="374" allowFullScreen="true" allowScriptAccess="always" flashvars="vu=http://video.ted.com/talk/stream/2012S/Blank/CesarHarada_2012S-320k.mp4&su=http://images.ted.com/images/ted/tedindex/embed-posters/CesarHarada_2012S-embed.jpg&vw=512&vh=288&ap=0&ti=1499&lang=en&introDuration=15330&adDuration=4000&postAdDuration=830&adKeys=talk=cesar_harada_a_novel_idea_for_cleaning_up_oil_spills;year=2012;theme=a_greener_future;theme=ocean_stories;theme=inspired_by_nature;theme=talks_from_ted_fellows;event=TEDxSummit;tag=global+issues;tag=oceans;tag=open-source;&preAdTag=tconf.ted/embed;tile=1;sz=512x288;"></embed></object><br /><br />What a great explanation of the importance of open hardware for developing environmental technology and the right conception of business where purpose comes first and profit is there to make the purpose happen rather than technology as a means to make profit,&nbsp;excellent!
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/07/emonglcd-v14/">emonGLCD V1.4</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-07-17T10:05:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-07-17 10:05:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> two minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emonglcd/'>emonGLCD</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/07/emonglcd-v14/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;">Introducing the current version of the emonGLCD. This post is a bit later than planned, we have actually been selling the V1.4 through the shop for the past month or so. This version features some minor incremental&nbsp;improvements rather than a new design.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The main changes to this revision are:</div><ul style="background-color: white; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; line-height: 17px; text-align: left;"><li>This LCD power is connected to the 3.3V rail instead of instead of 5V. This will fix the problem with the LCD going blank due to over voltage, <a href="http://openenergymonitor.org/emon/node/679">discussion thread here</a>. *</li></ul><ul style="background-color: white; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; line-height: 17px; text-align: left;"><li>The external power connection now routed through voltage regulator this means it can accept an input from 5-12V</li></ul><ul style="background-color: white; text-align: left;"><li><span style="font-family: Verdana, Arial, Helvetica, sans-serif;"><span style="font-size: 12px; line-height: 17px;">The push switches are now active high, each with their own 10K pull down resistor, R7 and R8 are two additional 10K pull down resistors.&nbsp;</span></span></li></ul>The <a href="http://github.com/openenergymonitor/emonGLCD">emonGLCD sketch examples on GitHub</a> have been modified to work on the V1.4 as default.  <span style="background-color: white; text-align: left;">If you have V1.3 then you will need to uncomment the line that enables the internal pull up&nbsp;resistors&nbsp;(line 116 in emonGLCD_HEM) You will also need to comment line 199 and uncomment line 200 to change the action to active high rather than active low.</span><br /><div><div style="text-align: left;"><br /></div><div style="text-align: left;">All other functions work exactly the same as previous emonGLCD versions.&nbsp;</div><div style="text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">See the bottom of the<a href="http://openenergymonitor.org/emon/emonglcd"> main emonGLCD documentation</a> page for a full change-log detailing the different versions over time.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">*Running the LCD at 3.3V instead of 5V is now within spec for the LCD unit, however running the LCD at a lower voltage did flag up an error in the orientation of C13 and C14 see&nbsp;<a href="http://openenergymonitor.org/emon/node/754">forum&nbsp;discussion&nbsp;thread here</a>. A note has been added to the build guide to instruct the&nbsp;insertion&nbsp;of C13 and C14 the&nbsp;opposite&nbsp;way round to what is marked on the PCB.&nbsp;</div><div class="separator" style="clear: both; text-align: center;"><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-x_-BqWjyBJ4/T5AwrR5UExI/AAAAAAAAaFY/CPDezo-eew4/s1600/emonGLCD_V1.4.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="306" src="http://2.bp.blogspot.com/-x_-BqWjyBJ4/T5AwrR5UExI/AAAAAAAAaFY/CPDezo-eew4/s400/emonGLCD_V1.4.jpg" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonGLCD V1.4 - Assembled (RFM12B missing)</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-S0WecuCSHUA/T5AwuRA-rUI/AAAAAAAAaFg/CXWY1n9ZrYY/s1600/emonGLCD_V1.4_front.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="316" src="http://1.bp.blogspot.com/-S0WecuCSHUA/T5AwuRA-rUI/AAAAAAAAaFg/CXWY1n9ZrYY/s400/emonGLCD_V1.4_front.jpg" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonGLCD V1.4 PCB - Front</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-beKXiEr-zCY/T5Az5AZvkNI/AAAAAAAAaFw/kwKQeoeTDoM/s1600/emonGLCD_V1.4_rear.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="313" src="http://2.bp.blogspot.com/-beKXiEr-zCY/T5Az5AZvkNI/AAAAAAAAaFw/kwKQeoeTDoM/s400/emonGLCD_V1.4_rear.jpg" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonGLCD V1.4 - Rear</td></tr></tbody></table>The emonGLCD SolderPad page has been updated with the V1.4 Schematic and Board files:&nbsp;<a href="http://solderpad.com/openenergymon/emonglcd/">http://solderpad.com/openenergymon/emonglcd/</a></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/07/triac-based-mk2-pv-controller-by/">Triac based MK2 PV Controller by Calypso Rye</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-07-16T13:42:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-07-16 13:42:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/electronics/'>electronics</a></li>
      
        <li><a class='category' href='/categories/solarpv/'>solarPV</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/07/triac-based-mk2-pv-controller-by/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Y8lRjQvqoZg/UAQXPSAleMI/AAAAAAAACdU/9CxAGNIB73Y/s1600/IMGP9704.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="http://3.bp.blogspot.com/-Y8lRjQvqoZg/UAQXPSAleMI/AAAAAAAACdU/9CxAGNIB73Y/s400/IMGP9704.JPG" width="400" /></a></div><br /><br /><a href="http://openenergymonitor.org/emon/user/956">Calypso Rye</a> writes:<br /><br /><div style="background-color: #dddddd; font-size: 90%; padding: 10px;">Based on the standard VI sketch which uses calcVI() in EmonLib, I’ve had a system in place for the last couple of months which diverts surplus PV power to our immersion heater.  This system has proved to be both effective and reliable, and I am most grateful for everyone who has helped me along the way.  The main downside to this arrangement is that it requires an expensive item of third-party kit to distribute the power.  (I know that others have found cheaper ways, but my Carlo Gavazzi unit cost me £70).<br /><br />Other contributors to this forum have shown that a standard triac can be easily controlled by an Arduino.  By using a zero-crossing detector such as the Motorola MOC3041, it should be possible for the Arduino to allocate mains cycles directly to the load rather than delegating this task to a separate device.<br /><br />A Mk2 system of this type has been working in our garage for the last few days.  The sketch and a schematic diagram are attached, its main features being:<br /><br />- a comprehensive 'debug' mode which allows real world conditions to be simulated ;<br /><div><br />- a continuous mode of operation, for both measurement and distribution of power;</div><div><br />- an "energy bucket" concept which gives precise control of surplus power;<br /><br />- interleaved windows for measurement and generation, each only 20mS;<br /><br />- a rapid response time to changing conditions (50mS);<br /><br />- suitable timing for 'arming' a zero-crossing trigger device;<br /><br />- a single LPF which determines the dc-offset of raw VI samples;<br /><br />- a programmable safety margin for biassing import v. export;<br /><br />- minimal calibration is required.</div></div><br />Read the full post on the forum here: <a href="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/06/it-works-single-ac-power-supply-voltage/">Single AC power supply + voltage sensing</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-06-18T03:21:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-06-18 03:21:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Bouha</span> <br>
    <span><i class='icon-time'></i> two minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/electronics/'>electronics</a></li>
      
        <li><a class='category' href='/categories/emontx/'>emonTx</a></li>
      
        <li><a class='category' href='/categories/voltage-sensing/'>voltage sensing</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/06/it-works-single-ac-power-supply-voltage/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div dir="ltr" style="text-align: left;" trbidi="on">The idea of using the same AC-AC power adaptor for both sensing voltage and supplying power to emonTx has been discussed on the forums for months (see <a href="http://openenergymonitor.org/emon/node/309" target="_blank">this topic</a>), and about six weeks ago Glyn posted <a href="http://openenergymonitor.blogspot.de/2012/05/emontx-single-ac-power-supply.html" target="_blank">a simulation of a possible circuit</a>.<br /><br />I had the time this weekend to give it a try, bought the necessary components and put it all on a breadboard. After a sleepless night I can confirm: It works!<br /><br />Here is my messy setup:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-vFgjTQRFaMY/T96bNDBEo-I/AAAAAAAAARQ/BNybcVJIFfs/s1600/2012-06-18+04.55.43.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="380" src="http://1.bp.blogspot.com/-vFgjTQRFaMY/T96bNDBEo-I/AAAAAAAAARQ/BNybcVJIFfs/s640/2012-06-18+04.55.43.jpg" width="640" /></a><a href="http://1.bp.blogspot.com/-vFgjTQRFaMY/T96bNDBEo-I/AAAAAAAAARQ/BNybcVJIFfs/s1600/2012-06-18+04.55.43.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><br /></a></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /><div style="text-align: left;"><br /></div></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><a href="http://www.blogger.com/goog_1837366350"><br /></a></div><span style="clear: left; color: black; float: left; margin-bottom: 1em; margin-right: 1em; text-align: left;">Small modifications had to be made to get it to work: I added a 1uF cap between 3.3v and GND to&nbsp;filter out some noise and redefined the voltage calibration coefficient in the code.</span><span style="clear: left; color: black; float: left; margin-bottom: 1em; margin-right: 1em; text-align: left;">But the main problem (took me all night to figure it out) is that the usual emonTx sketch wont work straight ahead. The line that lights up the LED (on pin 9) at the end of the setup loop has to be commented out, otherwise the setup won't work. It's no problem to flash it 2ms after each packet is sent, but apparently having it on in the beginning will prevent the program from starting. Maybe there isn't enough current to do it and move on (I must say that I use 10k ohm resistors for the voltage dividers). If it's not that then maybe full wave rectification could help.</span><span style="clear: left; color: black; float: left; margin-bottom: 1em; margin-right: 1em; text-align: left;">I used a humble Xprotolab to measure the Vin, Vout and at some other points in the circuit. It behaves almost exactly like the simulation. fft also shows very little noise.</span><span style="clear: left; color: black; float: left; margin-bottom: 1em; margin-right: 1em; text-align: left;">Would be great if other members could repeat this experiment to see if the results will be the same.</span><span style="clear: left; color: black; float: left; margin-bottom: 1em; margin-right: 1em; text-align: left;">Next step: Voltage sensing on the base ;)&nbsp;</span><a href="http://1.bp.blogspot.com/-vFgjTQRFaMY/T96bNDBEo-I/AAAAAAAAARQ/BNybcVJIFfs/s1600/2012-06-18+04.55.43.jpg" imageanchor="1"><br style="color: black;" /></a></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/06/getting-visual/">Getting visual</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-06-04T12:57:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-06-04 12:57:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Bouha</span> <br>
    <span><i class='icon-time'></i> two minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/benchmarking/'>benchmarking</a></li>
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
        <li><a class='category' href='/categories/graphing/'>graphing</a></li>
      
        <li><a class='category' href='/categories/interface/'>interface</a></li>
      
        <li><a class='category' href='/categories/social-energy-monitoring/'>social energy monitoring</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/06/getting-visual/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div dir="ltr" style="text-align: left;" trbidi="on">The Open Energy Monitor is all about getting visual. Using hardware to post collected data to emonCMS basically transforms the acquired data into easily understandable informations, and what's better than graphs.<br />Here is a <a href="https://power2switch.com/" target="_blank">similar initiative</a> that converts absurd electricity bills into meaningful information:<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-PY9KdI3eIt4/T8ygPLITPtI/AAAAAAAAAQ4/a67-09plce8/s1600/p2s-bill-redesign-v16.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="640" src="http://2.bp.blogspot.com/-PY9KdI3eIt4/T8ygPLITPtI/AAAAAAAAAQ4/a67-09plce8/s640/p2s-bill-redesign-v16.jpg" width="492" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Source: <a href="http://www.fastcodesign.com/1669931/how-a-redesigned-electricity-bill-could-make-you-smarter-and-save-cash" target="_blank">FastCoDesign.com</a></td></tr></tbody></table>You can compare it with with the old bill:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-E7YYVFYZ41s/T8yjo2P1PwI/AAAAAAAAARE/xvE3r5-85ig/s1600/comed-bill-jan-2011-1.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://1.bp.blogspot.com/-E7YYVFYZ41s/T8yjo2P1PwI/AAAAAAAAARE/xvE3r5-85ig/s400/comed-bill-jan-2011-1.jpg" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div>It is obvious that presenting the same information in a different way makes a big difference. The redesigned bill is much easier to understand, and the use of shapes and colors turns something very abstract into tangible information.<br /><br />But I believe that if we really want to democratize energy monitoring, we should take it one step further. We should offer people who have no idea what 4.2 kW or 150 kWh are, a reference to compare with. For example, visualizing 1kWh as the energy than ten 100W light bulbs consume in one hour makes it understandable to your grandma. Or showing one week's consumption each hour on one matrix using colored circles.<br /><br />More important is to give a feeling of the order of magnitude. Like showing a community average VS your consumption on a colored scale to have an idea how well you're doing, lets you have a good reference point.<br /><br />I agree that with households community averages are quite complicated since households have extremely different consumption patterns: some work from home, some have many guests, others spend very little time at home, etc... But when it comes to businesses, benchmarking is much less complicated, you can compare bakeries or cafes electricity consumption patterns in a much meaningful way.<br /><br />I think this should be a main target to be implemented in emonCMS, and I believe that the community has something to say and contribute to this topic, so I started this forum thread : http://openenergymonitor.org/emon/node/715&nbsp;please feel free to add your thoughts to it.<br /><br /><br /><div style="text-align: right;"><a href="http://www.fastcodesign.com/1669931/how-a-redesigned-electricity-bill-could-make-you-smarter-and-save-cash" target="_blank">Link to FastCoDesign article.</a></div></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/06/arduino-leonardo-atmega32u4-and-rfm12b/">Arduino Leonardo (ATmega32U4) and RFM12B</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-06-01T21:43:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-06-01 21:43:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/rfm12/'>RFM12</a></li>
      
        <li><a class='category' href='/categories/emontx/'>emonTx</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/06/arduino-leonardo-atmega32u4-and-rfm12b/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <br />I've just managed to get an RFM12B hooked up to an Arduino Leonardo. It's been a bit of port mapping nightmare! <br /><br />The ATmega 32U4's &nbsp;'special function' ports such as PWM, IRQ, SPI etc are quite different to the ATmega328. The <a href="http://arduino.cc/en/Hacking/PinMapping32u4">Arduino port mapping table</a> proves very useful, if a little difficult to&nbsp;interpret. I made a re-arranged table with the ports re-arranged&nbsp;into function groups. I'll publish it once I've&nbsp;tidied&nbsp;it up.<br /><br />Once of the main&nbsp;differences&nbsp;is that the hardware ISP connections are no longer on digital pins 10,11,12 and 13. On the Leonardo they are<br /><br /><table border="0" cellspacing="0" cols="2"> <colgroup width="245"></colgroup> <colgroup width="229"></colgroup> <tbody><tr>  <td align="LEFT" height="17"><span style="font-family: 'Times New Roman';"><i>MISO - &nbsp;Digital 14</i></span></td><td align="LEFT"><i><br /></i></td> </tr><tr>  <td align="LEFT" height="17"><span style="font-family: 'Times New Roman';"><i>SCK - &nbsp; Digital 15</i></span></td><td align="LEFT"><i><br /></i></td> </tr><tr>  <td align="LEFT" height="17"><span style="font-family: 'Times New Roman';"><i>MOSI - Digital 16</i></span></td>  <td align="LEFT"><i><br /></i></td> </tr><tr>  <td align="LEFT" height="17"><span style="font-family: 'Times New Roman';"><i>SS - &nbsp; &nbsp; &nbsp;Digital 17&nbsp;</i></span></td>  <td align="LEFT"><br /></td></tr></tbody></table><br />Unlike on the Arduino Uno These SPI pins are not accessible&nbsp;through any of the digital I/O pins, on om the Leonardo, their only accessible through the ICSP header. The SPI SS pin on the Leonardo is not broken out anywhere on the board,&nbsp;strangely&nbsp;it's used for the Rx LED. Can anyone explain why this is the case? It's not a big problem, we can use another pin as SS, digital 10 in this case.<br /><br />The IRQ Interrupt connection is made to Digital 3 (INT0). This has moved from Digital 2 on the Arduino Uno.<br /><br />The SEL connection is the same as with the Arduino UNO/ATmega328 goes to digital 10.<br /><br />See the RFM12B documentation page for general info on RFM12B and details of how to interface with ATmega328: <a href="http://openenergymonitor.org/emon/buildingblocks/rfm12b-wireless">http://openenergymonitor.org/emon/buildingblocks/rfm12b-wireless .&nbsp;</a><br /><br /><div class="separator" style="clear: both; text-align: center;"></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-1wlXYOH5sRw/T8k1oL7NA_I/AAAAAAAAbqM/ADGDEPtMkFc/s1600/Ardiono+Leonardo+RFM12B.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="266" src="http://1.bp.blogspot.com/-1wlXYOH5sRw/T8k1oL7NA_I/AAAAAAAAbqM/ADGDEPtMkFc/s640/Ardiono+Leonardo+RFM12B.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Arduino Leonardo Connections to RFM12B via<a href="http://jeelabs.com/products/rfm12b-board"> JeeLabs RFM12B</a> breakout for level shifting to 3.3V</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-SL7RcnJfBxU/T8kWsOqWWTI/AAAAAAAAbqA/LYa2A00fwp0/s1600/SPI.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-SL7RcnJfBxU/T8kWsOqWWTI/AAAAAAAAbqA/LYa2A00fwp0/s1600/SPI.jpg" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">ICSP Header</td></tr></tbody></table>Now the hardware is&nbsp;complete&nbsp;it's time to tackle the software. We use the RFM12B driver as part of the JeeLib library from JeeLabs:&nbsp;<a href="https://github.com/jcw/jeelib">https://github.com/jcw/jeelib</a>. The library needs to be installed in the Arduino&nbsp;library's&nbsp;folder in the usual way. Arduino 1.0.1 is needed to be&nbsp;compatible&nbsp;with Leonardo.<br /><br /><strike>To make the JeeLib library work with the Leonardo and RFM12B (hooked up as above) the following needs to be inserted into the RF12.cpp file on line 62 <b>before</b> the <i>else&nbsp;// ATmega168, ATmega328, etc.</i></strike><br /><i><br /></i><br />No change to RFM12.cpp is needed, just download the latest version, see update below.<br /><br /><i>#elif defined(__AVR_ATmega32U4__)</i><br /><i><br /></i><br /><i>#define RFM_IRQ &nbsp; &nbsp; 0<span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; //PD0, INT0, Digital3&nbsp;</i><br /><i>#define SS_DDR &nbsp; &nbsp; &nbsp;DDRB</i><br /><i>#define SS_PORT &nbsp; &nbsp; PORTB</i><br /><i>#define SS_BIT &nbsp; &nbsp; &nbsp;6<span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp; //Dig10, PB6</i><br /><i><br /></i><br /><i>#define SPI_SS &nbsp; &nbsp; &nbsp;17 &nbsp; &nbsp; // PB0, pin 8, Digital17</i><br /><i>#define SPI_MISO &nbsp; &nbsp;14 &nbsp; &nbsp; // PB3, pin 11, Digital14</i><br /><i>#define SPI_MOSI &nbsp; &nbsp;16 &nbsp; &nbsp; // PB2, pin 10, Digital16</i><br /><i>#define SPI_SCK &nbsp; &nbsp; 15 &nbsp; &nbsp; // PB1, pin 9, Digital15</i><br /><br /><br />I'm going to send JCW a git pull request to see if these changes can be integrated into the JeeLib library so it should work 'out of the box' in the future.<br /><br /><b>Update: Pull request has been merged, RF12 part of JeeLib Arduino library now has ATmega32U4 support :-) . Download it here:&nbsp;<a href="https://github.com/jcw/jeelib">https://github.com/jcw/jeelib</a></b><br /><br />For a simple RFM12B transmission demo/example see:&nbsp;<a href="https://github.com/openenergymonitor/RFM12B_Simple">https://github.com/openenergymonitor/RFM12B_Simple</a><br /><br />I'm planning on using the ATmega32U4 in the emonTx SMT that I'm currently working on. Spot the common thread in my last few blog posts!
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/06/high-accuracy-current-measurement-over/">High Accuracy Current Measurement Over a Wide Range</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-06-01T08:59:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-06-01 08:59:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> four minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emontx/'>emonTx</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/06/high-accuracy-current-measurement-over/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-GixykaE-ywU/T8PzXCzm_OI/AAAAAAAAbos/tf7V3XFQUVM/s1600/DSCF5036.JPG" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><br /></a><a href="http://2.bp.blogspot.com/-GixykaE-ywU/T8PzXCzm_OI/AAAAAAAAbos/tf7V3XFQUVM/s1600/DSCF5036.JPG" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><br /></a></div><div style="text-align: left;">Measuring the current in a domestic property using a clip-on CT sensor can be quite&nbsp;challenging&nbsp;since the range in which it has to work over is very large, potentially several order of magnitude: up to 25000W and down to a few 10'sW. We would like to have good accuracy over this wide range.&nbsp;</div><div style="text-align: left;"><br /></div><div>We have been exploring how to improve on the current emonTx. Robert Wall has written a page&nbsp;<a href="http://openenergymonitor.org/emon/node/712">detailing the measurement implications of current emonTx ADC</a> resolution at low current values when using&nbsp;the standard 100A max CT sensor and 18R burden resistor.&nbsp;</div><div style="text-align: left;"><br /></div><div style="text-align: left;">A while back we came across an application note from ATmel detailing how to build a fully featured energy monitor using CT sensor, AC voltage measurement and the ATmega328 MCU. App-notes are a fantastic source for&nbsp;open-source hardware information. The ATmel energy monitor app-note is very&nbsp;comprehensive&nbsp;and well written. It's even got a Bill of Materials that specs down to individual resistors&nbsp;complete&nbsp;with their corresponding Farrnel order codes!&nbsp;</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Download the app-note .pdf here:&nbsp;<a href="http://www.atmel.com/Images/doc2566.pdf" style="text-align: -webkit-auto;">www.atmel.com/Images/doc2566.pdf</a></div><div style="text-align: left;"><br /></div><div style="text-align: left;"></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-Z6-WTfCXnfY/T9S-l-RCp3I/AAAAAAAAbrk/eYv7rMySnNQ/s1600/Labeled+Atmel+Energy+Monitor+app+note.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="278" src="http://3.bp.blogspot.com/-Z6-WTfCXnfY/T9S-l-RCp3I/AAAAAAAAbrk/eYv7rMySnNQ/s640/Labeled+Atmel+Energy+Monitor+app+note.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Diagram from Atmel app-note - potential divider resistor values where changed to enabled the AC signal to be biased to Vcc/2</td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;"><span style="text-align: -webkit-auto;">The app-note circuit&nbsp;achieves&nbsp;good resolution and accuracy over a wide range by having a adjustable op-amp gain stage. Using the resistor values in the inverting op-amp the gain can be switched from -1.25, -10.26 and -69.11. The gain is switched by digital switching the&nbsp;</span>Bilateral Switches (74HC4066). The gain of the op-amp is calculated as follows:</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-1V3jCpeeRMY/T8hxqXH0PxI/AAAAAAAAbpo/xs9OuQ7T3uU/s1600/Labeled+Atmel+Energy+Monitor+app+note.png" imageanchor="1"><img border="0" height="122" src="http://1.bp.blogspot.com/-1V3jCpeeRMY/T8hxqXH0PxI/AAAAAAAAbpo/xs9OuQ7T3uU/s640/Labeled+Atmel+Energy+Monitor+app+note.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">A couple of days a ago we built up a prototype of the above circuit, more an an exercise to check we can make it work rather than a scientific test, this would be difficult on a breadboard due to the sub-optimal circuit layout. A spare emonTx PCB was used as an easy way to connect the circuit up to an ATmega328 and RFM12B.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-GixykaE-ywU/T8PzXCzm_OI/AAAAAAAAbos/tf7V3XFQUVM/s1600/DSCF5036.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto; text-align: left;"><img border="0" height="240" src="http://2.bp.blogspot.com/-GixykaE-ywU/T8PzXCzm_OI/AAAAAAAAbos/tf7V3XFQUVM/s320/DSCF5036.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Adjustable gain op-amp CT sensor circuit - prototype&nbsp;</td></tr></tbody></table><div class="separator" style="clear: both; text-align: center;"></div><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-wyzX5ePzs20/T8Pz6eMV-GI/AAAAAAAAbo4/a1kLW5rIbc0/s1600/sample02.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="400" src="http://2.bp.blogspot.com/-wyzX5ePzs20/T8Pz6eMV-GI/AAAAAAAAbo4/a1kLW5rIbc0/s640/sample02.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">ATmega 328 ADC sample using <a href="http://openenergymonitor.org/emon/node/110">VI sampler</a></td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;">The circuit worked first time with no&nbsp;hiccups. The above waveform is the RAW output from an ATmega 328's ADC, where one 100W light bulb and 30W laptop PSU was connected to the AC circuit being monitored. The high gain stage (x69.11) was active. To put this in perspective if the same sample was run on the current emonTx the signal would be so small as to be only just visible on the VI sampler. The spikes at the peak of the waveform is caused by the laptop's switch-mode PSU. The significantly increased amplitude of the signal will improve accuracy when monitoring low power levels. The app-note suggests accuracy of &lt;1% over a wide range, possibly even better with careful PCB design.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Although this multi-gain op-amp circuit adds significant complexity over the current emonTx current monitoring circuit it can be added for relatively low cost. One quad op-amp and two quad bilateral switches IC's cost about £1, this is enough for 4 x CT channels. We're planning to use this circuit design in the forthcoming emonTx SMT. As the name suggests this board will be designed for SMT components and will be assembled by pick-and-place. See <a href="http://openenergymonitor.org/emon/node/642">this forum thread</a> for a discussion regarding ideas for the emonTx SMT. Design is progressing well, more details on this soon.&nbsp;</div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/05/installing-emoncms-on-raspberry-pi/">Installing emoncms on a raspberry pi</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-05-30T16:14:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-05-30 16:14:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
        <li><a class='category' href='/categories/raspberry-pi/'>raspberry pi</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/05/installing-emoncms-on-raspberry-pi/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;">Update: we now have a more&nbsp;complete&nbsp;guide for installing emoncms on the Pi here:&nbsp;<a href="http://openenergymonitor.org/emon/emoncms/installing-ubuntu-debian-pi">http://openenergymonitor.org/emon/emoncms/installing-ubuntu-debian-pi</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Just got emoncms installed and running on the raspberry pi here, here are my installation notes:</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-RT98jV4_DP8/T8ZFc8GrHoI/AAAAAAAACdE/kSBCcfSSpgU/s1600/IMAG0781.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="225" src="http://3.bp.blogspot.com/-RT98jV4_DP8/T8ZFc8GrHoI/AAAAAAAACdE/kSBCcfSSpgU/s400/IMAG0781.jpg" width="400" /></a></div><b><br /></b><br /><b>1) Initial setup</b><br />Download the debian squeeze image from: <a href="http://www.raspberrypi.org/downloads">http://www.raspberrypi.org/downloads</a> and write to an SD card, following the guide here:<a href="http://www.blogger.com/%C2%A0http://elinux.org/RPi_Easy_SD_Card_Setup"> http://elinux.org/RPi_Easy_SD_Card_Setup</a>. <br /><br />Insert the sd card into the pi, power it up connect up a screen, a keyboard and ethernet.<br /><br /><b>2) Enable SSH (optional)</b><br /><br />You may at this point like to enable ssh in order to do the rest of the setup remotely from your 'normal' computer (running the pi in headless mode). I followed this guide, <a href="http://fusionstrike.com/2012/setting-ssh-ftp-raspberry-pi-debian">http://fusionstrike.com/2012/setting-ssh-ftp-raspberry-pi-debian</a>. The main steps are:<br /><br />$ sudo bash (Not sure if this is needed, apparently it is useful when performing a series of administrative tasks)<br /><br />Crease a public RSA key:<br /><br />$ ssh-keygen -t rsa<br /><br />It will ask where you would like it saved and a pass-phrase, skip these questions by pressing enter. Once finished and the pattern has appeared enter the followin to enables ssh at boot:<br /><br />$ sudo mv /boot/boot_enable_ssh.rc /boot/boot.rc<br /><br />Then to start ssh:<br />$ sudo /etc/init.d/ssh start<br /><br />Find the IP address of your pi ($ ifconfig -a) and then from your computer login to the raspberry pi via ssh, for example:<br /><br />$ ssh pi@192.168.1.17<br />(password: raspberry)<br /><br /><b>3) Update repositories</b><br />It may be worth making sure that all packages are up to date at this point:<br /><br />$ sudo apt-get update<br /><br /><b>4) Install mysql</b><br /><br />$ sudo apt-get install mysql-server mysql-client<br /><br />When the blue dialog&nbsp;appears&nbsp;enter a password for root user, note the password down as you will need it later.<br /><br /><b>5) Install apache2</b><br /><br />$ sudo apt-get install apache2<br /><div><br /></div><div>If apache fails to start (as it did for me) run the following:<br /><br />$ sudo groupadd www-data<br />$ sudo usermod -a -G www-data www-data<br /><br /><b>6) Install php</b><br /><br />$ sudo apt-get install php5 libapache2-mod-php5<br /><br />$ sudo apt-get install php5-mysql<br /><br /><b>7) Enable mod rewrite</b><br /><br />$ sudo a2enmod rewrite<br /><br />$ sudo nano /etc/apache2/sites-enabled/000-default<br /><br />Change (line 7 and line 11), "AllowOverride None" to "AllowOverride All".<br />Save and exit.<br /><br /><b>8)&nbsp;That completes the server installation, restart the server to make everything above operational:</b><br /><b><br /></b><br />$ sudo /etc/init.d/apache2 restart<br /><br /><b>Installing emoncms:</b><br /><br /><b>7) Install git (optional)</b><br /><br />$ sudo apt-get install git-core<br /><br />Follow this tutorial on creating keys etc: <br /><a href="http://help.github.com/linux-set-up-git/">http://help.github.com/linux-set-up-git/</a><br /><br />Finally to download, in the /var/www folder type:<br /><br />$ git clone git@github.com:openenergymonitor/emoncms3.git<br /><br /><b>Alternatively </b>download emoncms and unzip to your server:<br /><a href="https://github.com/openenergymonitor/emoncms3">https://github.com/openenergymonitor/emoncms3</a> <br /><br /><b> 8) Create a MYSQL database </b><br /><br />$ mysql -u root - p<br /><br />Enter the mysql password that you set above.<br />Then enter the sql to create a database:<br /><br />mysql&gt; CREATE DATABASE emoncms;<br /><br /><b> 9) Set emoncms database settings.</b><br />In the folder emoncms3/Includes rename default.settings.php to settings.php. In settings.php&nbsp;enter your mysql username (root) and password, host (localhost) and database name (if as above - emoncms).<br /><b><br /></b><br /><b>10) In an internet browser, load emoncms:</b><br /><br />http://YOURIP/emoncms3<br /><br />That's should be it!<br /><br />Next step is to get a jeelink running to&nbsp;receive&nbsp;and forward data from the emontx to the emoncms installation. Will update shortly.</div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/05/emontx-single-ac-power-supply/">emonTx single AC power supply - Part 1 Simulation</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-05-27T21:29:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-05-27 21:29:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emontx/'>emonTx</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/05/emontx-single-ac-power-supply/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><div style="text-align: left;">The current <a href="http://openenergymonitor.org/emon/emontx">emonTx V2.x</a> can monitor AC voltage, real power, power factor and direction of current flow, this is possible by using a plug-in 9V AC-AC transformer to provide a stepped-down AC voltage waveform. See&nbsp;<a href="http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-an-acac-power-adapter">Measuring AC Voltage with an AC to AC power adapter</a>&nbsp;in the building blocks section for more details. The emonTx also requires an additional (separate) DC power source, this is usually provided by a 5V USB&nbsp;plug-in&nbsp;adaptor.<br /><br /></div><div style="text-align: left;">Obviously it's desirable to do away with one of the power supplies and to use the AC-AC adapter to provide both the AC signal and the DC power to the emonTx. Early tests indicated that using the AC signal to provide a DC power supply&nbsp;adversely&nbsp;effected&nbsp;the quality of the AC&nbsp;signal&nbsp;and therefore the voltage and real power reading of the emonTx. Full wave&nbsp;rectification with a bridge rectifier creates a power supply with floating supply rails&nbsp;and loading the AC-AC adaptor caused distortion of the AC sine wave sample signal.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">There has been an interesting <a href="http://openenergymonitor.org/emon/node/309">form thread</a> on the topic of using a single AC power supply for the emonTx. There were number of suggestions for circuits to&nbsp;achieve&nbsp;this. Many of the circuits suggested looked&nbsp;feasible&nbsp;but some added&nbsp;considerable&nbsp;complexity&nbsp;and components such as centre-tapped or isolating transformers. We are keen to use an off-the-shelf certified power supply unit wherever direct connection to mains power is involved.&nbsp;</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><span style="text-align: center;">Recently</span>&nbsp;<a href="http://openenergymonitor.org/emon/user/924">Robert Wall</a> contacted us with a single AC power supply circuit design based on a half-wave rectifier and LDO linear voltage regulator. The circuit only requires an additional two capacitors, two diodes and one resistor to&nbsp;supplement the&nbsp;components we already have on the emonTx PCB. Robert has been very helpful offering his expertise and experience as an Electronic Engineer to the project. The technical testing report on the <a href="http://openenergymonitor.org/emon/buildingblocks/report-yhdc-sct-013-000-current-transformer">SCT-013-000 CT</a> and <a href="http://openenergymonitor.org/emon/buildingblocks/report-mascot-9v-acac-adaptor">Mascot AC-AC adapter</a> in the building blocks section are all Robert's work.&nbsp;</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><i>Note: this circuit design is still in development, we are currently at the simulation stage</i></div><div style="text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-3El_MoBPMCI/T8H-QwqxftI/AAAAAAAAbn4/Zl-kBlwbQRI/s1600/Half+wave+rectifier+power+supply+labeled+diagram.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="188" src="http://1.bp.blogspot.com/-3El_MoBPMCI/T8H-QwqxftI/AAAAAAAAbn4/Zl-kBlwbQRI/s640/Half+wave+rectifier+power+supply+labeled+diagram.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><span style="font-size: 13px;">Fig1. Half wave rectifier AC-DC power supply and AC voltage sample&nbsp;</span></div></td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;">The key to Robert's circuit is current limiting resistor R1, this limits the current draw from capacitor C1. The resistor value was chosen to attempt to charge C1 gradually over the positive half cycle. See the&nbsp;labelled&nbsp;waveforms below to see how this works in <strike>practice</strike> simulation! C2 is a de-coupling capacitor and R3-R5 reduce the AC sample to the correct magnitude and bias ready to be sampled by the ATmega328 ADC.&nbsp;</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-LrkqHchGQfg/T8FaT2Amz6I/AAAAAAAAbnQ/W3fqDUGCEzI/s1600/Simulation+waveforms+under+normal+operating+conditions.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="369" src="http://4.bp.blogspot.com/-LrkqHchGQfg/T8FaT2Amz6I/AAAAAAAAbnQ/W3fqDUGCEzI/s640/Simulation+waveforms+under+normal+operating+conditions.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig2. Simulation waveforms under normal operating conditions</td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;">To demonstrate the effect of the current limiting resistor R1 the simulation was ran with R1= 1 ohm, see the labelled waveforms in Fig.3 below. The capacitor C1 now charges up quicker drawing more current from the AC-AC adapter, this loads the adapter creating a 'dip' in the AC sample waveform. This will&nbsp;negatively&nbsp;effect the voltage and real power reading on the emonTx.&nbsp;</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-fk2Npys5kp0/T8FaSBg5KhI/AAAAAAAAbnE/ug8gSng4hqo/s1600/Effect+of+low+value+current+limiting+resistor+R1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="284" src="http://4.bp.blogspot.com/-fk2Npys5kp0/T8FaSBg5KhI/AAAAAAAAbnE/ug8gSng4hqo/s640/Effect+of+low+value+current+limiting+resistor+R1.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig. 3 Demonstrating the effect of low value current limiting resistor R1</td></tr></tbody></table>Simulation has indicated that with a current draw of about 8mA (ATmega328) and using the Mascot AC-AC power adapter with a mains voltage of about 240Vrms results in a -6mV&nbsp;difference&nbsp;in the Vrms of the sample waveform when compared with a perfect&nbsp;sine wave. This should be small enough to not&nbsp;adversely&nbsp;effect the AC voltage and real power reading, a tweaking of the calibration will probably be required.<br /><br />The next step is to move beyond the&nbsp;virtual;&nbsp;build up a prototype to see if it performs in practice like the simulation suggests!<br /><br />I've posted the<a href="http://www.linear.com/designtools/software/#LTspice"> LTspice</a> simulation files used to generate the simulation waveforms on the forum:&nbsp;<a href="http://openenergymonitor.org/emon/node/704">http://openenergymonitor.org/emon/node/704</a>
    
  </div>
  </article>
  <hr>
  
 
  <div class="pagination">
    
      <a class="btn pull-left" href="/posts/24">&larr; Older</a>
    

    
    <a class="btn pull-right" href="/posts/22">Newer &rarr;</a>
    
  </div>




<!--Site Nav-->


<style>
.dropbtn {
  position: fixed;
  bottom: 0;
  left: 0;
  color: #ffffff;
  background-color: #FFA500;
  cursor: pointer;
  height: 70px;
  width: 70px;
  border-top-right-radius: 10%;
  text-align: center;
  padding-top: 8px;
  font-size: 40px;
  color: #000000;
  font-weight: bold;
}
.dropdown {
    position: relative;
    z-index: 22;
}
.dropdown-content {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    background-color: #000000;
    width: 9em;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
}
.dropdown-content a {
    text-align: left;
    color: white;
    text-decoration: none;
    padding: 15px;
    display: block;
    font-weight: bold;
}
.dropdown a:hover {
	background-color: #0699fa;
	color: #000000;
}
.show {
	display: block;
}
</style>
  
<div class="dropdown">
   
<div onclick="myFunction()" class="dropbtn">+</i>
</div>
  <div id="myDropdown" class="dropdown-content">
    <a href="https://openenergymonitor.org/"><i class="icon-globe" style="color:#FFA500"></i>&nbsp;&nbsp;Main Site</a>
    <a href="https://guide.openenergymonitor.org/"><i class="icon-bookmark"  style="color:#FFA500"></i>&nbsp;&nbsp;User Guide</a>
    <a href="https://shop.openenergymonitor.com/"><i class="icon-shopping-cart"  style="color:#FFA500"></i>&nbsp;&nbsp;Shop</a>
    <a href="https://community.openenergymonitor.org/"><i class="icon-comment" style="color:#FFA500"></i>&nbsp;&nbsp;Community</a>
    <a href="https://guide.openenergymonitor.org/technical/resources/"><i class="icon-book"  style="color:#FFA500"></i>&nbsp;&nbsp;Resources</a>
    <a href="https://twitter.com/Openenergymon/"><i class="icon-twitter"  style="color:#FFA500"></i>&nbsp;&nbsp;Twitter</a>
    <a onclick="myFunction()" style="cursor:pointer;text-align:center;background-color:#000000;">&#10006;</a>
  </div>
</div>

<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
	document.getElementById("myDropdown").classList.toggle("show");
}
// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>

<!--End of Site Nav-->

        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">

 
 <section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      
        <li class="post">
          <a href="/2016/09/emonth2/">Introducing emonTH V2</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/09/summer-placement/">Summer Placement</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/08/ecohomelab-control/">EcoHome Lab: From Monitoring to Control</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/07/HTU21D-Temperature-Humidity-sensor/">HTU21D / Si72021 Temperature and Humidity Sensor</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/esp8266-ota-update/">Part 3/3: Continuous Deployment (Over-The-Air Update to ESP8266)</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/emoncms-docker/">Emoncms Docker</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/esp8266-emonesp-developments/">ESP8266 WIFI developments</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/auto-build-continuous-test-firmware/">Part 2/3: Firmware Continuous Test & Build</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/platformio/">Part 1/3: PlatformIO open-source embedded development ecosystem</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/emonpi-vrms-line-fault/">Electrical Supply Line Fault</a>
        </li>
      
    
  </ul>
</section>
  
  
     <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Categories</h1>
  <ul class="divided">
    
    
      <li><a href="/categories/air-quality-egg/">Air Quality Egg</a></li>
    
      <li><a href="/categories/antenna/">Antenna</a></li>
    
      <li><a href="/categories/building-energy-modelling/">Building Energy Modelling</a></li>
    
      <li><a href="/categories/china/">China</a></li>
    
      <li><a href="/categories/christmas/">Christmas</a></li>
    
      <li><a href="/categories/dc/">DC</a></li>
    
      <li><a href="/categories/dc-current-sensing/">DC current sensing</a></li>
    
      <li><a href="/categories/esp8266/">ESP8266</a></li>
    
      <li><a href="/categories/htu21d/">HTU21D</a></li>
    
      <li><a href="/categories/heat-pump/">Heat Pump</a></li>
    
      <li><a href="/categories/kaizen/">Kaizen</a></li>
    
      <li><a href="/categories/kicad/">KiCad</a></li>
    
      <li><a href="/categories/mqtt/">MQTT</a></li>
    
      <li><a href="/categories/nanoderf/">NanodeRF</a></li>
    
      <li><a href="/categories/nodered/">NodeRed</a></li>
    
      <li><a href="/categories/oem-labs/">OEM Labs</a></li>
    
      <li><a href="/categories/okg/">OKG</a></li>
    
      <li><a href="/categories/oscilloscope/">Oscilloscope</a></li>
    
      <li><a href="/categories/rfm12/">RFM12</a></li>
    
      <li><a href="/categories/rfm69/">RFM69</a></li>
    
      <li><a href="/categories/rs485/">RS485</a></li>
    
      <li><a href="/categories/sap-2012/">SAP 2012</a></li>
    
      <li><a href="/categories/shw/">SHW</a></li>
    
      <li><a href="/categories/srf/">SRF</a></li>
    
      <li><a href="/categories/tasker/">Tasker</a></li>
    
      <li><a href="/categories/android/">android</a></li>
    
      <li><a href="/categories/app/">app</a></li>
    
      <li><a href="/categories/application/">application</a></li>
    
      <li><a href="/categories/arduino/">arduino</a></li>
    
      <li><a href="/categories/award/">award</a></li>
    
      <li><a href="/categories/backup/">backup</a></li>
    
      <li><a href="/categories/batteries/">batteries</a></li>
    
      <li><a href="/categories/benchmarking/">benchmarking</a></li>
    
      <li><a href="/categories/build-sesh/">build sesh</a></li>
    
      <li><a href="/categories/business/">business</a></li>
    
      <li><a href="/categories/ciseco/">ciseco</a></li>
    
      <li><a href="/categories/community-energy/">community energy</a></li>
    
      <li><a href="/categories/community-smart-grid/">community smart grid</a></li>
    
      <li><a href="/categories/continuous-testing/">continuous testing</a></li>
    
      <li><a href="/categories/control/">control</a></li>
    
      <li><a href="/categories/current-sensor/">current sensor</a></li>
    
      <li><a href="/categories/current-transformer/">current transformer</a></li>
    
      <li><a href="/categories/dashboard/">dashboard</a></li>
    
      <li><a href="/categories/display/">display</a></li>
    
      <li><a href="/categories/diy-drones/">diy drones</a></li>
    
      <li><a href="/categories/docker/">docker</a></li>
    
      <li><a href="/categories/documentation/">documentation</a></li>
    
      <li><a href="/categories/ecohomelab/">ecohomelab</a></li>
    
      <li><a href="/categories/efergy/">efergy</a></li>
    
      <li><a href="/categories/electronics/">electronics</a></li>
    
      <li><a href="/categories/elektrocamp/">elektrocamp</a></li>
    
      <li><a href="/categories/email-notifications/">email notifications</a></li>
    
      <li><a href="/categories/embodied-energy/">embodied energy</a></li>
    
      <li><a href="/categories/emonbase/">emonBase</a></li>
    
      <li><a href="/categories/emonctrl/">emonCtrl</a></li>
    
      <li><a href="/categories/emonglcd/">emonGLCD</a></li>
    
      <li><a href="/categories/emonpi/">emonPi</a></li>
    
      <li><a href="/categories/emonsd/">emonSD</a></li>
    
      <li><a href="/categories/emonth/">emonTH</a></li>
    
      <li><a href="/categories/emontx/">emonTx</a></li>
    
      <li><a href="/categories/emontx-v2/">emonTx V2</a></li>
    
      <li><a href="/categories/emontxsmt/">emonTxSMT</a></li>
    
      <li><a href="/categories/emontxshield/">emonTxShield</a></li>
    
      <li><a href="/categories/emoncms/">emoncms</a></li>
    
      <li><a href="/categories/emonesp/">emonesp</a></li>
    
      <li><a href="/categories/emonpi/">emonpi</a></li>
    
      <li><a href="/categories/emontx/">emontx</a></li>
    
      <li><a href="/categories/end-to-end/">end to end</a></li>
    
      <li><a href="/categories/energy-monitor/">energy monitor</a></li>
    
      <li><a href="/categories/energy-monitoring/">energy monitoring</a></li>
    
      <li><a href="/categories/esp8266/">esp8266</a></li>
    
      <li><a href="/categories/feed-storage/">feed storage</a></li>
    
      <li><a href="/categories/firmware/">firmware</a></li>
    
      <li><a href="/categories/forum/">forum</a></li>
    
      <li><a href="/categories/github/">github</a></li>
    
      <li><a href="/categories/graphing/">graphing</a></li>
    
      <li><a href="/categories/hackathon/">hackathon</a></li>
    
      <li><a href="/categories/hall-effect/">hall effect</a></li>
    
      <li><a href="/categories/hardware/">hardware</a></li>
    
      <li><a href="/categories/heating/">heating</a></li>
    
      <li><a href="/categories/heatpumpmonitor/">heatpumpmonitor</a></li>
    
      <li><a href="/categories/home-assistant/">home Assistant</a></li>
    
      <li><a href="/categories/home-camp/">home camp</a></li>
    
      <li><a href="/categories/humidity/">humidity</a></li>
    
      <li><a href="/categories/integrations/">integrations</a></li>
    
      <li><a href="/categories/interface/">interface</a></li>
    
      <li><a href="/categories/interview/">interview</a></li>
    
      <li><a href="/categories/java/">java</a></li>
    
      <li><a href="/categories/job/">job</a></li>
    
      <li><a href="/categories/kickstarter/">kickstarter</a></li>
    
      <li><a href="/categories/lightwaverf/">lightwaverf</a></li>
    
      <li><a href="/categories/linux/">linux</a></li>
    
      <li><a href="/categories/logo/">logo</a></li>
    
      <li><a href="/categories/manufacturing/">manufacturing</a></li>
    
      <li><a href="/categories/measurement/">measurement</a></li>
    
      <li><a href="/categories/media/">media</a></li>
    
      <li><a href="/categories/mobile/">mobile</a></li>
    
      <li><a href="/categories/mobile-app/">mobile app</a></li>
    
      <li><a href="/categories/modbus/">modbus</a></li>
    
      <li><a href="/categories/nanode/">nanode</a></li>
    
      <li><a href="/categories/ook/">ook</a></li>
    
      <li><a href="/categories/open-source/">open source</a></li>
    
      <li><a href="/categories/openhab/">openHAB</a></li>
    
      <li><a href="/categories/openenergymonitor/">openenergymonitor</a></li>
    
      <li><a href="/categories/optical-pulse/">optical pulse</a></li>
    
      <li><a href="/categories/pcb/">pcb</a></li>
    
      <li><a href="/categories/pebble/">pebble</a></li>
    
      <li><a href="/categories/placement/">placement</a></li>
    
      <li><a href="/categories/platformio/">platformio</a></li>
    
      <li><a href="/categories/pluse/">pluse</a></li>
    
      <li><a href="/categories/presentation/">presentation</a></li>
    
      <li><a href="/categories/raspberry-pi/">raspberry pi</a></li>
    
      <li><a href="/categories/renewable/">renewable</a></li>
    
      <li><a href="/categories/serial/">serial</a></li>
    
      <li><a href="/categories/shop/">shop</a></li>
    
      <li><a href="/categories/showcase/">showcase</a></li>
    
      <li><a href="/categories/smartwatch/">smartwatch</a></li>
    
      <li><a href="/categories/social-energy-monitoring/">social energy monitoring</a></li>
    
      <li><a href="/categories/solarpv/">solarPV</a></li>
    
      <li><a href="/categories/sparkfun/">sparkfun</a></li>
    
      <li><a href="/categories/sustainability/">sustainability</a></li>
    
      <li><a href="/categories/temperature/">temperature</a></li>
    
      <li><a href="/categories/three-phase/">three phase</a></li>
    
      <li><a href="/categories/travisci/">travisci</a></li>
    
      <li><a href="/categories/tutorials/">tutorials</a></li>
    
      <li><a href="/categories/upgrade/">upgrade</a></li>
    
      <li><a href="/categories/user-guide/">user guide</a></li>
    
      <li><a href="/categories/utility-meters/">utility meters</a></li>
    
      <li><a href="/categories/voltage-sensing/">voltage sensing</a></li>
    
      <li><a href="/categories/vrms/">vrms</a></li>
    
      <li><a href="/categories/website/">website</a></li>
    
      <li><a href="/categories/wifipixel/">wifipixel</a></li>
    
      <li><a href="/categories/wind/">wind</a></li>
    
      <li><a href="/categories/wind-turbine/">wind turbine</a></li>
    
      <li><a href="/categories/wireless/">wireless</a></li>
    
      <li><a href="/categories/workshop/">workshop</a></li>
    
  </ul>
</section>
  
</div>
        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <style>


div.searchtool {
  position: relative;
  display: inline-block;
  top: -6px;
}

input[type=text] {
  border: 3px solid #0699fa;
}

fieldset {
  border: 0;
}

</style>
<div class="copyright">

  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor/guide'><i class="icon-github"></i></a>
  <a rel="me" href='https://blog.openenergymonitor.org/feed.xml'><i class="icon-rss"></i></a>

  <div class="credit">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and <a href='https://github.com/coogie/oscailte'>Oscalite</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>

<div class="searchtool">


<form action="https://encrypted.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.openenergymonitor.org" />
    <input class="search" id="search" type="text" name="q" results="0" placeholder="Search..." />
  </fieldset>
</form>


</div>
</div>
    </div>
  </div>
</div>
    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script>
  var _gaq=[['_setAccount','UA-10321170-4'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<script>
  var disqus_shortname = 'openenergymonitor';
  
    
    var disqus_script = 'count.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>


<script>
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>

  </body>
</html>