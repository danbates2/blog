<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blog | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="OpenEnergyMonitor Blog">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="http://blog.openenergymonitor.org/posts/24/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Blog | OpenEnergyMonitor">
    <meta property="og:site_name" content="Blog | OpenEnergyMonitor">
    <meta property="og:url" content="http://blog.openenergymonitor.org/posts/24/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Blog | OpenEnergyMonitor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Blog | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
    
    
    
    <link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
	<link rel="apple-touch-icon" href="/images/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/images/favicon-144.png">
	<meta name="msapplication-config" content="/images/browserconfig.xml">
	
  </head>

  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
  <a href="/" class="site-title">
    <!--<img width='40' src='/images/favicon-192x192.png'> -->
    <span>Blog | OpenEnergyMonitor</span>
  </a>
</div>

<div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  <li><a href="http://openenergymonitor.org">Home</a></li>
  <li><a href="http://shop.openenergymonitor.com">Online-Store</a></li>
  <li><a href="http://guide.openenergymonitor.org">User Guide</a></li>
  <li><a href="http://emoncms.org">Emoncms</a></li>
  <li><a href="http://community.openenergymonitor.org">Forum</a></li>
</ul>
  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

            
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/02/28/emonglcd-v13-pcb/">emonGLCD V1.3 PCB</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-02-28T13:09:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span>
    <span><i class='icon-time'></i> 1 minute reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emonglcd/'>emonGLCD</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/02/28/emonglcd-v13-pcb/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Introducing the latest version of the emonGLCD PCB.<br /><br />This latest version (V1.3) fixes a <a href="http://openenergymonitor.org/emon/node/273">few minor issues</a> with the previous version (V1.2) but also has some issues of its own. It's a case of two steps forward and one step back.<br /><br />The good news:<br /><br /><ul><li>The LDR light sensor no longer suffers from reduced&nbsp;sensitivity due to sharing a port with one of the LCD pins&nbsp;</li><li>Both tri-colour LEDs are on ATmega328's hardware PWM ports allowing the brightness to be controlled with some nice dimming effects&nbsp;</li><li>New new rear silkscreen design&nbsp;featuring&nbsp;a handy RFM12B frequency note area and a large Welsh dragon graphic!&nbsp;</li></ul>The bad news:<br /><br /><ul><li>The new feature in V1.3 was suppose to be two extra push switches to allow for future screen navigation. Unfortunately due to a PCB layout error non of the switches on V1.3 are functional. While this is&nbsp;frustrating&nbsp;since it was an easily avoidable mistake the display is still very functional. The current firmware example for single CT energy monitoring and solar PV monitoring don't really make much use of the switch.&nbsp;</li></ul><div>The good news!</div><div><br /></div><div>Everything else LCD, wireless, ATmega 328, Light sensor, Temperature sensor and multi-colour LED's work great. We have decided to go with the switches not working for now as it still makes a very functional energy monitor display.&nbsp;</div><div><br /></div><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-mZVa3YtA_fc/T0vZUnFBJPI/AAAAAAAAZf8/VIaKBCNs6aU/s1600/emonGLCD_PCB_V1.3_front.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/-mZVa3YtA_fc/T0vZUnFBJPI/AAAAAAAAZf8/VIaKBCNs6aU/s320/emonGLCD_PCB_V1.3_front.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonGLCD V1.3 front</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-m6oT0oN8qrk/T0vZgUbu3zI/AAAAAAAAZgE/mlnwxzxFYeM/s1600/emonGLCD_PCB_V1.3_rear.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/-m6oT0oN8qrk/T0vZgUbu3zI/AAAAAAAAZgE/mlnwxzxFYeM/s320/emonGLCD_PCB_V1.3_rear.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonGLCD V1.3 rear&nbsp;</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-b2Md9kSXgCM/T0vy5TRCAZI/AAAAAAAAZgM/PU1OQgo2K6g/s1600/DSCF4655.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/-b2Md9kSXgCM/T0vy5TRCAZI/AAAAAAAAZgM/PU1OQgo2K6g/s320/DSCF4655.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">V1.3 assembled</td></tr></tbody></table>The&nbsp;schematic&nbsp;and board design for emonGLCD V1.3 are up on solderpad:&nbsp;<a href="http://solderpad.com/openenergymon/emonglcd/">http://solderpad.com/openenergymon/emonglcd/</a><br /><br />The emonGLCD documentation page has been updated with the new port mappings:&nbsp;<a href="http://openenergymonitor.org/emon/emonglcd">http://openenergymonitor.org/emon/emonglcd</a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/02/21/documentation-reorganisation/">Documentation reorganisation proposal</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-02-21T19:21:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span>
    <span><i class='icon-time'></i> two minutes reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/documentation/'>documentation</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/02/21/documentation-reorganisation/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-3wPidRZqWYU/T0PsvpGpbLI/AAAAAAAACYk/Bg_gPi76x20/s1600/oem_site_now.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="316" src="http://1.bp.blogspot.com/-3wPidRZqWYU/T0PsvpGpbLI/AAAAAAAACYk/Bg_gPi76x20/s400/oem_site_now.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><span class="Apple-style-span" style="font-size: small;"><i>The current front page</i></span></td></tr></tbody></table><div style="text-align: center;"></div><div style="text-align: -webkit-auto;"><br /></div><br />It has been pointed out several times that the documentation on this site is hard to follow.&nbsp;We've&nbsp;been giving this some thought and have come up with a plan for hopefully what will be a clearer structure.<br /><br />Here are our initial thoughts:<br /><br />1) We start with the following headings, these form the main menu:<br /><br /><b>Community |&nbsp;Applications | Modules | Fundamentals | Tools | Archive</b><br /><br />These headings contain:<br /><br /><b><span class="Apple-style-span" style="font-size: large;">Community</span></b><br /><ul><li>Forums</li><li>Development plans</li><li>Links to community builds and blogs</li></ul><b><span class="Apple-style-span" style="font-size: large;">Applications</span></b><br />Applications are step by step guides of how to assemble modules to create a particular system. They start with a short description then a step-by-step type structure. Detailed application discussion would be on a second page or blog post with link through.<br /><ul><li>Power monitoring</li><li>Solar PV</li><li>Solar hot water</li><li>Pulse counting</li><li>Heatpump monitoring</li></ul><div>Applications reference&nbsp;through&nbsp;to modules below.</div><br />Separate github folder for each application containing sketches for all the modules that make up the application.<br /><br /><b><span class="Apple-style-span" style="font-size: large;">Modules</span></b><br /><ul><li>Hardware</li><ul><li>emontx</li><li>emonglcd</li><li>emonbase</li><li>See-a-watt</li></ul><li>Software</li><ul><li>emoncms</li><li>Pachube</li></ul></ul>Each module contains the pages:<br /><ul><li>page1: overview + features (maybe use it: application list is referenced here?)</li><li>page2: built it / install it /&nbsp;buy it</li><li>page3: detailed design documentation</li></ul>All emon system sections reference through to fundamentals section below<br /><br /><b><span class="Apple-style-span" style="font-size: large;">Fundamentals</span></b><br /><br />Getting started with arduino, uploading sketches etc.<br /><br /><b>Electricity monitoring</b><br /><ul><li>AC Theory - Introduction</li><li>AC Theory - Advanced</li><li>AC Theory - 3 phase</li><li>Power in different countries</li></ul><ul><li>Non-invasive</li><ul><li>CT sensors - Introduction</li><li>CT sensors - Advanced</li><li>Current only - Single Phase</li><li>Current and voltage - Single Phase</li><li>3-phase Monitoring</li></ul><li>Invasive</li><ul><li>AC shunt</li><li>DC Shunt &amp; hall effect sensing</li></ul></ul><ul><li>Appliance inference - labs</li><li>Interfacing with inverters</li></ul><b>Pulse counting</b><br /><ul><li>Single pulse counting</li><li>12 input pulse counting</li></ul><b>Temperature</b><br /><ul><li>DS18B20 temperature sensing</li><li>PT1000 temperature sensing</li></ul><b>Networking</b><br /><ul><li>RF</li><li>RFM12B</li><li>xbee, zigbee, old rf</li><li>Master/slave simple serial networking</li><li>Ethernet</li></ul><b>Displays</b><br /><ul><li>GLCD</li><li>7segment, 3310</li></ul><b>Storage</b><br /><ul><li>USB Pen drive data-logging</li><li>SD Card logging</li></ul><b>Control</b><br /><ul><li>Relay</li></ul><b>Firmware</b><br /><ul><li>Watchdog timer</li><li>Structures for transmitting data.</li><li>Sleep mode</li><li>String constructor</li></ul>Github sketches for the fundamentals section could be contained in one github folder called fundamentals.<br /><br /><span class="Apple-style-span" style="font-size: large;"><b>Tools</b></span><br />Tools that can be useful in debugging / development of systems:<br /><ul><li>VI Sampler</li><li>KST based graphing and statistics</li><li>Programming nanode with arduino</li></ul><span class="Apple-style-span" style="font-size: large;"><b>Archive</b></span><br />Items for archive<br /><br /><b>Other changes</b><br />We've disabled comments on pages, the thinking here is that its getting quite hard to navigate the page comments as conversations at different dates and topics are all getting mixed together and that it would be better to have these discussions on the forum, where each forum thread has its own clear topic.<br /><br />Every page can be put in a&nbsp;hierarchical&nbsp;order such as modules/hardware/emontx making navigation clearer.<br /><br />A site map with all of the above.<br /><br /><span class="Apple-style-span" style="font-size: large;">Do you think this is a good idea?&nbsp;</span><br />Any suggestions on how the website content can be better arranged would be greatly welcomed!<br />Thankyou!
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/02/18/emoncms-features-part-2-email-notifier/">New emoncms features part 2 - Email notifier</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-02-18T23:31:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span>
    <span><i class='icon-time'></i> three minutes reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/email-notifications/'>email notifications</a></li>
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
        <li><a class='category' href='/categories/energy-monitoring/'>energy monitoring</a></li>
      
        <li><a class='category' href='/categories/openenergymonitor/'>openenergymonitor</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/02/18/emoncms-features-part-2-email-notifier/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;">Its good to know as soon as possible if there is an issue with an installed energy monitor, such as the base station dropping offline or a problem with RF connection. This is a rough and ready first implementation of an email notifier for emoncms, that sends you an email to say that a feed has become inactive or a feed is&nbsp;equal&nbsp;to a certain value. No longer are the days when you log in to emoncms just to find that there are two days of missing data as&nbsp;happened&nbsp;to me on feb 6-7 <a href="http://openenergymonitor.org/emon/emoncms/showcase">here</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b>A walkthrough</b></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">1) Click on a feed in the feed list to bring up the feed view page, scroll down to the bottom and click on set notifications:</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-oUq0bwGDyiQ/T0AoJkpEZNI/AAAAAAAACX0/cI3odOAz6P8/s1600/notift_feedview.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="230" src="http://1.bp.blogspot.com/-oUq0bwGDyiQ/T0AoJkpEZNI/AAAAAAAACX0/cI3odOAz6P8/s320/notift_feedview.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">2) Select the events that you want notifications for. Notification on value and on inactive both work. Periodic notification is yet to be implemented.</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Q8in3h0PPZ0/T0AoeSLmCFI/AAAAAAAACX8/GXJCyeeQjZU/s1600/notify_feedsettings.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-Q8in3h0PPZ0/T0AoeSLmCFI/AAAAAAAACX8/GXJCyeeQjZU/s320/notify_feedsettings.png" width="216" /></a></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />3) Click on edit mail settings and enter in the recipient email address. This only has to be done once as it is the same for all notifications.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-4U29I5trf2c/T0ApRWFl_5I/AAAAAAAACYE/0z7LJZ02xMQ/s1600/notify_recipients.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="222" src="http://1.bp.blogspot.com/-4U29I5trf2c/T0ApRWFl_5I/AAAAAAAACYE/0z7LJZ02xMQ/s320/notify_recipients.png" width="320" /></a></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />If you want to send the notifications to multiple&nbsp;addresses, just put in a comma between each address.<br /><br />4) Unplug your emonbase!! and check your email:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-_woWFUXfPMo/T0ApmAkoAlI/AAAAAAAACYM/GlkiXxJQ-uM/s1600/notify_emailsubject.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="19" src="http://3.bp.blogspot.com/-_woWFUXfPMo/T0ApmAkoAlI/AAAAAAAACYM/GlkiXxJQ-uM/s320/notify_emailsubject.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-r3iUkNr2rbs/T0AppLU7ICI/AAAAAAAACYU/CHQufBFe38s/s1600/notift_emailbody.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="95" src="http://1.bp.blogspot.com/-r3iUkNr2rbs/T0AppLU7ICI/AAAAAAAACYU/CHQufBFe38s/s320/notift_emailbody.png" width="320" /></a></div><b><br /></b><br /><b><br /></b><br /><b><br /></b><br /><b><br /></b><br /><b><br /></b><br /><div style="text-align: left;"><b><br /></b></div><div style="text-align: left;">It can be tried out here:&nbsp;<a href="http://vis.openenergymonitor.org/emoncms3">http://vis.openenergymonitor.org/emoncms3</a></div><b><br /></b><br /><b>Behind the scenes</b><br /><b><br /></b><br /><b>Main scripts:</b><br /><b><span class="Apple-style-span" style="font-weight: normal;"></span></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Models/notify_model.php">notify_model.php</a></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Models/mail_model.php">mail_model.php</a></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Controllers/notify_controller.php">notify_controller.php</a></b><br /><b><a href="https://github.com/openenergymonitor/emoncms3/blob/master/Views/notify_view.php">notify_view.php</a></b><br /><br /><b><br /></b><br /><b>Installation/Setup</b><br />1) To use the notifier on your own server you will need php mail installed, to do this on ubuntu enter the following into terminal<br /><br /><span class="Apple-style-span" style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px;">sudo apt-get install php-pear<br />sudo pear install mail<br />sudo pear install Net_SMTP<br />sudo pear install Auth_SASL<br />sudo pear install mail_mime</span><br /><b><br /></b><br />2) In emoncms3/Includes copy the default.mail_settings.php file and rename too<a href="https://github.com/openenergymonitor/emoncms3/blob/master/Includes/default.mail_settings.php"> mail_settings.php</a> and enter in your mail server settings.<br /><br />3) Open the file <a href="https://github.com/openenergymonitor/emoncms3/blob/master/cron.php">cron.php</a>&nbsp;and change the key password to something unique, this is used to ensure that only you can run the cron.php script.<br /><br />4) Create a cronjob, in ubuntu start by opening crontab:&nbsp;$ crontab -e<br />Then add a cronjob that calls the cron.php script including the key that you created. To call the cron.php script once a&nbsp;minute&nbsp;try the following:<br /><br /><br /># m h &nbsp;dom mon dow &nbsp; command<br />* * * * * wget -q -O /dev/null "http://localhost/emoncms3/cron.php?key=YOURKEY<br /><br /><br />5) If your using the same database as a previous emoncms version, you will need to create the new notify database tables. This can be done in index.php by pasting <b>require "Includes/setup.php"; </b>in the top. Its probably worth removing it afterwards.<br /><br />6) Configure your feeds as in the screens above!
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/02/18/new-emoncms-features-part-1-blue/">New emoncms features part 1: blue message bar</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-02-18T22:14:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span>
    <span><i class='icon-time'></i> less than one minute reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/02/18/new-emoncms-features-part-1-blue/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Spent a bit of time implementing new features for emoncms today, the first one was a much needed but quite small addition: a themed location to output messages such as "user already exists" and so on, see the blue bar in the screen below:<br /><br /><a href="http://2.bp.blogspot.com/-XwN8DaZEyjE/T0AeWhkvpMI/AAAAAAAACXo/WpPIvGWjbus/s1600/bluebar.png"><img border="0" src="http://2.bp.blogspot.com/-XwN8DaZEyjE/T0AeWhkvpMI/AAAAAAAACXo/WpPIvGWjbus/s400/bluebar.png" /></a><br /><br />Try it out here: <a href="http://vis.openenergymonitor.org/emoncms3/">http://vis.openenergymonitor.org/emoncms3/</a><br /><br /><b>How it works</b><br /><br />If you have a look at the user_controller here<a href="https://github.com/openenergymonitor/emoncms3/blob/master/Controllers/user_controller.php"> github user_controller.php</a><br />On line 28 and 29 you will see the following:<br /><br />$output['content'] = "";<br />$output['message'] = "";<br />(ie line 65) $output['message'] = "Your new account has been created";<br /><br />The returned output from the controllers used to be just the one variable $output now we have two, one for main body content output and the other for message bar output. These variables are passed through <a href="https://github.com/openenergymonitor/emoncms3/blob/master/index.php">index.php</a> to the theme The <a href="https://github.com/openenergymonitor/emoncms3/blob/master/Views/theme/dark/theme.php">theme</a> then places the message and content in separately themed locations.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/02/13/if-you-are-active-member-of/">3 Phases AC monitoring</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-02-13T11:49:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Bouha</span>
    <span><i class='icon-time'></i> four minutes reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/3phases/'>3phases</a></li>
      
        <li><a class='category' href='/categories/dc-current-sensing/'>DC current sensing</a></li>
      
        <li><a class='category' href='/categories/electronics/'>electronics</a></li>
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
        <li><a class='category' href='/categories/energy-monitoring/'>energy monitoring</a></li>
      
        <li><a class='category' href='/categories/open-source/'>open source</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/02/13/if-you-are-active-member-of/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div dir="ltr" style="text-align: left;" trbidi="on">Note: this topic is still in development, there is an on-going discussion on the forum:&nbsp;<a href="http://openenergymonitor.org/emon/node/431">http://openenergymonitor.org/emon/node/431</a><br /><br />If you are an active member of OpenEnergyMonitor.org, then you know for sure that one of the challenges the project is facing is monitoring tri-phase AC systems (220V-400V).<br /><div>In theory it is as simple and easy as monitoring three one-phase systems with one voltage sensor per voltage phase, but in real life, it is not as easy as that.</div><div>Most of the time, plugs of the different phases are far from each others, and often there are no plugs for one or more phases (if it's for a special purpose like a night water heater). So this implies cabling one plug for each of the three phases in the cabinet and using 3 voltage sensors.</div><div><br /></div><div>This would hit one of the most important&nbsp;features of OpenEnergyMonitor: non-invasiveness.&nbsp;It would imply significantly more cabling and electrical work, this would also mean higher costs.</div><div><br /></div><div>I happen to know enough about principles of electrical power to be convinced that we can use one voltage sensor and three current sensors to monitor three-phases systems. Here is the theory:</div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-QxOn2-0s1_8/Tzjt2UEskxI/AAAAAAAAAQw/FeAWyFnM0nY/s1600/acp50.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-QxOn2-0s1_8/Tzjt2UEskxI/AAAAAAAAAQw/FeAWyFnM0nY/s1600/acp50.gif" /></a></div><div class="separator" style="clear: both; text-align: center;"><i><span style="font-size: xx-small;">Source:&nbsp;http://www.electronics-tutorials.ws/</span></i></div><div class="separator" style="clear: both; text-align: left;">The three voltage vectors are <b>always</b> shifted by 120°. What changes is the angle between a certain phase voltage and current vectors (a change caused by the properties of your load, but that's another story). So if the angle between two voltage vectors is always the same, then the phase shift of a current vector to the another phase voltage vector is exactly the phase shift of that current vector to its voltage vector + 120°.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b>Example from the figure above:</b></div><div class="separator" style="clear: both; text-align: left;">Phaseshift of red phase current and voltage= Phaseshift of red current vector and yellow voltage vector.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">So if we calculate the power factor of a current with any other voltage, we will of course get a wrong one, but we can always shift it by 120° and get the right one.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">I have a setup of what I call "See-a-Watt" (which is basically a device based on the plans and code of OpenEnergyMonitor, but that combines data acquisition ethernet connection) installed in a building on the campus of my university, with access to a three-phases installation. So I decided to test the theory there.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The approach is as follows:</div><div class="separator" style="clear: both; text-align: left;"></div><ol style="text-align: left;"><li>Sample one voltage waveform out of three</li><li>Sample three current waveforms (of each phase</li><li>Calculate the phase shift (aka. power factor) of each of the three current waveforms to the one voltage waveform.</li><li>Send Vrms1, I1,I2, I3 and the power factors relative to each phase to emonCMS</li><li>Reverse the power factors to get the "wrong" phase, then compensate it with&nbsp;120° and recalculate the "right" power factor</li><li>Calculate the "right" powers = Ix * Vrms1 *'correct PF'</li></ol><br /><div class="separator" style="clear: both; text-align: left;">With the help of Trystan (he's much better with PHP than me and he knows emonCMS like the back of his hand) we implemented a function in emonCMS that reverses the "wrong" PF to the "wrong" phase shift angle, then shift it by + or -&nbsp;120° and recalculate the PF.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">This setup is working now for more than 6 weeks without any problem and the accuracy is comparable to the traditional accuracy of the non-invasive method: 1-2% not more.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Here is the code on the device side:&nbsp;<a href="https://github.com/AminfiBerlin/See-a-Watt-3-Phases">https://github.com/AminfiBerlin/See-a-Watt-3-Phases</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">and here is the commit on emonCMS that introduced the phaseshift function:&nbsp;<a href="https://github.com/openenergymonitor/emoncms3/commit/a41c57d457df77697540b1a89a74486951e058ee">https://github.com/openenergymonitor/emoncms3/commit/a41c57d457df77697540b1a89a74486951e058ee</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Needless to say that this is still in beta, I did not have any problem with it so far but that doesn't mean it's perfect. Please feel free to download the code and test it in every possible way.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><i>This is my first real contribution to any OpenSource project at all, I feel so proud and happy to be able to give back as much as I can.</i></div><div class="separator" style="clear: both; text-align: left;"><i><br /></i></div><div class="separator" style="clear: both; text-align: left;"><i>By&nbsp;<span class="Apple-style-span" style="background-color: white; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px;"><a href="http://openenergymonitor.org/emon/user/15">Amin Zayani</a></span></i></div><div><br /></div></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/01/28/community-energy-plan-maker/">Community Energy Plan maker</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-01-28T11:44:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span>
    <span><i class='icon-time'></i> three minutes reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/community-energy/'>community energy</a></li>
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/01/28/community-energy-plan-maker/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div>Over the last year Glyn Hudson, Bethan Gritten and I have been running a community energy project with our local sustainability group <a href="http://ecobro.org/">Ecobro</a> in the Penrhyndeudraeth area of North Wales. The aim of the project is to create a comprehensive snapshot of our current energy use as a group that we can then use as a solid foundation for creating a sustainable energy action plan.</div><div><br /></div><div>As part of the project we have installed 20 <a href="http://openenergymonitor.blogspot.com/2012/01/full-web-connected-home-energy.html">openenergymonitor energy monitors </a>and have also developed for the project a community energy auditing and plan making application which is what this blog post is about.</div><div><br /></div><div>This is how the application works:</div><div><br /></div><div class="separator" style="clear: both; text-align: left;">1) Fill out a single household energy audit, compare&nbsp;how your energy picture compares to the average UK household energy use and how it relates to the <a href="http://www.cat.org.uk/">Centre for Alternative Technology</a> <a href="http://zerocarbonbritain.org/">Zero Carbon Britain 2030</a> energy scenario:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-BlIYoN7otrA/TyO7TdrsvdI/AAAAAAAACWs/2OtjK0cZadQ/s1600/audit.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="358" src="http://3.bp.blogspot.com/-BlIYoN7otrA/TyO7TdrsvdI/AAAAAAAACWs/2OtjK0cZadQ/s640/audit.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">2) Aggregate data from each household to create a group view:</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-UIo-RhuIDIg/TyO7Vu1gknI/AAAAAAAACW0/Z6ClbpcYRxg/s1600/groupview.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="358" src="http://4.bp.blogspot.com/-UIo-RhuIDIg/TyO7Vu1gknI/AAAAAAAACW0/Z6ClbpcYRxg/s640/groupview.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">3) Explore how group scenario is built up of individual households contribution:</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-43yLrb4orGU/TyO8ih5xgmI/AAAAAAAACXI/Xb8VBwGJlr0/s1600/group_current.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="358" src="http://2.bp.blogspot.com/-43yLrb4orGU/TyO8ih5xgmI/AAAAAAAACXI/Xb8VBwGJlr0/s640/group_current.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">4) Explore future energy scenarios, see the effect of switching to electric cars, heatpumps etc on real household data from your group:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-DHa-L1C_ZAg/TyO817KIdBI/AAAAAAAACXQ/6NZxrqs1dko/s1600/future_scenario.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="358" src="http://2.bp.blogspot.com/-DHa-L1C_ZAg/TyO817KIdBI/AAAAAAAACXQ/6NZxrqs1dko/s640/future_scenario.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">5) In the next version, see effect of energy efficiency measures, insulation,&nbsp;draft-proofing&nbsp;and see the cost and payback details of scenarios including a comparison of different measures by <i>sustainable energy % increase impact per £</i>.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The idea is that through this process we can help bring focus to areas and solutions that can have most impact and also give a tangible reference of progress so that milestones can be celebrated when achieved.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The application is largely inspired by David Mackay's book <a href="http://www.withouthotair.com/">Sustainable Energy Without the Hot Air</a>&nbsp;(free to read online)&nbsp;as you can see from the use of the energy stacks. The aim is also very much about creating a tool that helps to create sustainable energy plans that add up and in the spirit of openenergymonitor and David Mackay's book the application is open source.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b>Download the source from github:&nbsp;</b><a href="https://github.com/openenergymonitor/CommunityEnergyPlanMaker">https://github.com/openenergymonitor/CommunityEnergyPlanMaker</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b>Try it out:</b></div><div class="separator" style="clear: both; text-align: left;"><a href="http://vis.openenergymonitor.org/cepm/">http://vis.openenergymonitor.org/cepm/</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">If you would like to help with development that would be great, please get in contact / send us github pull requests. If your doing a community energy plan making project and would like to use this tool, please do and let us know how your using it.&nbsp;</div><div class="separator" style="clear: both; text-align: center;"></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/01/18/openenergymonitor-in-france/">University campus energy monitoring in France</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-01-18T14:44:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Baptiste Gaultier</span>
    <span><i class='icon-time'></i> 1 minute reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/01/18/openenergymonitor-in-france/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Hello, my name is Baptiste Gaultier<span class="Apple-style-span" style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 14px; font-weight: bold; white-space: nowrap;">.&nbsp;</span>When I started working on the project of monitoring the energy consumption of <a href="http://www.telecom-bretagne.eu/index.php?lang=en_GB" target="_blank">Telecom Bretagne</a> (an engineering school in Brittany, France), I was looking for products which can measure, store, and track the energy consumption data of a typical university campus.<br /><br />After spending some time researching the available solutions, I found a lot of expensive proprietary products and a project you may have heard of, called openenergymonitor. This project provides a very powerful, web-connected energy monitoring system, and the best part is that it is open-source !<br /><br />I started to work on top of emonTx and emoncms and here are some new features I added to emoncms (the new hardware features will be addressed in a future blog post)&nbsp; :<br /><ul><li><b>Map widget :</b> allows you to see a map with all the sensors used for energy monitoring</li><li><b>Device manager :</b> provides an easy way to add devices on the map widget</li><li><b>Node information widget :</b> allows you to see all information (hostname, IP addresses, device type, power measured...) of a monitoring node</li></ul><br /><b><span style="font-size: large;">Screenshots</span></b><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Oip7SvjTItk/TxbYbhp0D2I/AAAAAAAAApM/GI-XQCGa3bU/s1600/Screenshot+emoncms.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="330" src="http://3.bp.blogspot.com/-Oip7SvjTItk/TxbYbhp0D2I/AAAAAAAAApM/GI-XQCGa3bU/s400/Screenshot+emoncms.png" width="400" /></a></div><div style="text-align: center;"><span style="font-size: x-small;"><b>Dashboard with my university campus map</b></span></div><br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-y2LQMvjvSKA/TxbY1QyQ-MI/AAAAAAAAApU/rMtGncCPhgA/s1600/Device+manager+screenshot.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="362" src="http://1.bp.blogspot.com/-y2LQMvjvSKA/TxbY1QyQ-MI/AAAAAAAAApU/rMtGncCPhgA/s400/Device+manager+screenshot.png" width="400" /></a></div><div style="text-align: center;"><span style="font-size: x-small;"><b>Device manager tab</b></span></div><br /><br />We have made some progress, but we have still a lot of work to do before our goals are met, most notably:<br /><ul><li>Tagging and renaming the devices</li><li>Displaying the energy chart when clicking on a node</li><li>Drag and drop node positioning on a map (device manager)</li><li>Node filtering (depending on power consumption for instance)</li><li>How to use the map widget (documentation)&nbsp;</li></ul>The code has been released on github (I forked couple of days ago) : <a href="https://github.com/bgaultier/emoncms3/tree/devicemanager">https://github.com/bgaultier/emoncms3/tree/devicemanager</a><br /><br />The entire team working on the project at <a href="http://www.telecom-bretagne.eu/index.php?lang=en_GB" target="_blank">Telecom Bretagne</a> is convinced of the great quality of the openenergymonitor project and we hope our work may be useful in any way.<br /><br />Cheers !
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/01/17/emonglcd-getting-time-for-internet/">emonGLCD - getting time for the internet</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-01-17T11:36:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span>
    <span><i class='icon-time'></i> 1 minute reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emonglcd/'>emonGLCD</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/01/17/emonglcd-getting-time-for-internet/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    The <a href="http://openenergymonitor.org/emon/emonglcd">emonGLCD</a> is an open-hardware wireless graphical LCD display based on the&nbsp;ATmega328&nbsp;microcontroller&nbsp;and is Arduino&nbsp;compatible.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/--piGVImV4Jc/TxTIRxzzGRI/AAAAAAAAZO8/u3XS1GuN0gA/s1600/emonGLCD_lab.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="240" src="http://2.bp.blogspot.com/--piGVImV4Jc/TxTIRxzzGRI/AAAAAAAAZO8/u3XS1GuN0gA/s320/emonGLCD_lab.jpg" width="320" /></a></div><br /><br />The emonGLCD works very well as a real-time living room energy monitoring display. For the <a href="http://openenergymonitor.org/emon/emonglcd">emonGLCD</a> to calculate and display how much energy has been used on the current day it must know when the day begins and ends. Therefore it must know the current time.<br /><br />The emonGLCD does not have a hardware RTC but its possible to implement a very accurate clock using the<a href="https://github.com/jcw/rtclib"> Jeelabs software RTC library</a> and a web-connected Nanode RF. In the <a href="http://openenergymonitor.blogspot.com/2012/01/full-web-connected-home-energy.html">OpenEnergyMonitor end-to-end energy monitoring system</a> the emonGLCD is used in conjunction with the <a href="http://openenergymonitor.org/emon/emontx">emonTx</a> (transmitter) and <a href="http://openenergymonitor.org/emon/emonbase">emonBase/NanodeRF </a>which is used to post data&nbsp;on-line&nbsp;to <a href="http://openenergymonitor.org/emon/emoncms">emoncms.</a><br /><br />When data is posted to the emoncms sever with a http request the sever&nbsp;response contains the current time of the sever. We have written a code example to extract this time from the http header reply and pass it via RFM12B wireless to the emonGLCD. The time on the emonGLCD is always correct. Both the emonGLCD and the NanodeRF receive power monitoring data from the emonTx<br /><br />Demo video (single CT sensor system):<br /><br /><iframe allowfullscreen="" frameborder="0" height="315" src="http://www.youtube.com/embed/QeEXKzrEJ6U" width="420"></iframe><br /><br />Demo video (solar PV monitor system):<br /><br /><iframe allowfullscreen="" frameborder="0" height="315" src="http://www.youtube.com/embed/bGyoscibR04" width="420"></iframe><br /><br />Taking this a step further: when the emonGLCD receives the time from the NanodeRF the emonGLCD&nbsp;transmits&nbsp;back the current room temperature from it's on-board temperature sensor, then the NanodeRF posts this online to emoncms.<br /><br />The Arduino sketch examples are up on github:<br /><br />emonBase/NanodeRF:<br /><a href="https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_singleCT_RTCrelay_GLCDtemp">https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_singleCT_RTCrelay_GLCDtemp</a><br /><br />emonGLCD single CT:<br /><a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_singleCT_AutoTime_TempLog">https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_singleCT_AutoTime_TempLog</a><br /><br />emonGLCd solar PV:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_solarPV_type_1_and_2">https://github.com/openenergymonitor/EmonGLCD/tree/master/emonGLCD_solarPV_type_1_and_2</a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/01/14/full-web-connected-home-energy/">Full web-connected home energy monitoring system</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-01-14T14:02:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span>
    <span><i class='icon-time'></i> 1 minute reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/end-to-end/'>end-to-end</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2012/01/14/full-web-connected-home-energy/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;">The mission of the OpenEnergyMonitor project is to design and build and open-source energy monitoring and eventually control system. We would like this system to be work well for home energy monitoring systems but also be scalable. For more information see our newly updated&nbsp;<a href="http://openenergymonitor.org/emon/vision" style="text-align: left;">project vision</a><span class="Apple-style-span" style="text-align: left;">.</span></div><div class="separator" style="clear: both; text-align: left;"><span class="Apple-style-span" style="text-align: left;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span class="Apple-style-span" style="text-align: left;">We are now at the stage were we have a fully functional end-to-end web-connected home energy monitoring system. We have recently written a full&nbsp;<a href="http://openenergymonitor.org/emon/applications/homeenergy">step-by-step build guide for the system</a>. This build guide covers everything from assembling the electronics, uploading the Arduino firmware to setting the web dashboard.&nbsp;</span></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-tB9AiNhb9nc/TxGHRRQ-D8I/AAAAAAAAZO0/veKjKKazHqg/s1600/singlectmonitor.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="265" src="http://3.bp.blogspot.com/-tB9AiNhb9nc/TxGHRRQ-D8I/AAAAAAAAZO0/veKjKKazHqg/s400/singlectmonitor.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The system consists of three wireless hardware units <a href="http://openenergymonitor.org/emon/emontx">emonTx</a> (transmitter), <a href="http://openenergymonitor.org/emon/emonGLCD">emonGLCD</a> (display), <a href="http://openenergymonitor.org/emon/emonbase">emonBase</a> (web-connected base&nbsp;station) and a powerful web-application <a href="http://openenergymonitor.org/emon/emoncms">emoncms</a>.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">We also have build guide/documentation for setting up a <a href="http://openenergymonitor.org/emon/applications/solarpv">solar PV monitoring system</a> using the same modules.&nbsp;</div><br />
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2011/12/26/solar-pv-monitoring/">Solar PV Monitoring</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2011-12-26T18:07:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span>
    <span><i class='icon-time'></i> two minutes reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emontx/'>emonTx</a></li>
      
        <li><a class='category' href='/categories/solarpv/'>solarPV</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="/2011/12/26/solar-pv-monitoring/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-t1jHEIdfdvY/TvhH5UHGVVI/AAAAAAAAZOI/IctPiZlWUz4/s1600/House%252C+emonGLCD%252C+emoncms.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><br /><img border="0" height="363" src="http://2.bp.blogspot.com/-t1jHEIdfdvY/TvhH5UHGVVI/AAAAAAAAZOI/IctPiZlWUz4/s640/House%252C+emonGLCD%252C+emoncms.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">I have just finished detailed documentation of an OpenEnergyMonitor Solar PV Monitor system see:&nbsp;<a href="http://openenergymonitor.org/emon/applications/solarpv">http://openenergymonitor.org/emon/applications/solarpv</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The system monitors both generation and consumption and gives the user a clear indication of when their household electricity&nbsp;demands are being met by their solar PV array (green light on display) or when their not (red light on display). The display also shows how much electricity is currently being exported or imported.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The system is web connected, posting data to emoncms for logging and historical visualisation.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">It has been suggested that installing a solar PV system results in decreased energy consumption and consumption pattern changes due to increased awareness of energy consumption verses generation. To enable these effects to take place the home owner needs generation level put into context with consumption level, in real-time. The&nbsp;OpenEnergyMonitor Solar PV monitoring system does just this, by simultaneously monitoring and displaying both generation and consumption.&nbsp;Most energy monitors currently available either monitor generation <i>or </i>consumption, not both.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The system is based on the emonTx, emonGLCD, emonBase and emoncms. All hardware and software are open-source and have been developed by OpenEnergyMonitor and&nbsp;contributors.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">We would like to be able to offer the system pre-assembled in the future.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Please use the <a href="http://openenergymonitor.org/emon/forum">forums</a>&nbsp;for discussion.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Here's a bit of background to solar PV monitoring in the UK:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><i>The Feed in Tariff scheme (FIT)currently running in the UK pays the home owner a fixed amount per kWh generated, the home owner also gets paid a much smaller amount per kWh exported. At the moment (Dec 2011) most homes in the UK don't have export or smart meters fitted, utility companies assume, for calculation purposes that the home owner exports half of the power they generate. The cost of importing power from the grid is higher than the amount paid per unit of exported electricity. Therefore it makes financial sense for the home owner to use as much of their generated power as is possible.<br /><br />A monitoring system with a real-time living room display indicating the amount of power being imported/exported allows the home owner to attempt to match their power consumption to the power being generated. I.e. make tea when the sun is shining! Financial benefits aside it can be very interesting and satisfying to monitor the yield of your solar PV system.&nbsp;</i>
    
  </div>
  </article>
  <hr>
  
 
  <div class="pagination">
    
      <a class="btn pull-left" href="/posts/25">&larr; Older</a>
    

    
    <a class="btn pull-right" href="/posts/23">Newer &rarr;</a>
    
  </div>


        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">

  
  
  
    <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">OpenEnergyMonitor</h1>
  <ul class="divided">
    <li>
      A project to develop open-source energy monitoring tools to help us relate to our use of energy, our energy systems and the challenge of sustainable energy.
    </li>
    <li><a href='https://openenergymonitor.org/emon/opensustech'>Open-Source Tools</a></li>
    <li><a href='https://openenergymonitor.org/emon/sustainable-energy'>Sustainable Energy</a> </li>
  </ul>
  <p>
  <h1 class="title delta">Emoncms</h1>
  <ul class="divided">
    <li>
      Emoncms is a powerful open-source web-app for processing, logging and visualising energy, temperature and other environmental data.
    </li>
    <li><a href='https://emoncms.org'>Emoncms.org</a></li>
    <li><a href='https://github.com/emoncms'>Emoncms Github</a> </li>
  </ul>
</section>
  
  
  
  
  
     <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Categories</h1>
  <ul class="divided">
    
    
      <li><a href="/categories/./">.</a></li>
    
      <li><a href="/categories/3phases/">3phases</a></li>
    
      <li><a href="/categories/air quality egg/">Air Quality Egg</a></li>
    
      <li><a href="/categories/android/">Android</a></li>
    
      <li><a href="/categories/antenna/">Antenna</a></li>
    
      <li><a href="/categories/building energy modelling/">Building Energy Modelling</a></li>
    
      <li><a href="/categories/china/">China</a></li>
    
      <li><a href="/categories/christmas/">Christmas</a></li>
    
      <li><a href="/categories/course/workshop/">Course/Workshop</a></li>
    
      <li><a href="/categories/dc/">DC</a></li>
    
      <li><a href="/categories/dc current sensing/">DC current sensing</a></li>
    
      <li><a href="/categories/esp8266/">ESP8266</a></li>
    
      <li><a href="/categories/heat pump/">Heat Pump</a></li>
    
      <li><a href="/categories/kaizen/">Kaizen</a></li>
    
      <li><a href="/categories/kicad/">KiCad</a></li>
    
      <li><a href="/categories/mqtt/">MQTT</a></li>
    
      <li><a href="/categories/nanoderf/">NanodeRF</a></li>
    
      <li><a href="/categories/nodered/">NodeRed</a></li>
    
      <li><a href="/categories/oem labs/">OEM Labs</a></li>
    
      <li><a href="/categories/okg/">OKG</a></li>
    
      <li><a href="/categories/oscilloscope/">Oscilloscope</a></li>
    
      <li><a href="/categories/rfm12/">RFM12</a></li>
    
      <li><a href="/categories/rfm69/">RFM69</a></li>
    
      <li><a href="/categories/rs485/">RS485</a></li>
    
      <li><a href="/categories/sap 2012/">SAP 2012</a></li>
    
      <li><a href="/categories/shw/">SHW</a></li>
    
      <li><a href="/categories/srf/">SRF</a></li>
    
      <li><a href="/categories/tasker/">Tasker</a></li>
    
      <li><a href="/categories/test/">Test</a></li>
    
      <li><a href="/categories/ad/">ad</a></li>
    
      <li><a href="/categories/app/">app</a></li>
    
      <li><a href="/categories/arduino/">arduino</a></li>
    
      <li><a href="/categories/award/">award</a></li>
    
      <li><a href="/categories/backup/">backup</a></li>
    
      <li><a href="/categories/batteries/">batteries</a></li>
    
      <li><a href="/categories/benchmarking/">benchmarking</a></li>
    
      <li><a href="/categories/build sesh/">build sesh</a></li>
    
      <li><a href="/categories/business/">business</a></li>
    
      <li><a href="/categories/ciseco/">ciseco</a></li>
    
      <li><a href="/categories/community energy/">community energy</a></li>
    
      <li><a href="/categories/control/">control</a></li>
    
      <li><a href="/categories/current sensor/">current sensor</a></li>
    
      <li><a href="/categories/current transformer/">current transformer</a></li>
    
      <li><a href="/categories/dashboard/">dashboard</a></li>
    
      <li><a href="/categories/display/">display</a></li>
    
      <li><a href="/categories/diy drones/">diy drones</a></li>
    
      <li><a href="/categories/documentation/">documentation</a></li>
    
      <li><a href="/categories/efergy/">efergy</a></li>
    
      <li><a href="/categories/electronics/">electronics</a></li>
    
      <li><a href="/categories/elektrocamp/">elektrocamp</a></li>
    
      <li><a href="/categories/email notifications/">email notifications</a></li>
    
      <li><a href="/categories/embodied energy/">embodied energy</a></li>
    
      <li><a href="/categories/emocms/">emocms</a></li>
    
      <li><a href="/categories/emonbase/">emonBase</a></li>
    
      <li><a href="/categories/emonctrl/">emonCtrl</a></li>
    
      <li><a href="/categories/emonglcd/">emonGLCD</a></li>
    
      <li><a href="/categories/emonpi/">emonPi</a></li>
    
      <li><a href="/categories/emonth/">emonTH</a></li>
    
      <li><a href="/categories/emontx/">emonTx</a></li>
    
      <li><a href="/categories/emontx v2/">emonTx V2</a></li>
    
      <li><a href="/categories/emontxsmt/">emonTxSMT</a></li>
    
      <li><a href="/categories/emontxshield/">emonTxShield</a></li>
    
      <li><a href="/categories/emoncms/">emoncms</a></li>
    
      <li><a href="/categories/end-to-end/">end to end</a></li>
    
      <li><a href="/categories/energy monitor/">energy monitor</a></li>
    
      <li><a href="/categories/energy monitoring/">energy monitoring</a></li>
    
      <li><a href="/categories/feed storage/">feed storage</a></li>
    
      <li><a href="/categories/film/">film</a></li>
    
      <li><a href="/categories/graphing/">graphing</a></li>
    
      <li><a href="/categories/hackathon/">hackathon</a></li>
    
      <li><a href="/categories/hall effect/">hall effect</a></li>
    
      <li><a href="/categories/hardware/">hardware</a></li>
    
      <li><a href="/categories/heating/">heating</a></li>
    
      <li><a href="/categories/home camp/">home camp</a></li>
    
      <li><a href="/categories/humidity/">humidity</a></li>
    
      <li><a href="/categories/interface/">interface</a></li>
    
      <li><a href="/categories/interview/">interview</a></li>
    
      <li><a href="/categories/java/">java</a></li>
    
      <li><a href="/categories/job/">job</a></li>
    
      <li><a href="/categories/kickstarter/">kickstarter</a></li>
    
      <li><a href="/categories/linux/">linux</a></li>
    
      <li><a href="/categories/logo/">logo</a></li>
    
      <li><a href="/categories/manufacturing/">manufacturing</a></li>
    
      <li><a href="/categories/measurement/">measurement</a></li>
    
      <li><a href="/categories/media/">media</a></li>
    
      <li><a href="/categories/mobile/">mobile</a></li>
    
      <li><a href="/categories/modbus/">modbus</a></li>
    
      <li><a href="/categories/n/">n</a></li>
    
      <li><a href="/categories/nanode/">nanode</a></li>
    
      <li><a href="/categories/open source/">open source</a></li>
    
      <li><a href="/categories/openhab/">openHAB</a></li>
    
      <li><a href="/categories/openenergymonitor/">openenergymonitor</a></li>
    
      <li><a href="/categories/optical pulse/">optical pulse</a></li>
    
      <li><a href="/categories/pcb/">pcb</a></li>
    
      <li><a href="/categories/pebble/">pebble</a></li>
    
      <li><a href="/categories/pluse/">pluse</a></li>
    
      <li><a href="/categories/presentation/">presentation</a></li>
    
      <li><a href="/categories/raspberry pi/">raspberry pi</a></li>
    
      <li><a href="/categories/renewable/">renewable</a></li>
    
      <li><a href="/categories/serial/">serial</a></li>
    
      <li><a href="/categories/shop/">shop</a></li>
    
      <li><a href="/categories/showcase/">showcase</a></li>
    
      <li><a href="/categories/smartwatch/">smartwatch</a></li>
    
      <li><a href="/categories/social energy monitoring/">social energy monitoring</a></li>
    
      <li><a href="/categories/solarpv/">solarPV</a></li>
    
      <li><a href="/categories/sparkfun/">sparkfun</a></li>
    
      <li><a href="/categories/sustainability/">sustainability</a></li>
    
      <li><a href="/categories/temperature/">temperature</a></li>
    
      <li><a href="/categories/three phase/">three phase</a></li>
    
      <li><a href="/categories/tutorials/">tutorials</a></li>
    
      <li><a href="/categories/upgrade/">upgrade</a></li>
    
      <li><a href="/categories/utility meters/">utility meters</a></li>
    
      <li><a href="/categories/voltage sensing/">voltage sensing</a></li>
    
      <li><a href="/categories/wind/">wind</a></li>
    
      <li><a href="/categories/wind turbine/">wind turbine</a></li>
    
      <li><a href="/categories/wireless/">wireless</a></li>
    
      <li><a href="/categories/workshop/">workshop</a></li>
    
  </ul>
</section>
  
</div>
        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">
  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor'><i class="icon-github"></i></a>

  <div class="credit">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and the <a href='https://github.com/coogie/oscailte'>Oscalite theme</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
</div>
    </div>
  </div>
</div>
    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script>
  var _gaq=[['_setAccount','UA-10321170-4'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<script>
  var disqus_shortname = 'openenergymonitor';
  
    
    var disqus_script = 'count.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>


<script>
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>

  </body>
</html>