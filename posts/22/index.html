<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blog | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="OpenEnergyMonitor Blog">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://blog.openenergymonitor.org/posts/22/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Blog | OpenEnergyMonitor">
    <meta property="og:site_name" content="Blog | OpenEnergyMonitor">
    <meta property="og:url" content="https://blog.openenergymonitor.org/posts/22/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Blog | OpenEnergyMonitor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Blog | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />



    <link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
	<link rel="apple-touch-icon" href="/images/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/images/favicon-144.png">
	<meta name="msapplication-config" content="/images/browserconfig.xml">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:light,bold&amp;subset=Latin" rel="stylesheet"> <!-- Ubuntu font -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  </head>

<style>

html, body {
  margin: 0; height: 100vh;
}

html {
  min-height: 100vh;
}

html, body {
  word-wrap: break-word;
  font-family: "ubuntu", sans-serif;
}

a:visited, .a:hover, a:focus, a {
  color: #44b3e2;
}

.meta.clearfix {
  overflow-x: hidden;
}

.communityWrapper {
  box-sizing: border-box;
  margin: 0 auto;
  width: 100%;
  height: 42px;
}

@media (min-width: 1080px) {
  .communityWrapper {
  width: 1080px;
  }
}

@media screen and (max-width: 400px) {
  .oemWrap {
  display: none;
  }
}

.fa-navicon {
  display: none;
  cursor: pointer;
  font-size: 30px;
  line-height: 42px;
  position: absolute;
  left: 0;
  color: #ffffff;
  padding-left: 12px;
  z-index: 9997;
}

@media screen and (max-width: 1079px) {
  .fa-navicon {
  display: inline-block;
  }
}

.titleHolder {
  position: relative;
  top: 0;
  width: 100%;
  height: 42px;
  background-color: #44b3e2;
  overflow: hidden;
  -webkit-box-shadow: 0 -2px 4px 2px #000;
  -moz-box-shadow: 0 -2px 4px 2px #000;
  box-shadow: 0 -2px 4px 2px #000;	
}

.thisTitle {
  position: relative;
  display: inline-block;
  color: #ffffff;
  left: 0;
  line-height: 42px;
  padding-right: 12px;
  padding-left: 0;
  font-size: 20px;
  text-align: right;
}

.thisTitle a {
  color: #ffffff;
}

@media screen and (min-width: 1080px) {
  .thisTitle {
  font-size: 16px;
  text-align: left;
  padding-right: 0;
  padding-left: 7px;
  }
}

@media screen and (max-width: 1079px) {
  .thisTitle {
  width: 100%;
}
.thisTitle a {
  padding-right: 12px;
  }
}

.navigation {
  position: absolute;
  display: inline-block;
  top: 0;
  right: 0;
  margin-right: 6px;
  height: 42px;
  min-width: 750px;
  overflow: visible;
  padding-right: 7px;
  z-index: 20;
  box-sizing: content-box;
}

@media screen and (min-width: 1080px) {
  .navigation {
  position: relative;
  float: right;
  display: inline-block;
  margin: 0;
  }
}

.navigation ul {
  list-style-type: none;
  float: right;
  top: 0;
  margin: 0;
  padding: 0;
  height: 100%;
  display: block;
}

.navigation ul li {
  float: left;
  background-color: #44b3e2;
}

.navigation ul li a {
  display: block;
  line-height: 42px;
  font-family:"ubuntu";
  font-size: 16px;
  text-align: center;
  padding-left: 10px;
  padding-right: 10px;
  color: #ffffff;
}

.menuFreeze {
  height: 100%;
  overflow: hidden;
}

@media screen and (max-width: 1079px) {
  .navigation {
      position: fixed;
      display: none;
      top: 0;
      left: 0;
      height: 100vh;
      margin: 0;
      width: 0;
      font-size: 20px;
      background-color: #44b3e2;
      color: #ffffff;
      z-index: 9999;
      box-sizing: border-box;
      overflow: auto;
      min-width: 0;
      padding-right: 0;
  }
  
  .navigation ul {
      list-style-type: none;
      margin: 0;
      padding-top: 0;
  }
  
  .navigation ul li a {
      box-sizing: border-box;
      font-family: "ubuntu";
      font-size: 20px;
      display: block;
      color: #ffffff;
      padding: 0 20px 0 40px;
      min-width: 220px;
      text-align: left;
      height: 12.5vh;
      line-height: 12.5vh;
  }
  
  .navigation ul li .fa {
      min-width: 25px;
  }
}


@media screen and (min-width: 1080px) {
  .navigation ul li:nth-child(1) {
    width: 82px;
  }
  .navigation ul li:nth-child(2) {
    width: 81px;
  }
  .navigation ul li:nth-child(3) {
    width: 85px;
  }
  .navigation ul li:nth-child(4) {
    width: 113px;
  }
  .navigation ul li:nth-child(5) {
    width: 123px;
  }
  .navigation ul li:nth-child(6) {
    width: 73px;
  }
  .navigation ul li:nth-child(7) {
    width: 75px;
  }
  .navigation ul li:nth-child(8) {
    width: 87px;
  }
}

.blackOut {
  position: fixed;
  display: none;
  top: 0;
  right: 0;
  height: 100vh;
  width: 100%;
  background-color: rgba(0,0,0,0.5);
  overflow: hidden;
  cursor: pointer;
  z-index:9998;
}

.actoemLink {
  background-color: #368fb4 !important;
}

.actoemLink a {
  color: #ffffff !important;
}

.searchBox {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgba(0,0,0,0.8);
  color: #fff;
  display: none;
  cursor: pointer;
  z-index: 9999999999999;
}

.searchBox form {
  margin: auto;
}

.searchBox input[type=submit] {
  cursor: pointer;
  padding: 10px;
  font-size: 20px;
  font-weight: bold;
  background-color: #44b3e2;
  color: #fff;
  border: none;
  -webkit-transition: background-color 500ms linear;
  -ms-transition: background-color 500ms linear;
  transition: background-color 500ms linear;
}

.searchBox input[type=submit]:hover {
  background-color: #77c8ea;
}

.searchBox input[type=text] {
  padding: 10px;
  font-size: 20px;
  border: none;
}

.searchText {
  width: 0;
}

.searchIcon {
  cursor: pointer;
}

</style>

<body >




<div class="titleHolder">
  <div class="communityWrapper">
    <i class="fa fa-navicon"></i>
    <div class="thisTitle">
      <a href="/">
        <strong>Blog</strong>
        <span class="oemWrap">
        | Open<strong>EnergyMonitor</strong>
        </span>
      </a>
    </div>
    <div id="siteLinks" class="navigation">
      <ul>
        <li title="the homepage of OpenEnergyMonitor">
          <a href="https://openenergymonitor.org">
            <i class="fa fa-home" aria-hidden="true"></i><span class="navname">&nbsp;Home</span>
          </a>
        </li>
        <li title="a user guide for the OpenEnergyMonitor system">
          <a href="https://guide.openenergymonitor.org">
            <i class="fa fa-book" aria-hidden="true"></i><span class="navname">&nbsp;Guide</span>
          </a>
        </li>
        <li title="general information about energy monitoring, diversion and sustainability">
          <a href="https://learn.openenergymonitor.org">
            <i class="fa fa-mortar-board" aria-hidden="true"></i><span class="navname">&nbsp;Learn</span>
          </a>
        </li>
        <li title="a definitive list of resources for OpenEnergyMonitor hardware">
          <a href="https://guide.openenergymonitor.org/technical/resources/">
            <i class="fa fa-list-alt" aria-hidden="true"></i><span class="navname">&nbsp;Resources</span>
          </a>
        </li>
        <li title="the openenergymonitor forum">
          <a href="https://community.openenergymonitor.org">
            <i class="fa fa-comments" aria-hidden="true"></i><span class="navname">&nbsp;Community</span>
          </a>
        </li>
        <li title="you are here: keep up with new developments at OpenEnergyMonitor" class="actoemLink">
          <a href="https://blog.openenergymonitor.org">
            <i class="fa fa-bullhorn" aria-hidden="true"></i><span class="navname">&nbsp;Blog</span>
          </a>
        </li>
        <li title="the official OpenEnergyMonitor online store">
          <a href="https://shop.openenergymonitor.com">
            <i class="fa fa-shopping-cart" aria-hidden="true"></i><span class="navname">&nbsp;Shop</span>
          </a>
        </li>
				<li title="search for something on OpenEnergyMonitor">
					<a class="searchIcon">
					    <i aria-hidden="true" class="fa fa-search"></i><span class="navname">&nbsp;Search</span>
				  </a>
				</li>
      </ul>
    </div>
  </div>
</div>
<div class="searchBox">
  <form target="_blank" id="searchform" action="https://www.google.com/cse">
    <div>
      <input type="hidden" name="cx" value="006198118389747886812:_nmxikw563w" />
      <input type="hidden" name="ie" value="UTF-8" />
      <input type="text" class="searchText" value="" name="q" id="q" autocomplete="off" />
      <input type="submit" id="searchsubmit" name="sa" value="Search" />
    </div>
  </form>
</div>
<div class="blackOut"></div>
<div style="position:relative;width:100%;top:0;height:20px"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script defer src="/javascripts/octopress.js"></script>

<script>
  var _gaq=[['_setAccount','UA-10321170-4'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<script>
  var disqus_shortname = 'openenergymonitor';
  
    
    var disqus_script = 'count.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>

<script>

var closeStatus = false;

function openButton() {
  $("html, body").addClass("menuFreeze");
  $(".blackOut").show();
  $(".navigation").show();
  $(".navigation").animate({ width:'220' },"0.5s");
}

$(".fa-navicon").click(function() {
  openButton();
  closeStatus = true;
});

function closeButton() {
  $("html, body").removeClass("menuFreeze");
  $(".blackOut").hide();
  $(".navigation").animate({ width:'0' },"0.5s");
}

$(".blackOut").click(function() {
  closeButton();
  closeStatus = false;
});

$(document).ready(function(){
  $("table").wrap("<div style='max-width:100%;overflow-x:auto'></div>");
});

$(window).resize(function(){
  if ($(window).width() > 1079 && closeStatus == true) {
    if (!$("html").hasClass("mobile-device")) {
      closeButton();
      closeStatus = false;
    }
  }
});

$(".searchIcon").click(function() {
   $(".searchBox").css("display","flex");
   $(".searchText").animate({width: "200px"});
   $(".searchText").focus();
   $("html, body").addClass("menuFreeze");
});
$(".searchBox").click(function() {
   $(".searchBox").css("display","none");
   $(".searchText").blur();
   $(".searchText").css("width","0");
   closeButton();
});
$(".searchBox form").click( function(event) {
   event.stopPropagation();
});

</script>

<div class="grid-wrapper">
  <div class="grid grid-center">
    
    <div class="grid__item two-thirds lap-one-whole palm-one-whole">
    

        
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/10/pre-assembled-nanode-rf/">Pre-assembled Nanode RF </a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-10-31T11:24:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-10-31 11:24:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emonbase/'>emonBase</a></li>
      
        <li><a class='category' href='/categories/nanode/'>nanode</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/10/pre-assembled-nanode-rf/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/--gOT_aPXFsg/UJEHT09ZQAI/AAAAAAAAcvc/GpHw4tOvNCg/s1600/Nanode_Gateway_RF.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="249" src="http://3.bp.blogspot.com/--gOT_aPXFsg/UJEHT09ZQAI/AAAAAAAAcvc/GpHw4tOvNCg/s320/Nanode_Gateway_RF.jpg" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">We're happy to announce that we are now selling Nanode RF web-connected emonBase gateways pre-assembled. This makes it even easier and quicker to get started with energy monitoring:&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><a href="http://shop.openenergymonitor.com/base-stations/">http://shop.openenergymonitor.com/base-stations/</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The pre-assembled Nanode RF using surface mount electronics has been designed and assembled in the US by Wicked Devices. The Nanode was&nbsp;originally&nbsp;designed by our friend Ken Boak. Ken has written &nbsp;an interesting blog post giving a brief history of the Nanode.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Ken writes:&nbsp;</div><br /><br /><div style="background-color: #eeeeee; border: 1px solid rgb(204, 204, 204); margin: 5px; padding: 10px;"><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><div style="text-align: left;"><i>Nanode was conceived back in the summer of 2010, when I returned from a trip to Shenzhen, China. I was between jobs, and had a bit of time on my hands for tinkering with some new product ideas.</i><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: left;"></table><i>Nanode arose out of the need to find a cheaper way of connecting simple open source hardware, such as Arduino to the internet, so that Arduino could be used for a range of sensing and control applications.</i></div><div style="text-align: left;"><i><br /></i></div><a href="http://3.bp.blogspot.com/-qNfrw-wFDb0/UI0rrJ_XtAI/AAAAAAAAA7Q/4cirn7DHaPc/s320/P1030151.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-qNfrw-wFDb0/UI0rrJ_XtAI/AAAAAAAAA7Q/4cirn7DHaPc/s320/P1030151.JPG" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Early Nanode prototype controlling an RGB lamp</td></tr></tbody></table>Read his full blog post here:&nbsp;<a href="http://saelaenx.wordpress.com/2012/09/27/geektool-setup/">http://sustburbia.blogspot.co.uk/2012/10/a-brief-history-of-nanode.html</a></div><div style="text-align: left;"><br /></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/10/emoncms-development-update-modules/">Emoncms development update: Modules</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-10-30T13:47:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-10-30 13:47:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> five minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/10/emoncms-development-update-modules/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div>I've been a little quiet over the last few weeks, emoncms blogposts and progress updates have been far and few between but that does not mean there has been no development progress happening, to the contrary there has been a lot of significant development work been going on.<br /><br />I outlined at the start of the month in the <a href="http://openenergymonitor.org/emon/node/1107">october emoncms bug and dev list</a> the idea of re-factoring/reorganising emoncms along more modular lines, pointing to some earlier thoughts on it. Since then I made the leap and started the re-factoring process, Ilde gave me a lot of help with splitting up the language files for translations, and good ideas for menu system implementation, Baptiste Gaultier &nbsp;gave me some impetus to look at modularising the dashboard widget code and now we are almost there.<br /><br />The old structure had a folder for Controllers, Models and Views, with all the different controllers, model and view scripts for a feature mixed in together in these folders and also some files such as setup.php which had code in it for all the different features. As the application was growing this&nbsp;was getting a bit unwieldy, harder to understand/read the code, add new features and keep track of development.<br /><br />This is how the old structure looked like:<br /><br /><b>Controllers</b><br />&nbsp; feed_controller.php (part of feed module * )<br />&nbsp; input_controller.php (part of input module * )<br />&nbsp; ...<br /><b>Models</b><br />&nbsp; feed_model.php (part of feed module *)<br />&nbsp; input_model.php (part of input module *)<br />&nbsp; ...<br /><b>Views</b><br />&nbsp; feed_list_view.php (part of feed module *)<br />&nbsp; input_list_view.php (part of input module *)<br />&nbsp;<br /><div><i>setup.php</i> (mixed code for input, feeds, etc) - if you add a new module you had to add db schema code in here.<br /><i>notify.php </i>(part of notify module but in the root emoncms directory)</div><div>* Module or feature specific files are all in different locations&nbsp;</div><div><br /><b>By changing the structure:</b><br /><br /><b>Modules</b><br /><b>&nbsp; feed</b><br />&nbsp; &nbsp; feed_controller.php<br />&nbsp; &nbsp; feed_model.php<br />&nbsp; &nbsp; feed_list_view.php (includes no feed message)<br />&nbsp; &nbsp; feed_schema.php<br /><b>&nbsp; input</b><br />&nbsp; &nbsp; input_controller.php (merged with enum.php)<br />&nbsp; &nbsp; input_model.php<br />&nbsp; &nbsp; input_list_view.php (includes no input message)<br />&nbsp; &nbsp; input_schema.php<br /><br />and following the following design principles:<br /><br /><ul><li>A module add's functionality in a self-contained way - not requiring (or minimizing as much as possible) modification of any other modules or the core framework.</li><li>A module can depend on another module. ie dashboards depend on feeds but feeds does not need to depend on dashboards.</li></ul><br />I think this change gives us the following benefits:<br /><br /><ul><li>Clearer application structure - easy to find module specific code</li><li>Adding a new module is really easy, you dont have to put the controller in the controller folder, the view in the views folder, model in the models folder, database setup in setup.php, all you have to do is download the module folder and place in the modules folder.</li><li>We can then use git to develop particular modules independently of the rest. A developer looking at commit logs therefore only needs to concern themselves with that particular module rather than the application as a whole.</li><li>Its easier to test modules and the framework independently of each other.</li><li>More developer autonomy, project self organisation. You can add a module to the optional modules list without having to coordinate closely with the main emoncms bundle.</li></ul><div>The new modular emoncms version can be found here:</div><div><br /></div><span class="Apple-style-span" style="font-size: large;"><a href="https://github.com/emoncms/emoncms">https://github.com/emoncms/emoncms</a></span><br /><br />Given the potential escalating number of repositories as new modules are added I though it would be best to create a dedicated github organisation for emoncms hence the new location. If you go to:&nbsp;<a href="http://github.com/emoncms">http://github.com/emoncms</a>&nbsp;you will see quite a few repositories:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-VK2qKcUdlYY/UI_SkcU0iyI/AAAAAAAACfk/0XwqST69Ook/s1600/emoncmsgithuborg.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="609" src="http://4.bp.blogspot.com/-VK2qKcUdlYY/UI_SkcU0iyI/AAAAAAAACfk/0XwqST69Ook/s640/emoncmsgithuborg.png" width="640" /></a></div><br />The emoncms repository is the main emoncms bundle which is build up from the emoncms_framework and the other core modules such as input, feed, dashboard and so on. Then there are repositories for the framework and modules independently of the main bundle including modules that are not in the main bundle such as the raspberry pi module which I will come back to in the next post.<br /><br />The idea being that the main bundle could be built automatically from the module repositories and the framework and that the commit history could be on a module basis.<br /><br /><b>Adding a module</b><br />To add a particular non core feature such as the raspberrypi interface module to your emoncms installation its now just a matter of downloading the raspberrypi repository and placing it in the modules folder of your emoncms installation, much the same way as you add libraries to an arduino project.<br /><b><br /></b><b>Things to complete</b><br />As I mentioned at the start most of the refactoring work has been done but there are still some parts that are not complete such as the notify, admin and statistics module and there are some missing message boxes such as when no inputs, feeds or dashboards exist that need to be re-added.<br /><br />The feed module implementation is also a little different in that the there is no longer a feed_relation table that used to link a user to their feeds, this is now handled in the feeds table which simplifies things but means a simple database migration process needs to take place if your upgrading from an old emoncms version, I will write a short script to do this soon and document the migration process.<br /><br />Another important change is the API used to post data from basestations to emoncms what used to be api/post is now input/post as this action is handled by the input module. You can if you want sidestep input processing completely and just use the feed module which now has a full api. The api calls for both the feed and input module are documented in helper pages linked to from the top of the input and feed pages.<br /><br />That's it for now, in the next few post I will discuss the raspberrypi module and also how to migrate from the old emoncms version.<br /></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/10/introducing-emontx-shield/">Introducing the emonTx Shield </a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-10-23T15:53:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-10-23 15:53:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> two minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emontxshield/'>emonTxShield</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/10/introducing-emontx-shield/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;">The OpenEnergyMonitor project started in 2009 playing about with an Arduino Duemilanove. Since then the project has very much built on the Arduino platform, both hardware and software.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">We love Arduino, it's fantastic how quick and easy Arduino makes it is to get started blinking an LED and or reading an analoge voltage level.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">With that in mind it's with great pride that we are launching an Arduino&nbsp;compatible&nbsp;emonTx Energy Monitoring Shield to make getting started in energy monitoring just as easy.&nbsp;</div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-vFoKHC56LHY/UIiAfgS_W1I/AAAAAAAAcqE/1ECmUyhdorg/s1600/emonTx_Shield_top3D_web.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="227" src="http://3.bp.blogspot.com/-vFoKHC56LHY/UIiAfgS_W1I/AAAAAAAAcqE/1ECmUyhdorg/s320/emonTx_Shield_top3D_web.png" width="320" /></a></div><a href="http://1.bp.blogspot.com/-fknSe6f2UFI/UIiAbsR9mmI/AAAAAAAAcp8/RSA_k_VSyN4/s1600/current100a.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="150" src="http://1.bp.blogspot.com/-fknSe6f2UFI/UIiAbsR9mmI/AAAAAAAAcp8/RSA_k_VSyN4/s200/current100a.jpg" width="200" /></a><br /><br /><div class="separator" style="clear: both;">We are very pleased that the emonTx shield is&nbsp;compatible with the new Arduino Leonardo as well as the Uno and&nbsp;Duemilanove.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The emonTx Shield has got four CT current sensor inputs, an AC voltage sample input, on-board temperature sensor and RFM12B wireless transceiver. With just a CT sensor the shield can monitor current and apparent power. With the addition of an AC-AC adapter to provide an AC voltage sample the shield can monitor real power, AC RMS voltage and power factor.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The inclusion of the RFM12B wireless transceiver enables the emonTx shield to integrate with other OpenEnergyMonitor modules such an an <a href="http://openenergymonitor.org/emon/emonglcd">emonGLCD</a> display unit an <a href="http://openenergymonitor.org/emon/emonbase">emonBase</a> web-connected base-station for logging an&nbsp;visualisation&nbsp;with <a href="http://openenergymonitor.org/emon/emoncms">emoncms</a>.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The emonTx shield is now available as a full kit (with or without the RF module) or PCB only in the <a href="http://shop.openenergymonitor.com/emontx-shield/">OpenEnergyMonitor shop</a>.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">As with all OpenEnergyMonitor hardware modules it's fully open-source, fully documented and has got plenty of Arduino example software sketches. Follow the links from the main documentation page:&nbsp;<a href="http://openenergymonitor.org/emon/emontxshield">http://openenergymonitor.org/emon/emontxshield</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The emonTx Shield is based on the popular <a href="http://openenergymonitor.org/emon/emontx">emonTx</a>&nbsp;a low power&nbsp;stand-alone energy monitoring unit. The stand-alone&nbsp;original emonTx is better suited to long term energy monitoring installations and/or low power&nbsp;operation. The&nbsp;original&nbsp;emonTx can also be bought in kit form from the <a href="http://shop.openenergymonitor.com/emontx-v2/">OpenEnergyMonitor shop</a>.&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">If you have any questions or run into problems please post on our active <a href="http://openenergymonitor.org/emon/forum">community forums</a>.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Thank you to everyone who has helped contribute to the project.</div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/09/display-live-energy-data-on-your-desktop/">Display live emoncms energy data on your desktop </a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-09-27T20:06:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-09-27 20:06:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/09/display-live-energy-data-on-your-desktop/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Alexander Price ‏<a href="https://twitter.com/saelaenx">@saelaenx</a>&nbsp;has documented a neat setup where he uses <a href="http://itunes.apple.com/gb/app/geektool/id456877552?mt=12">Geektool</a> on his Mac to pull his live energy data and current temperatures from emoncms. The data it's self comes from an emonTx, emonGLCD posted online with a NanodeRF.<br /><br />It would be great to have a similar&nbsp;arrangement&nbsp;for Ubuntu Linux using open-source tools, that way I can have have the same on my desktop :-)<br /><br />The same goes for an android&nbsp;widget to display my live energy data on my home screen...one for the future.<br /><br />Great work Alex, read his full blog <a href="http://saelaenx.wordpress.com/2012/09/27/geektool-setup/">here</a> and see below for a summary:<br /><br /><div style="background-color: #eeeeee; border: 1px solid #ccc; margin: 5px; padding: 10px;">Since I got a few people asking about this on twitter I decided to write a quick blog post on how I set up my current Geektool arrangement. Obviously this method only works on a mac, but I imagine a similar result could be achieved on Windows using Rainmeter.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-LBz8wu1xU_c/UGSt21tuNeI/AAAAAAAAcmA/2C_4FNrKZhw/s1600/geektool-setup.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="137" src="http://2.bp.blogspot.com/-LBz8wu1xU_c/UGSt21tuNeI/AAAAAAAAcmA/2C_4FNrKZhw/s320/geektool-setup.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">GeekTool Desktop&nbsp;Widget&nbsp;</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-xwkpZu0fSpQ/UGSt7Coz5kI/AAAAAAAAcmI/y-qT3PYUKNg/s1600/screen-shot-2012-09-27-at-13-10-36.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="223" src="http://1.bp.blogspot.com/-xwkpZu0fSpQ/UGSt7Coz5kI/AAAAAAAAcmI/y-qT3PYUKNg/s320/screen-shot-2012-09-27-at-13-10-36.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emoncms dashboard</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-tGbk8BR3irI/UGSuF4cDKoI/AAAAAAAAcmQ/T9sRPea_nL4/s1600/img_1252.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="239" src="http://4.bp.blogspot.com/-tGbk8BR3irI/UGSuF4cDKoI/AAAAAAAAcmQ/T9sRPea_nL4/s320/img_1252.jpg" width="320" /></a></td></tr><tr><td class="tr-caption">emonGLCD with Alex's nice custom&nbsp;monospaced fonts</td></tr></tbody></table></div><br />Read his full blog post here:&nbsp;<a href="http://saelaenx.wordpress.com/2012/09/27/geektool-setup/">http://saelaenx.wordpress.com/2012/09/27/geektool-setup/</a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/09/logo-ideas/">Logo Ideas </a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-09-27T12:21:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-09-27 12:21:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/logo/'>logo</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/09/logo-ideas/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Recently our friend and freelance artist/graphic designer <a href="http://gwilnoble.com/">Gwil Noble</a> has knocked up a few logo possibilities for OpenEnergyMonitor. <br /><br />Gwil has also made some gorgeous little context icons we will be using in our new front page re-design soon.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-_VI0FaO4410/UGRFhuP4NxI/AAAAAAAAclo/1HAmJxHx5iU/s1600/LogoPrototypes_web.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="160" src="http://1.bp.blogspot.com/-_VI0FaO4410/UGRFhuP4NxI/AAAAAAAAclo/1HAmJxHx5iU/s400/LogoPrototypes_web.png" width="400" /></a></div><br /><br /><br />For the main icon there are three possibilities so far, their all in prototype stage, there is a possibility that we end up using something totally different! If you have any creative ideas for 'D', 'E' or even 'F' we would love to be able to add more options to the list. <br /><br />We have setup a poll to enable you to vote on which logo you prefer:&nbsp;<a href="http://openenergymonitor.org/emon/logovote">http://openenergymonitor.org/emon/logovote</a><br /><br />Forum discussion thread here: <a href="http://openenergymonitor.org/emon/node/1093">http://openenergymonitor.org/emon/node/1093</a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/09/data-portability-version-1-complete/">Data portability: Version 1 complete!</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-09-25T18:34:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-09-25 18:34:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> two minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/09/data-portability-version-1-complete/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Following on from the<a href="http://openenergymonitor.blogspot.co.uk/2012/09/data-portability-importing-feed-data.html"> last series of posts</a> detailing an implementation for exporting and importing data into emoncms to make it possible to move feed data between emoncms instances with ease, these features are now fully integrated in to the<a href="https://github.com/openenergymonitor/emoncms3"> latest emoncms version</a>.<br /><br />I have also created a rough initial interface for selecting the remote account to download from and for selecting the feeds to download, you can get to this page by clicking on the Sync feeds button on the feedlist page:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-amhA1bKxg0c/UGHyvmnvsvI/AAAAAAAACfU/f5llCeQkeWo/s1600/sync_01.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="252" src="http://1.bp.blogspot.com/-amhA1bKxg0c/UGHyvmnvsvI/AAAAAAAACfU/f5llCeQkeWo/s640/sync_01.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: left;">To select an account enter the account URL and write apikey and click ok, after a moment the feed list of the remote account will appear.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">You can then click on the feeds you wish to download. This will enter the feeds into a download queue. As detailed in the last post the download and import process is run by a&nbsp;separate&nbsp;script.&nbsp;&nbsp;The script is called import.php and can be found in the root directory of the emoncms install. You can either run this script manually or set up a cron job to run it periodically.</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-tCmNdNFJY18/UGHyusPl3GI/AAAAAAAACfM/XEli3nyrIEw/s1600/sync.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="http://3.bp.blogspot.com/-tCmNdNFJY18/UGHyusPl3GI/AAAAAAAACfM/XEli3nyrIEw/s640/sync.png" width="640" /></a></div><br />Once you start downloading feeds, if you refresh the page you will see the<i> remote ahead by</i> value decrease as data is downloaded starting with the oldest data first.&nbsp;It is also possible to sync the data again at a later data to bring the local copy up to date.<br /><br />This feature makes for a really convenient way to backup feed data, as you only need to download the latest changes rather than all the data every time.<br /><br />There are still a few things missing in the current implementation, that would be great to add:<br /><br />- The first is that histogram data is not downloaded correctly as the import and export script only works at present with one column of data.<br /><br />- It would be great to have a feature to select all the remote feeds to download, rather than having to click each one.<br /><br />- It would be nice to have the sync&nbsp;interface&nbsp;page built in javascript/jquery to have it automatically update on progress without having to refresh the page.<br /><br />But I think other than these which can be fixed and improved in time, its largely functional and good to go.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/09/data-portability-importing-feed-data/">Data portability: Importing feed data into emoncms</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-09-21T10:57:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-09-21 10:57:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> eight minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/09/data-portability-importing-feed-data/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    The<a href="http://openenergymonitor.blogspot.co.uk/2012/09/data-portability-exporting-feed-data.html"> last post</a> detailed an implementation for exporting feed data from emoncms, this post explores an implementation for importing feed data, which can be used in conjunction with the export implementation to sync or download feed data from one emoncms instance to another enabling full feed data portability.<br /><br />I started by trying to create an import script that was build into a normal page action, you would go to a page ie:<br /><br /><i>sync/feed?id=10...</i><br /><br />The problem with this is that downloading and importing a feed takes a long time and so the page will appear unresponsive for that time, the loading animation just turns and turns. <br /><br />If you mistakenly click on the refresh button, the initial process will not close and so you will start to get duplicate processes which will mess up the data and increase the server load.<br /><br />Ideally while downloading and importing the data there would be a progress bar so that you can see what's happening and any other useful feedback if things go wrong.<br /><br />To get this kind of feedback you need to be able to update the browser as the process is running.<br /><br />You also want the syncing to happen directly between servers rather than server to local computer to server as this would be faster in instances where both servers are remote and the internet access to the local computer is relatively slow, - i.e you want the import process handled in php which is server side (you could use another server side language if you wanted).<br /><br />The way to get feedback about what's happening while having the import process being handled in php is to have two separate scripts one that handles the importing and another that can be refreshed regularly serves the gui webpage.<br /><br />We can extend the idea of a separate import script to sort the problem of duplicate processes too by implementing a download and import queue.<br /><br />When a user clicks to download/sync a feed in the sync page, the action behind this enters the details of the feed to be downloaded in the queue, it can also check at this point that it does not already exist in the queue.<br /><br />We can then run the import script independently of the gui page, such as via a scheduled cron job that runs the script one a minute. We can put a check in there to ensure that only one instance of the script is running at any given time too.<br /><br />The import script then checks if there are feeds to be downloaded in the import queue, working through each queue item sequentially.<br /><br />The added advantage of the queue implementation is that we can keep the load that importing places on the server low allowing only one feed to be downloaded and imported at any given time.<br /><br />So all in all this implementation:<br /><ul><li>Enables feedback on import progress.</li><li>Ensures we don’t get duplicate feed syncing processes.</li><li>Ensures that the server load is kept under control.</li></ul><div>On to the code, here's the import script that works through the import queue and downloads and imports each item sequentially, I would be interested to hear if there are any ways the efficiency of the export and import process can be improved.</div><!-- HTML generated using hilite.me --><br /><div style="background: #f8f8f8; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #bc7a00;">&lt;?php</span><br /><br />  <span style="color: #408080; font-style: italic;">// Ensure only one instance of the script can run at any one time.</span><br />  <span style="color: #19177c;">$fp</span> <span style="color: #666666;">=</span> <span style="color: green;">fopen</span>(<span style="color: #ba2121;">"importlock"</span>, <span style="color: #ba2121;">"w"</span>);<br />  <span style="color: green; font-weight: bold;">if</span> (<span style="color: #666666;">!</span> <span style="color: green;">flock</span>(<span style="color: #19177c;">$fp</span>, LOCK_EX <span style="color: #666666;">|</span> LOCK_NB)) { <span style="color: green; font-weight: bold;">echo</span> <span style="color: #ba2121;">"Already running</span><span style="color: #bb6622; font-weight: bold;">\n</span><span style="color: #ba2121;">"</span>; <span style="color: green; font-weight: bold;">die</span>; }<br /><br />  <span style="color: #408080; font-style: italic;">// Connect to the database</span><br />  <span style="color: green;">define</span>(<span style="color: #ba2121;">'EMONCMS_EXEC'</span>, <span style="color: #666666;">1</span>);<br />  <span style="color: green; font-weight: bold;">require</span> <span style="color: #ba2121;">"Includes/process_settings.php"</span>;<br />  <span style="color: green; font-weight: bold;">require</span> <span style="color: #ba2121;">"Includes/db.php"</span>;<br />  <span style="color: green; font-weight: bold;">switch</span>(db_connect()) {<br />    <span style="color: green; font-weight: bold;">case</span> <span style="color: #666666;">0:</span> <span style="color: green; font-weight: bold;">break</span>;<br />    <span style="color: green; font-weight: bold;">case</span> <span style="color: #666666;">1:</span> <span style="color: green; font-weight: bold;">break</span>;  <br />    <span style="color: green; font-weight: bold;">case</span> <span style="color: #666666;">3:</span> show_dbsettingserror_message(); <span style="color: green; font-weight: bold;">die</span> ;<br />  }<br /><br />  <span style="color: #408080; font-style: italic;">// Fetch the import queue</span><br />  <span style="color: #19177c;">$result</span> <span style="color: #666666;">=</span> db_query(<span style="color: #ba2121;">"SELECT * FROM importqueue ORDER BY `queid` Asc"</span>);<br /><br />  <span style="color: #408080; font-style: italic;">// For each item in the queue</span><br />  <span style="color: green; font-weight: bold;">while</span>(<span style="color: #19177c;">$row</span> <span style="color: #666666;">=</span> db_fetch_array(<span style="color: #19177c;">$result</span>))<br />  {<br />    <span style="color: #19177c;">$queid</span> <span style="color: #666666;">=</span> <span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'queid'</span>];<br />    <span style="color: #19177c;">$feedname</span> <span style="color: #666666;">=</span> <span style="color: #ba2121;">"feed_"</span><span style="color: #666666;">.</span>trim(<span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'localfeedid'</span>])<span style="color: #666666;">.</span><span style="color: #ba2121;">""</span>;<br /><br />    <span style="color: #408080; font-style: italic;">// Check if we have already downloaded part of the feed and get the last </span><br />    <span style="color: #408080; font-style: italic;">// value entered so that we dont download and insert data that has already </span><br />    <span style="color: #408080; font-style: italic;">// been inserted this makes this utility useful for syncing in general </span><br />    <span style="color: #408080; font-style: italic;">// and in particlar backup that only downloads the latest changes. </span><br />    <span style="color: #19177c;">$feed_result</span> <span style="color: #666666;">=</span> db_query(<span style="color: #ba2121;">"SELECT * FROM </span><span style="color: #bb6688; font-weight: bold;">$feedname</span><span style="color: #ba2121;"> ORDER BY time Desc LIMIT 1"</span>);<br />    <span style="color: #19177c;">$feed_row</span> <span style="color: #666666;">=</span> db_fetch_array(<span style="color: #19177c;">$feed_result</span>);<br />    <span style="color: #19177c;">$start</span> <span style="color: #666666;">=</span> <span style="color: #666666;">0</span>; <span style="color: green; font-weight: bold;">if</span> (<span style="color: #19177c;">$feed_row</span>[<span style="color: #666666;">0</span>]) <span style="color: #19177c;">$start</span> <span style="color: #666666;">=</span> <span style="color: #19177c;">$feed_row</span>[<span style="color: #666666;">0</span>];<br /><br />    <span style="color: #408080; font-style: italic;">// Open the file served from the export page on the remote server</span><br />    <span style="color: #19177c;">$url</span> <span style="color: #666666;">=</span> <span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'baseurl'</span>]<span style="color: #666666;">.</span><span style="color: #ba2121;">'/feed/export?apikey='</span><span style="color: #666666;">.</span><span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'apikey'</span>]<span style="color: #666666;">.</span><span style="color: #ba2121;">'&amp;id='</span><br />    <span style="color: #666666;">.</span><span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'feedid'</span>]<span style="color: #666666;">.</span><span style="color: #ba2121;">'&amp;start='</span><span style="color: #666666;">.</span><span style="color: #19177c;">$start</span>;<br /><br />    <span style="color: green; font-weight: bold;">echo</span> <span style="color: #ba2121;">"Opening file </span><span style="color: #bb6688; font-weight: bold;">$url</span><span style="color: #bb6622; font-weight: bold;">\n</span><span style="color: #ba2121;">"</span>;<br />    <span style="color: #19177c;">$fh</span> <span style="color: #666666;">=</span> <span style="color: #666666;">@</span><span style="color: green;">fopen</span>( <span style="color: #19177c;">$url</span>, <span style="color: #ba2121;">'r'</span> );<br /> <br />    <span style="color: #408080; font-style: italic;">// Read through the file</span><br />    <span style="color: #19177c;">$i</span> <span style="color: #666666;">=</span> <span style="color: #666666;">0</span>;<br />    <span style="color: green; font-weight: bold;">while</span> ((<span style="color: #19177c;">$data</span> <span style="color: #666666;">=</span> <span style="color: green;">fgetcsv</span>(<span style="color: #19177c;">$fh</span>, <span style="color: #666666;">0</span>, <span style="color: #ba2121;">","</span>)) <span style="color: #666666;">!==</span> <span style="color: green; font-weight: bold;">FALSE</span>) <br />    {<br />      <span style="color: #19177c;">$feedtime</span> <span style="color: #666666;">=</span> <span style="color: #19177c;">$data</span>[<span style="color: #666666;">0</span>]; <span style="color: #19177c;">$value</span> <span style="color: #666666;">=</span> <span style="color: #19177c;">$data</span>[<span style="color: #666666;">1</span>];<br /><br />      <span style="color: green; font-weight: bold;">if</span> (<span style="color: #19177c;">$feedtime</span><span style="color: #666666;">!=</span><span style="color: #ba2121;">''</span> <span style="color: #666666;">&amp;&amp;</span> <span style="color: #19177c;">$value</span><span style="color: #666666;">!=</span><span style="color: #ba2121;">''</span>)<br />      {<br />        <span style="color: #19177c;">$i</span><span style="color: #666666;">++</span>;<br />        <span style="color: #408080; font-style: italic;">//Contruct values part of the query</span><br />        <span style="color: green; font-weight: bold;">if</span> (<span style="color: #19177c;">$i</span><span style="color: #666666;">!=1</span>) <span style="color: #19177c;">$vals</span> <span style="color: #666666;">.=</span> <span style="color: #ba2121;">','</span>;<br />        <span style="color: #19177c;">$vals</span> <span style="color: #666666;">.=</span> <span style="color: #ba2121;">"('</span><span style="color: #bb6688; font-weight: bold;">$feedtime</span><span style="color: #ba2121;">','</span><span style="color: #bb6688; font-weight: bold;">$value</span><span style="color: #ba2121;">')"</span>;<br /><br />        <span style="color: #408080; font-style: italic;">// Execute query every 400 rows (same block size as export script)</span><br />        <span style="color: green; font-weight: bold;">if</span> (<span style="color: #19177c;">$i</span><span style="color: #666666;">&gt;400</span>)<br />        {<br />          <span style="color: #19177c;">$i</span> <span style="color: #666666;">=</span> <span style="color: #666666;">0</span>;<br />          <span style="color: green; font-weight: bold;">if</span> (<span style="color: #19177c;">$vals</span>) db_query(<span style="color: #ba2121;">"INSERT INTO </span><span style="color: #bb6688; font-weight: bold;">$feedname</span><span style="color: #ba2121;"> (`time`,`data`) VALUES "</span><span style="color: #666666;">.</span><span style="color: #19177c;">$vals</span>);<br />          <span style="color: #19177c;">$vals</span> <span style="color: #666666;">=</span> <span style="color: #ba2121;">""</span>;<br />        }<br />      }<br />    }<br />    <span style="color: #408080; font-style: italic;">// If there are lines to be inserted left over insert them here at the end</span><br />    <span style="color: green; font-weight: bold;">if</span> (<span style="color: #19177c;">$vals</span>) db_query(<span style="color: #ba2121;">"INSERT INTO </span><span style="color: #bb6688; font-weight: bold;">$feedname</span><span style="color: #ba2121;"> (`time`,`data`) VALUES "</span><span style="color: #666666;">.</span><span style="color: #19177c;">$vals</span>);    <br /><br />    <span style="color: green;">fclose</span>(<span style="color: #19177c;">$fh</span>);<br /><br />    <span style="color: green; font-weight: bold;">echo</span> <span style="color: #ba2121;">"Transfer complete</span><span style="color: #bb6622; font-weight: bold;">\n</span><span style="color: #ba2121;">"</span>;<br />    <span style="color: green; font-weight: bold;">echo</span> <span style="color: #ba2121;">"Deleting item </span><span style="color: #bb6688; font-weight: bold;">$queid</span><span style="color: #ba2121;"> from queue</span><span style="color: #bb6622; font-weight: bold;">\n</span><span style="color: #ba2121;">"</span>;<br />    db_query(<span style="color: #ba2121;">"DELETE FROM importqueue WHERE queid = </span><span style="color: #bb6688; font-weight: bold;">$queid</span><span style="color: #ba2121;">"</span>);<br />  }<br /><br /><span style="color: #bc7a00;">?&gt;</span><br /></pre></div><br />In the next post I will explain the interface for generating the feed import queue.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/09/data-portability-exporting-feed-data/">Data portability: exporting feed data from emoncms</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-09-19T21:26:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-09-19 21:26:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> four minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/09/data-portability-exporting-feed-data/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Following on from the previous two posts:<br /><a href="http://openenergymonitor.blogspot.com/2012/09/making-emoncms-data-portable.html">Making emoncms data portable</a><br /><a href="http://openenergymonitor.blogspot.com/2012/09/data-portability-challenges.html">Data portability challenges</a><br /><br />Here's my initial solution for feed export code that also&nbsp;allows&nbsp;it's load on the server to be regulated.<br /><br />In trying to work this out I first tired requesting all the feed data (which could be millions of rows) in one mysql query and then writing the data to a file in one push, Testing on my laptop server installation and monitoring the load with the linux top tool the mysql query can use around 97% of the cpu for up to tens of seconds depending on the feed size. Once the query is complete the writing of the file (an apache process) then takes up another block of 97% cpu use until the file has completed downloading. Emoncms still seems fairly responsive in that time.<br /><br />My next thought was to break up that larger query into smaller blocks and introducing a delay between the reading of each block, maybe the delay could wait for other actions to finish before continuing in future versions.<br /><br />Spiting&nbsp;the query into blocks of 400 rows,&nbsp;alternately&nbsp;loading and writing to the file without a delay drops the load to around 50% for both the mysql and apache processes.<br /><br />By introducing a delay of about 80 microseconds its then possible to drop the load down to roughly 10% for the apache process and a little less for the mysql process.<br /><br />Increasing the block size or/and reducing the delay speeds the transfer rate up, reducing the block size or/and increasing the delay slows the transfer rate down.<br /><br />Any thoughts on improving this would be welcome, I will try and add it to the emoncms repo soon.<br /><br />Here's the code:<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #f8f8f8; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #bc7a00;">&lt;?php</span><br /><span class="Apple-style-span" style="font-family: 'Times New Roman'; line-height: normal; white-space: normal;"><pre style="line-height: 16px;">  <span style="color: #408080; font-style: italic;">// Open database etc here</span></pre></span><span class="Apple-style-span" style="font-family: 'Times New Roman'; line-height: normal; white-space: normal;"><pre style="line-height: 16px;">  <span style="color: #408080; font-style: italic;">// Extend timeout limit from 30s to 2mins</span></pre></span><span class="Apple-style-span">  <span style="color: green;">set_time_limit</span> (<span style="color: #666666;">120</span>);    <span style="color: #408080; font-style: italic;">// Feed id and start time of feed to export</span>  <span style="color: #19177c;">$feedid</span> <span style="color: #666666;">=</span> <span style="color: #666666;">1</span></span>;<span class="Apple-style-span">  <span style="color: #19177c;">$start</span> <span style="color: #666666;">=</span> <span style="color: #666666;">0</span></span>;<span class="Apple-style-span">     <span style="color: #408080; font-style: italic;">// Regulate mysql and apache load.</span>  <span style="color: #19177c;">$block_size</span> <span style="color: #666666;">=</span> <span style="color: #666666;">400</span>;   <span style="color: #19177c;">$sleep</span> <span style="color: #666666;">=</span> <span style="color: #666666;">80000</span>;    <span style="color: #19177c;">$feedname</span> <span style="color: #666666;">=</span> <span style="color: #ba2121;">"feed_"</span><span style="color: #666666;">.</span>trim(<span style="color: #19177c;">$feedid</span>)<span style="color: #666666;">.</span><span style="color: #ba2121;">""</span>;   <span style="color: #19177c;">$fileName</span> <span style="color: #666666;">=</span> <span style="color: #19177c;">$feedname</span><span style="color: #666666;">.</span><span style="color: #ba2121;">'.csv'</span>;     <span style="color: #408080; font-style: italic;">// There is no need for the browser to cache the output</span>  header(<span style="color: #ba2121;">"Cache-Control: no-cache, no-store, must-revalidate"</span>);    <span style="color: #408080; font-style: italic;">// Tell the browser to handle output as a csv file to be downloaded</span>  header(<span style="color: #ba2121;">'Content-Description: File Transfer'</span>);   header(<span style="color: #ba2121;">"Content-type: text/csv"</span>);   header(<span style="color: #ba2121;">"Content-Disposition: attachment; filename=</span><span style="color: #bb6688; font-weight: bold;">{</span><span style="color: #19177c;">$fileName</span><span style="color: #bb6688; font-weight: bold;">}</span><span style="color: #ba2121;">"</span>);    header(<span style="color: #ba2121;">"Expires: 0"</span>);   header(<span style="color: #ba2121;">"Pragma: no-cache"</span>);    <span style="color: #408080; font-style: italic;">// Write to output stream</span>  <span style="color: #19177c;">$fh</span> <span style="color: #666666;">=</span> <span style="color: #666666;">@</span><span style="color: green;">fopen</span>( <span style="color: #ba2121;">'php://output'</span>, <span style="color: #ba2121;">'w'</span> );    <span style="color: #408080; font-style: italic;">// Load new feed blocks until there is no more data </span>  <span style="color: #19177c;">$moredata_available</span> <span style="color: #666666;">=</span> <span style="color: #666666;">1</span>;   <span style="color: green; font-weight: bold;">while</span> (<span style="color: #19177c;">$moredata_available</span>)   {     <span style="color: #408080; font-style: italic;">// 1) Load a block</span>    <span style="color: #19177c;">$result</span> <span style="color: #666666;">=</span> db_query(<span style="color: #ba2121;">"SELECT * FROM </span><span style="color: #bb6688; font-weight: bold;">$feedname</span><span style="color: #ba2121;"> WHERE time&gt;</span><span style="color: #bb6688; font-weight: bold;">$start</span><span style="color: #ba2121;"> &nbsp;</span></span></pre><pre style="line-height: 125%; margin: 0;"><span style="color: #ba2121;">    ORDER BY time Asc Limit </span><span style="color: #bb6688; font-weight: bold;">$block_size</span><span style="color: #ba2121;">"</span>);<br /><br />    <span style="color: #19177c;">$moredata_available</span> <span style="color: #666666;">=</span> <span style="color: #666666;">0</span>;<br />    <span style="color: green; font-weight: bold;">while</span>(<span style="color: #19177c;">$row</span> <span style="color: #666666;">=</span> db_fetch_array(<span style="color: #19177c;">$result</span>)) {<br /><br />      <span style="color: #408080; font-style: italic;">// Write block as csv to output stream</span><br />      <span style="color: green;">fputcsv</span>(<span style="color: #19177c;">$fh</span>, <span style="color: green; font-weight: bold;">array</span>(<span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'time'</span>],<span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'data'</span>]));<br /><br />      <span style="color: #408080; font-style: italic;">// Set new start time so that we read the next block along</span><br />      <span style="color: #19177c;">$start</span> <span style="color: #666666;">=</span> <span style="color: #19177c;">$row</span>[<span style="color: #ba2121;">'time'</span>];<br />      <span style="color: #19177c;">$moredata_available</span> <span style="color: #666666;">=</span> <span style="color: #666666;">1</span>;<br />    }<br />    <span style="color: #408080; font-style: italic;">// 2) Sleep for a bit</span><br />    <span style="color: green;">usleep</span>(<span style="color: #19177c;">$sleep</span>);<br />  }<br /><br />  <span style="color: green;">fclose</span>(<span style="color: #19177c;">$fh</span>);<br /></pre></div><br />In the next post I will discuss creating a script to import feed data by pointing directly at the export script on the other server, plus a background running&nbsp;daemon&nbsp;process and queueing&nbsp;mechanism&nbsp;to manage the import process.
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/09/data-portability-challenges/">Data portability challenges</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-09-19T08:26:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-09-19 08:26:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/09/data-portability-challenges/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Continuing from yesterday's post on <a href="http://openenergymonitor.blogspot.co.uk/2012/09/making-emoncms-data-portable.html">making emoncms data portable</a>.<br /><br />There are some challenges with implementing data portability for energy data. 5s energy feed data can grow to be quite large, I have several feeds that are approaching 100Mb and a total account size of about 700Mb and thats only just approaching one year.<br /><br />Moving large quantities of data uses server resources including: cpu, memory and bandwidth. Emoncms.org is hosted on a <a href="http://www.bigv.io/">BigV virtual machine</a>, where you get 1GiB Ram, 25GiB Disk space, 200GiB transfer for £10 a month, which is a fantastic deal for those specs.<br /><br />As exporting or importing large feeds takes time its important that it does not hog resources on the server making the server unusable for other users, any import or export code needs to use a small percentage of the server resources and ideally the amount of resources used could be adjustable. We also need to keep an eye on the data transfer limits.<br /><br />In the next post I will post up the initial working feed export code.<br /><br /><br /><br /><br /><br />
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2012/09/making-emoncms-data-portable/">Making emoncms data portable</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-09-18T20:43:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2012-09-18 20:43:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2012/09/making-emoncms-data-portable/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    One of the features I've wanted in emoncms for some time is the ability to move feed data between different server's with ease.<br /><div><br /></div><div>I want to be able to log in the emoncms instance running on my local machine and go to a page where I can enter the authentication details and location of my account on a remote emoncms server such as emoncms.org at which point it would bring up a list of the feeds that are available and I could either download particular feeds or just click download all and it would automatically download the whole account.</div><div><br /></div><div>This would allow me to get at my data when I'm offline and it could serve as a personal backup of the data.&nbsp;Another need for this feature is we have an old remote emoncms instance that has some old energy data on, this feature would make it really easy to move the data to the new instance.</div><div><br /></div><div>This feature could also work in a similar way to a ubuntu one or dropbox like service, there could be an automatic syncing option.</div><div><br /></div><div>This would make the energy data very portable, data potability helps to create an open web, ensures that we can be in full control of our energy data, we can remove it from a service if we no longer want to be with a particular service, use it in other applications and for other applications that may not have been thought of in the original application design.</div><div><br /></div><div>Over the next few blog posts I'm going to try and explore how this can be implemented. I've already got some working code, but a lot of work will need to be done to make this a nice well implemented feature, so if you can help with the coding or/and provide insight into better ways of doing things, that would be most welcome.</div>
    
  </div>
  </article>
  <hr>
  

  <div class="pagination">
    
      <a class="btn pull-left" href="/posts/23">&larr; Older</a>
    

    
    <a class="btn pull-right" href="/posts/21">Newer &rarr;</a>
    
  </div>


    </div>

    
    <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
      <div class="grid">

 
 <section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      
        <li class="post">
          <a href="/2018/01/emoncms-theme/">Emoncms Blue Theme</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2018/01/emonpi-remote-access/">emonPi Remote Access with Dataplicity</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/10/iotawatt/">Introducing IoTaWatt</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/08/cydynni-energylocal/">CydYnni – Energy Local, community hydro smart grid</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/08/advances-article/">Advances Wales Magazine Article</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/06/emoncms-android-app-v2/">Emoncms Android App V2</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/06/emonpi-network-setup-wizard/">emonPi Network Setup Wizard</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/05/raspberrypi-blog/">Raspberry Pi blog</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/05/emonpi-mqtt-googlehome/">emonPi as a Home Automation Hub</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/02/myhomeenergyplanner/">MyHomeEnergyPlanner - open source home energy assessment</a>
        </li>
      
    
  </ul>
</section>
  
  
     <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Categories</h1>
  <ul class="divided">
    
    
      <li><a href="/categories/air-quality-egg/">Air Quality Egg</a></li>
    
      <li><a href="/categories/antenna/">Antenna</a></li>
    
      <li><a href="/categories/building-energy-modelling/">Building Energy Modelling</a></li>
    
      <li><a href="/categories/china/">China</a></li>
    
      <li><a href="/categories/christmas/">Christmas</a></li>
    
      <li><a href="/categories/dc/">DC</a></li>
    
      <li><a href="/categories/dc-current-sensing/">DC current sensing</a></li>
    
      <li><a href="/categories/esp8266/">ESP8266</a></li>
    
      <li><a href="/categories/htu21d/">HTU21D</a></li>
    
      <li><a href="/categories/heat-pump/">Heat Pump</a></li>
    
      <li><a href="/categories/kaizen/">Kaizen</a></li>
    
      <li><a href="/categories/kicad/">KiCad</a></li>
    
      <li><a href="/categories/mqtt/">MQTT</a></li>
    
      <li><a href="/categories/nanoderf/">NanodeRF</a></li>
    
      <li><a href="/categories/nodered/">NodeRed</a></li>
    
      <li><a href="/categories/oem-labs/">OEM Labs</a></li>
    
      <li><a href="/categories/okg/">OKG</a></li>
    
      <li><a href="/categories/oscilloscope/">Oscilloscope</a></li>
    
      <li><a href="/categories/rfm12/">RFM12</a></li>
    
      <li><a href="/categories/rfm69/">RFM69</a></li>
    
      <li><a href="/categories/rs485/">RS485</a></li>
    
      <li><a href="/categories/sap-2012/">SAP 2012</a></li>
    
      <li><a href="/categories/shw/">SHW</a></li>
    
      <li><a href="/categories/srf/">SRF</a></li>
    
      <li><a href="/categories/tasker/">Tasker</a></li>
    
      <li><a href="/categories/android/">android</a></li>
    
      <li><a href="/categories/app/">app</a></li>
    
      <li><a href="/categories/application/">application</a></li>
    
      <li><a href="/categories/arduino/">arduino</a></li>
    
      <li><a href="/categories/award/">award</a></li>
    
      <li><a href="/categories/backup/">backup</a></li>
    
      <li><a href="/categories/batteries/">batteries</a></li>
    
      <li><a href="/categories/benchmarking/">benchmarking</a></li>
    
      <li><a href="/categories/build-sesh/">build sesh</a></li>
    
      <li><a href="/categories/business/">business</a></li>
    
      <li><a href="/categories/ciseco/">ciseco</a></li>
    
      <li><a href="/categories/community-energy/">community energy</a></li>
    
      <li><a href="/categories/community-smart-grid/">community smart grid</a></li>
    
      <li><a href="/categories/continuous-testing/">continuous testing</a></li>
    
      <li><a href="/categories/control/">control</a></li>
    
      <li><a href="/categories/current-sensor/">current sensor</a></li>
    
      <li><a href="/categories/current-transformer/">current transformer</a></li>
    
      <li><a href="/categories/dashboard/">dashboard</a></li>
    
      <li><a href="/categories/display/">display</a></li>
    
      <li><a href="/categories/diy-drones/">diy drones</a></li>
    
      <li><a href="/categories/docker/">docker</a></li>
    
      <li><a href="/categories/documentation/">documentation</a></li>
    
      <li><a href="/categories/ecohomelab/">ecohomelab</a></li>
    
      <li><a href="/categories/efergy/">efergy</a></li>
    
      <li><a href="/categories/electronics/">electronics</a></li>
    
      <li><a href="/categories/elektrocamp/">elektrocamp</a></li>
    
      <li><a href="/categories/email-notifications/">email notifications</a></li>
    
      <li><a href="/categories/embodied-energy/">embodied energy</a></li>
    
      <li><a href="/categories/emonbase/">emonBase</a></li>
    
      <li><a href="/categories/emonctrl/">emonCtrl</a></li>
    
      <li><a href="/categories/emonglcd/">emonGLCD</a></li>
    
      <li><a href="/categories/emonsd/">emonSD</a></li>
    
      <li><a href="/categories/emonth/">emonTH</a></li>
    
      <li><a href="/categories/emontx/">emonTx</a></li>
    
      <li><a href="/categories/emontx-v2/">emonTx V2</a></li>
    
      <li><a href="/categories/emontxsmt/">emonTxSMT</a></li>
    
      <li><a href="/categories/emontxshield/">emonTxShield</a></li>
    
      <li><a href="/categories/emoncms/">emoncms</a></li>
    
      <li><a href="/categories/emonesp/">emonesp</a></li>
    
      <li><a href="/categories/emonpi/">emonpi</a></li>
    
      <li><a href="/categories/emontx/">emontx</a></li>
    
      <li><a href="/categories/end-to-end/">end to end</a></li>
    
      <li><a href="/categories/energy-monitor/">energy monitor</a></li>
    
      <li><a href="/categories/energy-monitoring/">energy monitoring</a></li>
    
      <li><a href="/categories/esp8266/">esp8266</a></li>
    
      <li><a href="/categories/ev/">ev</a></li>
    
      <li><a href="/categories/feed-storage/">feed storage</a></li>
    
      <li><a href="/categories/firmware/">firmware</a></li>
    
      <li><a href="/categories/forum/">forum</a></li>
    
      <li><a href="/categories/github/">github</a></li>
    
      <li><a href="/categories/graphing/">graphing</a></li>
    
      <li><a href="/categories/hackathon/">hackathon</a></li>
    
      <li><a href="/categories/hall-effect/">hall effect</a></li>
    
      <li><a href="/categories/hardware/">hardware</a></li>
    
      <li><a href="/categories/heating/">heating</a></li>
    
      <li><a href="/categories/heatpumpmonitor/">heatpumpmonitor</a></li>
    
      <li><a href="/categories/home-assistant/">home Assistant</a></li>
    
      <li><a href="/categories/home-camp/">home camp</a></li>
    
      <li><a href="/categories/humidity/">humidity</a></li>
    
      <li><a href="/categories/integrations/">integrations</a></li>
    
      <li><a href="/categories/interface/">interface</a></li>
    
      <li><a href="/categories/interview/">interview</a></li>
    
      <li><a href="/categories/iotawatt/">iotawatt</a></li>
    
      <li><a href="/categories/java/">java</a></li>
    
      <li><a href="/categories/job/">job</a></li>
    
      <li><a href="/categories/kickstarter/">kickstarter</a></li>
    
      <li><a href="/categories/lightwaverf/">lightwaverf</a></li>
    
      <li><a href="/categories/linux/">linux</a></li>
    
      <li><a href="/categories/logo/">logo</a></li>
    
      <li><a href="/categories/manufacturing/">manufacturing</a></li>
    
      <li><a href="/categories/measurement/">measurement</a></li>
    
      <li><a href="/categories/media/">media</a></li>
    
      <li><a href="/categories/mobile/">mobile</a></li>
    
      <li><a href="/categories/mobile-app/">mobile app</a></li>
    
      <li><a href="/categories/modbus/">modbus</a></li>
    
      <li><a href="/categories/nanode/">nanode</a></li>
    
      <li><a href="/categories/ook/">ook</a></li>
    
      <li><a href="/categories/open-source/">open source</a></li>
    
      <li><a href="/categories/openhab/">openHAB</a></li>
    
      <li><a href="/categories/openenergymonitor/">openenergymonitor</a></li>
    
      <li><a href="/categories/openevse/">openevse</a></li>
    
      <li><a href="/categories/optical-pulse/">optical pulse</a></li>
    
      <li><a href="/categories/pcb/">pcb</a></li>
    
      <li><a href="/categories/pebble/">pebble</a></li>
    
      <li><a href="/categories/placement/">placement</a></li>
    
      <li><a href="/categories/platformio/">platformio</a></li>
    
      <li><a href="/categories/pluse/">pluse</a></li>
    
      <li><a href="/categories/presentation/">presentation</a></li>
    
      <li><a href="/categories/raspberry-pi/">raspberry Pi</a></li>
    
      <li><a href="/categories/raspberry-pi/">raspberry pi</a></li>
    
      <li><a href="/categories/renewable/">renewable</a></li>
    
      <li><a href="/categories/serial/">serial</a></li>
    
      <li><a href="/categories/shop/">shop</a></li>
    
      <li><a href="/categories/showcase/">showcase</a></li>
    
      <li><a href="/categories/smartwatch/">smartwatch</a></li>
    
      <li><a href="/categories/social-energy-monitoring/">social energy monitoring</a></li>
    
      <li><a href="/categories/solarpv/">solarPV</a></li>
    
      <li><a href="/categories/sparkfun/">sparkfun</a></li>
    
      <li><a href="/categories/sustainability/">sustainability</a></li>
    
      <li><a href="/categories/temperature/">temperature</a></li>
    
      <li><a href="/categories/three-phase/">three phase</a></li>
    
      <li><a href="/categories/travisci/">travisci</a></li>
    
      <li><a href="/categories/tutorials/">tutorials</a></li>
    
      <li><a href="/categories/upgrade/">upgrade</a></li>
    
      <li><a href="/categories/user-guide/">user guide</a></li>
    
      <li><a href="/categories/utility-meters/">utility meters</a></li>
    
      <li><a href="/categories/voltage-sensing/">voltage sensing</a></li>
    
      <li><a href="/categories/vrms/">vrms</a></li>
    
      <li><a href="/categories/website/">website</a></li>
    
      <li><a href="/categories/wifipixel/">wifipixel</a></li>
    
      <li><a href="/categories/wind/">wind</a></li>
    
      <li><a href="/categories/wind-turbine/">wind turbine</a></li>
    
      <li><a href="/categories/wireless/">wireless</a></li>
    
      <li><a href="/categories/workshop/">workshop</a></li>
    
      <li><a href="/categories/zerocarbonbritain/">zerocarbonbritain</a></li>
    
  </ul>
</section>
  
</div>
    </aside>
    
  </div>
</div>

<footer>
  <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">

  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor/guide'><i class="icon-github"></i></a>
  <a rel="me" href='https://blog.openenergymonitor.org/feed.xml'><i class="icon-rss"></i></a>

  <div class="credit" style="text-align:center;">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and <a href='https://github.com/coogie/oscailte'>Oscalite</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
<!--
<div class="searchtool">


<form action="https://encrypted.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.openenergymonitor.org" />
    <input class="search" id="search" type="text" name="q" results="0" placeholder="Search..." />
  </fieldset>
</form>


</div> -->
</div>
    </div>
  </div>
</div>
</footer>

<!--[if lt IE 7]>
  <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->

</body>
</html>
