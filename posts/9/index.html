<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blog | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="OpenEnergyMonitor Blog">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://blog.openenergymonitor.org/posts/9/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Blog | OpenEnergyMonitor">
    <meta property="og:site_name" content="Blog | OpenEnergyMonitor">
    <meta property="og:url" content="https://blog.openenergymonitor.org/posts/9/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Blog | OpenEnergyMonitor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Blog | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />



    <link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
	<link rel="apple-touch-icon" href="/images/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/images/favicon-144.png">
	<meta name="msapplication-config" content="/images/browserconfig.xml">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:light,bold&amp;subset=Latin" rel="stylesheet"> <!-- Ubuntu font -->
  <script src="https://use.fontawesome.com/e433d4b407.js"></script>

  </head>

<style>

html, body {
  word-wrap: break-word;
  font-family: "ubuntu", sans-serif;
}

a:visited, .a:hover, a:focus, a {
  color: #44b3e2;
}

.meta.clearfix {
  overflow-x: hidden;
}

.searchtool {
  width: 100%;
}

input[type=text] {
  border: 3px solid #44b3e2;
  border-radius: 6px;
  width: 100%;
  color: #000000;
  padding: 14px 20px;
  margin: 0;
  outline: none;
}

fieldset {
  border: 0;
  margin: 0;
}

button[type=submit] {
    width: 100%;
    background-color: #44b3e2;
    color: white;
    padding: 14px 20px;
    margin: 4px 0 0 0;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.communityWrapper {
  box-sizing: border-box;
  margin: 0 auto;
  width: 100%;
  height: 42px;
}

@media (min-width: 1080px) {
  .communityWrapper {
  width: 1080px;
  }
}

@media screen and (max-width: 400px) {
  .oemWrap {
  display: none;
  }
}

.fa-navicon {
  display: none;
  cursor: pointer;
  font-size: 30px;
  line-height: 42px;
  position: absolute;
  left: 0;
  color: #ffffff;
  padding-left: 12px;
  z-index: 9997;
}

@media screen and (max-width: 1079px) {
  .fa-navicon {
  display: inline-block;
  }
}

.titleHolder {
  position: relative;
  top: 0;
  width: 100%;
  height: 42px;
  background-color: #44b3e2;
  overflow: hidden;
}

.thisTitle {
  position: relative;
  display: inline-block;
  color: #ffffff;
  left: 0;
  line-height: 42px;
  padding-right: 12px;
  padding-left: 0;
  font-size: 20px;
  text-align: right;
}

.thisTitle a {
  color: #ffffff;
}

@media screen and (min-width: 1080px) {
  .thisTitle {
  font-size: 16px;
  text-align: left;
  padding-right: 0;
  padding-left: 7px;
  }
}

@media screen and (max-width: 1079px) {
  .thisTitle {
  width: 100%;
}
.thisTitle a {
  padding-right: 12px;
  }
}

.navigation {
  position: absolute;
  display: inline-block;
  top: 0;
  right: 0;
  margin-right: 6px;
  height: 42px;
  min-width: 700px;
  overflow: visible;
  padding-right: 7px;
  z-index: 20;
  box-sizing: content-box;
}

@media screen and (min-width: 1080px) {
  .navigation {
  position: relative;
  float: right;
  display: inline-block;
  margin: 0;
  }
}

.navigation ul {
  list-style-type: none;
  float: right;
  top: 0;
  margin: 0;
  padding: 0;
  height: 100%;
  display: block;
}

.navigation ul li {
  float: left;
  background-color: #44b3e2;
}

.navigation ul li a {
  display: block;
  line-height: 42px;
  font-family:"ubuntu";
  font-size: 16px;
  text-align: center;
  padding-left: 10px;
  padding-right: 10px;
  color: #ffffff;
}

.menuFreeze {
  height: 100%;
  overflow: hidden;
}

@media screen and (max-width: 1079px) {
.navigation {
  position: fixed;
  display: none;
  top: 0;
  left: 0;
  height: 100vh;
  margin: 0;
  width: 0;
  font-size: 20px;
  background-color: #44b3e2;
  color: #ffffff;
  box-sizing: border-box;
  overflow: auto;
  min-width: 0;
  padding-right: 0;
  z-index:9999;
}

.navigation ul {
  list-style-type: none;
  margin: 0;
  padding-top: 0;
  display: block;
}

.navigation ul li a {
  box-sizing: border-box;
  font-family: "ubuntu";
  font-size: 20px;
  display: block;
  color: #ffffff;
  padding: 20px 20px 20px 40px;
  min-width: 220px;
  text-align: left;
}

.navigation ul li .fa {
  min-width: 25px;
  }
}

.blackOut {
  position: fixed;
  display: none;
  top: 0;
  right: 0;
  height: 100%;
  width: 100%;
  background-color: rgba(0,0,0,0.5);
  overflow: hidden;
  cursor: pointer;
  z-index:9998;
}

.actoemLink {
  background-color: #368fb4 !important;
}

.actoemLink a {
  color: #ffffff !important;
}

</style>

<body >




<div class="titleHolder">
  <div class="communityWrapper">
    <i class="fa fa-navicon"></i>
    <div class="thisTitle">
      <a href="/">
        <strong>Blog</strong>
        <span class="oemWrap">
        | Open<strong>EnergyMonitor</strong>
        </span>
      </a>
    </div>
    <div id="siteLinks" class="navigation">
      <ul>
        <li title="the homepage of OpenEnergyMonitor">
          <a href="https://openenergymonitor.org">
            <i class="fa fa-home" aria-hidden="true"></i><span class="navname">&nbsp;Home</span>
          </a>
        </li>
        <li title="a user guide for the OpenEnergyMonitor system">
          <a href="https://guide.openenergymonitor.org">
            <i class="fa fa-book" aria-hidden="true"></i><span class="navname">&nbsp;Guide</span>
          </a>
        </li>
        <li title="general information about energy monitoring, diversion and sustainability">
          <a href="https://learn.openenergymonitor.org">
            <i class="fa fa-mortar-board" aria-hidden="true"></i><span class="navname">&nbsp;Learn</span>
          </a>
        </li>
        <li title="a definitive list of resources for OpenEnergyMonitor hardware">
          <a href="https://guide.openenergymonitor.org/technical/resources/">
            <i class="fa fa-list-alt" aria-hidden="true"></i><span class="navname">&nbsp;Resources</span>
          </a>
        </li>
        <li title="the openenergymonitor forum">
          <a href="https://community.openenergymonitor.org">
            <i class="fa fa-comments" aria-hidden="true"></i><span class="navname">&nbsp;Community</span>
          </a>
        </li>
        <li title="you are here: keep up with new developments at OpenEnergyMonitor" class="actoemLink">
          <a href="https://blog.openenergymonitor.org">
            <i class="fa fa-bullhorn" aria-hidden="true"></i><span class="navname">&nbsp;Blog</span>
          </a>
        </li>
        <li title="the official OpenEnergyMonitor online store">
          <a href="https://shop.openenergymonitor.com">
            <i class="fa fa-shopping-cart" aria-hidden="true"></i><span class="navname">&nbsp;Shop</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="blackOut"></div>
<div style="position:relative;width:100%;top:0;height:20px"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script defer src="/javascripts/octopress.js"></script>

<script>
  var _gaq=[['_setAccount','UA-10321170-4'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<script>
  var disqus_shortname = 'openenergymonitor';
  
    
    var disqus_script = 'count.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>

<script>

var closeStatus = false;

function openButton() {
  $("html, body").addClass("menuFreeze");
  $(".blackOut").show();
  $(".navigation").show();
  $(".navigation").animate({ width:'220' },"0.5s");
}

$(".fa-navicon").click(function() {
  openButton();
  closeStatus = true;
});

function closeButton() {
  $("html, body").removeClass("menuFreeze");
  $(".blackOut").hide();
  $(".navigation").animate({ width:'0' },"0.5s");
}

$(".blackOut").click(function() {
  closeButton();
  closeStatus = false;
});

$(document).ready(function(){
  $("table").wrap("<div style='max-width:100%;overflow-x:auto'></div>");
});

$(window).resize(function(){
  if ($(window).width() > 1079 && closeStatus == true) {
    if (!$("html").hasClass("mobile-device")) {
      closeButton();
      closeStatus = false;
    }
  }
});
</script>

<div class="grid-wrapper">
  <div class="grid grid-center">
    
    <div class="grid__item two-thirds lap-one-whole palm-one-whole">
    

        
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/09/from-forum-using-modbus-rs485-to-read/">From the Forum: Using Modbus RS485 to read a SDM630M 3-phase meter </a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-09-11T11:20:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-09-11 11:20:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> six minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/rs485/'>RS485</a></li>
      
        <li><a class='category' href='/categories/modbus/'>modbus</a></li>
      
        <li><a class='category' href='/categories/three-phase/'>three phase</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/09/from-forum-using-modbus-rs485-to-read/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div><br /></div><div><a href="http://openenergymonitor.org/emon/user/1332">JBecker</a> writes :</div><div><br /></div><div><div>I am using a modified OpenEnergyMonitor energy monitoring hardware since more than a year now, with one voltage sensor and three CTs for the current measurement of the three mains phases. This system logs via the RFM12 and a Jeelink USB dongle to Emoncms on a Windows Home Server. This setup is running very reliably with an accuracy of better than ~4% compared to my power meter. I think it would be possible to get better accuracy by using individual voltage sensors on all phases.</div><div><br /></div><div>In Germany the majority of household have three phase supply. To be able to use three voltage sensors it would be necessary to have three outlets within the distribution (for non-invasive mounting). I have never seen that. This means that you have to ask a friendly electrician to install these outlets. But then the whole thing is not really 'non-invasive' any more (and the OEM solutions becomes quite complex with a lot of cabling). This is a dilemma which is hard to solve.</div><div><br /></div><div>So I came to another solution which is quite simple and uses mostly ready-made components:</div><div><br /></div><div>I am using Chinese 3-phase energy monitors since some time for professional purposes (PV-Systems with battery storage). A very nice unit of this type is the <a href="http://bg-etech.de/os/product_info.php?products_id=50">Eastron SDM630M</a>. This device has integrated shunts for current measurement, a nice little display and an RS485 interface for data readout with Modbus protocol. A lot of measuring values can be read, including imported and exported energy, phase voltages, currents, frequency, reactive power and so on. Parameters for the RS485 can also be set via four small keys and the display.</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Guaw2kl_rPI/VBF8gtI9gmI/AAAAAAAA7fU/5iWTZ7z1cvA/s1600/P1030829.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-Guaw2kl_rPI/VBF8gtI9gmI/AAAAAAAA7fU/5iWTZ7z1cvA/s1600/P1030829.JPG" height="320" width="291" /></a></div><div><br /></div><div><br /></div><div>For data storage and visualization I decided use the new Emoncms 'low-write' version on a Raspberry Pi. This was installed according to the installation instructions and worked 'out-of-the-box'. The only thing missing on the RasbPi for direct connection to the SDM630 is an RS485 interface.</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-jgtDxANgmBg/VBF8jzNsIgI/AAAAAAAA7fc/dcjhu0OQG7o/s1600/P1030830.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-jgtDxANgmBg/VBF8jzNsIgI/AAAAAAAA7fc/dcjhu0OQG7o/s1600/P1030830.JPG" height="240" width="320" /></a></div><div><br /></div><div><br /></div><div>To be able to use the already existing software for data collection on the RasPi (Emonhub), I simply made a 'clone' of the RFM12Pi module. This now has an RS485 driver onboard instead of the RFM12 RF transceiver. Software on the RS485Pi board is the Opti-bootloader (same as on RFM12Pi) for Arduino compatibility and a small sketch for data readout via modbus. As the only available hardware UART is already used for communication with the RasbPi I had to use a software serial for the RS485 interface. (The 'ModbusMasterSoft' library I use is a dirty hack of the existing ModbusMaster library and the AltSoftSerial library. I found no decent way to make these two work together, so I had to modify them)</div><div><br /></div><div>So the whole installation now consists of:</div><div><br /></div><div>- a Raspberry Pi with power supply and the RS485Pi interface board</div><div><br /></div><div>- the SDM630 energy meter</div><div><br /></div><div>(- and a cable in between :-))</div></div><div><br /></div><div>See forum thread for schematic and code:&nbsp;<a href="http://openenergymonitor.org/emon/node/5743">http://openenergymonitor.org/emon/node/5743</a></div><div><br /></div><div><br /></div><div><script class="&quot;brush:" csharp="" quot="" type="&quot;syntaxhighlighter&quot;">  Written by Joerg Becker    uses code from:   - ModbusMaster library   - AltSoftSerial library    - pezibaer (SDM630M-DC thread in www.photovoltaikforum.com)      hardware 'cloned' from:   - RFM12Pi (OpenEnergyMonitor, mharazinov)   - 3V3 RS485 driver added   - bootloader compatible to RFM12Pi      ModbusMasterSoft is a dirty hack I made by combining the ModbusMaster library and the    AltSoftSerial library. I was unable to combine these two in a decent way.   The software serial is used for the RS485, hardware serial for Raspberry Pi connection */  #include &lt;AltSoftSerial.h&gt; #include &lt;ModbusMasterSoft.h&gt;  // settings for RS485 bus (SDM630M can be configured to different values!) #define _SDM630M_MODBUS_ID  4    // Modbus address of SD630M energy monitor #define _MODBUS_BAUD     9600    // Modbus (RS485) baud rate  // settings for communication with Raspberry Pi #define _INTERVAL          10    // send interval (s) to Raspberry Pi (running EmonCMS) #define _RASPI_BAUD      9600    // UART baud rate   // some hardware definitions #define LED1_PIN           A0    // RS485 activity LED #define LED2_PIN           A1    // UART activity LED  //AltSoftSerial AltSerial; // not needed here, done in ModbusMasterSoft  // instantiate ModbusMaster object  ModbusMasterSoft node(_SDM630M_MODBUS_ID);  // float calculations are slow, but here we have enough processing time float v1,v2,v3; float i1,i2,i3; float p1,p2,p3,pa; float v1_sum,v2_sum,v3_sum; float v1_avg,v2_avg,v3_avg; float i1_sum,i2_sum,i3_sum; float i1_avg,i2_avg,i3_avg; float p1_sum,p2_sum,p3_sum,pa_sum; float p1_avg,p2_avg,p3_avg,pa_avg; uint32_t timeout;   void setup() {    pinMode(LED1_PIN, OUTPUT);    pinMode(LED2_PIN, OUTPUT);    digitalWrite(LED1_PIN, 0);    digitalWrite(LED2_PIN, 0);        Serial.begin(_RASPI_BAUD);    Serial.println("SDM630M Test Program");    delay(1000);     // initialize Modbus communication baud rate    node.begin(_MODBUS_BAUD);        timeout = millis(); }  void loop()  {    static uint8_t interval = 0;    uint8_t  result;      uint32_t tmpL;     tmpL = millis();                 if( (tmpL-timeout)&gt;=1000 )  // do this every second    {       timeout = tmpL;        digitalWrite(LED1_PIN, 1);         digitalWrite(LED2_PIN, 0);           ReadVoltages();       v1_sum += v1;       v2_sum += v2;       v3_sum += v3;        ReadCurrents();       i1_sum += i1;       i2_sum += i2;       i3_sum += i3;        ReadPowers();       p1_sum += p1;       p2_sum += p2;       p3_sum += p3;       pa_sum += pa;       if( ++interval&gt;=_INTERVAL )       {          interval = 0;          v1_avg = v1_sum*10/_INTERVAL;  // preserve one (of two) decimal digit(s)          v2_avg = v2_sum*10/_INTERVAL;          v3_avg = v3_sum*10/_INTERVAL;          v1_sum = v2_sum = v3_sum = 0;          i1_avg = i1_sum/_INTERVAL;          i2_avg = i2_sum/_INTERVAL;          i3_avg = i3_sum/_INTERVAL;          i1_sum = i2_sum = i3_sum = 0;          p1_avg = p1_sum/_INTERVAL;          p2_avg = p2_sum/_INTERVAL;          p3_avg = p3_sum/_INTERVAL;          pa_avg = pa_sum/_INTERVAL;          p1_sum = p2_sum = p3_sum = pa_sum = 0;          digitalWrite(LED2_PIN, 1);          PrintJeelink();       }       digitalWrite(LED1_PIN, 0);    } }  void PrintJeelink(void) {    unsigned char i;    union DATA    {       unsigned char item[];       struct       {          int P1;          int P2;          int P3;          int V1;          int V2;          int V3;       } val;    } data;           data.val.P1 = (int)(p1_avg+0.5);    data.val.P2 = (int)(p2_avg+0.5);    data.val.P3 = (int)(p3_avg+0.5);    data.val.V1 = (int)(v1_avg+0.5);    data.val.V2 = (int)(v2_avg+0.5);    data.val.V3 = (int)(v3_avg+0.5);       Serial.print(" 10");              // this is data from 'node' number 10    for(i=0;i&lt;sizeof(data.val);i++)    {      Serial.print(" ");      Serial.print(data.item[i]);    }    Serial.println(); }  uint8_t ReadVoltages( void ) {    uint8_t  result;    uint32_t val;        result = node.readInputRegisters(0x0000, 6);  // read Modbus registers 0 to 5    if (result == node.ku8MBSuccess)     {       val = ((uint32_t)node.getResponseBuffer(0))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(1));       memcpy(&amp;v1, &amp;val, 4);       val = ((uint32_t)node.getResponseBuffer(2))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(3));       memcpy(&amp;v2, &amp;val, 4);       val = ((uint32_t)node.getResponseBuffer(4))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(5));       memcpy(&amp;v3, &amp;val, 4);    }       return result; }  uint8_t ReadCurrents( void ) {    uint8_t  result;    uint32_t val;        result = node.readInputRegisters(0x0006, 6);  // read Modbus registers 6 to 11    if (result == node.ku8MBSuccess)     {       val = ((uint32_t)node.getResponseBuffer(0))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(1));       memcpy(&amp;i1, &amp;val, 4);       val = ((uint32_t)node.getResponseBuffer(2))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(3));       memcpy(&amp;i2, &amp;val, 4);       val = ((uint32_t)node.getResponseBuffer(4))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(5));       memcpy(&amp;i3, &amp;val, 4);    }       return result; }  uint8_t ReadPowers( void ) {    uint8_t  result;    uint32_t val;        result = node.readInputRegisters(0x000C, 6);  // read Modbus registers 12 to 17    if (result == node.ku8MBSuccess)     {       val = ((uint32_t)node.getResponseBuffer(0))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(1));       memcpy(&amp;p1, &amp;val, 4);       val = ((uint32_t)node.getResponseBuffer(2))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(3));       memcpy(&amp;p2, &amp;val, 4);       val = ((uint32_t)node.getResponseBuffer(4))&lt;&lt;16 |((uint32_t)node.getResponseBuffer(5));       memcpy(&amp;p3, &amp;val, 4);    }       return result; } ]]></script></div><div><br /></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/08/a-right-to-build-open-approach-to/">A right to build: An open approach to housing provision: self-provision</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-08-26T16:35:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-08-26 16:35:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> four minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/open-source/'>open source</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/08/a-right-to-build-open-approach-to/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <br /><div style="text-align: right;"><a href="http://issuu.com/alastairparvin/docs/2011_07_06_arighttobuild" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img alt="http://issuu.com/alastairparvin/docs/2011_07_06_arighttobuild" border="0" src="http://2.bp.blogspot.com/-PkHatNxkQjM/U_yz8GedycI/AAAAAAAAGNA/fzqMeqCVSfc/s1600/arighttobuild.png" height="320" width="241" /></a></div>A right to build is a booklet written by <a href="http://www.ted.com/talks/alastair_parvin_architecture_for_the_people_by_the_people">Alaistair Parvin</a> of (00 and <a href="http://wikihouse.cc/">Wikihouse</a>), David Saxby, Cristina Cerulli and Tatjana Schneider that outlines a clear and comprehensive vision for how a self-provision approach to housing could be the best way to tackle the UK housing crisis while delivering higher quality, higher performance low energy housing. <br /><br />Its a deeply inspiring vision of the potential power that empowering, distributive, open ways of doing things, that gives us all agency, to participate in solving problems like climate change can have.<br /><br />'A right to build' starts by making an observation that we have become accustomed to an assumption that progress in production is the expansion of mass-produced goods, built by professionals and mass-consumed by citizens, a legacy of the industrial revolution, but far from progress the report provides a strong case that the large house builder model has actually resulted in a deterioration in the quality of housing when measured against modern examples of self-provision and self-build.<br /><br />Driven by a combination of massive house price inflation over the last 40 years and the associated treatment of homes increasingly as financial assets, the incentives for higher quality housing has been sidelined with financial values being pursued over use value.<br /><br /><b>Who should build?</b><br /><br /><i>“The question is not ‘What homes do we need?, but rather ‘Who should build them?’ “ - A right to build.</i><br /><b><br />Self-provision</b><br /><br />Self provision of housing is a spectrum of models, the most common characteristic is that the first owners act as the client commissioning their own home. Beyond this there is a varying degree of involvement. From contracting out all of the work or doing a lot of the work yourself (self-build).<br /><br /><b>Advantages to self-provision:</b><br /><br />Self provision fundamentally transforms the kind of houses and neighbourhoods that get built:<br /><ul><li>Designed for long term use-value, higher quality: affordability, generosity, sustainability, flexibility, community. Form of production that is structured around valuing those things. </li></ul><ul><li>Increased affordability. Overall cost often a third less and can be even less if you use your own 'sweat equity' (do a proportion of the building work yourself). </li></ul><ul><li>More innovative, more likely to explore more innovate architectural styles and newer and higher performing low energy building materials. More likely to create spaces that lead to further innovation: workshops, garages.</li></ul>Self-provided housing is intrinsically more capable of delivering better outcomes because the developer is the user.<br /><br /><b>Removing barriers to participation</b><br /><br /><i>“The most challenging, but most crucial aspect of scaling the self-provided housing sector is not just increasing capacity for the current self-providing demographic, but coming up with innovative models which lower the economic threshold for participation.”</i><br /><br />It mentions the Walter Segal system for self-build conceived in the 1960s and 1970s which is one historical example of an attempt to do this.<br /><ol><li>Used an affordable, widely available and easy-to- work with material: timber.</li><li>Lowered the skill-threshold for self-builders. With a bit of basic training and common sense, even those who didn’t have mainstream construction skills could put together a Walter Segal house.</li></ol>Alaistair Parvin and 00's more recent project is <a href="http://wikihouse.cc/">wikihouse</a> an open source low energy affordable home construction system that makes use of modern CNC manufacturing methods and self assembly on site. Wikihouse has a growing global community of people developing design's, sharing them openly online and prototyping these housing solutions. Like Walter Segal's system the aim is to lower the economic threshold for participation both by creating an open source self-build system and all the learning resources and collaboration, peer to peer support systems that can come from online open source projects. <br /><br />Towards the end of the report a very good point is made about the mistaken attitude and opportunity lost that often classifies the professional-citizen relationship:<br /><i><br />“Thirdly, by treating citizens only as passive users of a finished commodity provided by professionals, it can actually decrease the usefulness and quality of that commodity (as this booklet has argued in the case of housing) and decrease also the self-reliance and mutual support within communities. Citizens can be treated as passive, rather than active users, and their potential value can be overlooked. As the New Economics Foundation wrote in their 2008 pamphlet on the subject:</i><br /><br /><i>“The reason today’s problems seem so intractable is that public services, and technocratic management systems, have become blind to the most valuable resource they possess: their own clients and the neighbourhoods around them. When these assets are ignored or deliberately side-lined, then they atrophy.””</i><br /><br />This is arguably one of the key principles of open source which is perhaps one of the clearest definitions of a system that enables this, a phrase commonly found in open source projects is that this project is open for everyone. Its open to everyone to make build, improve, modify, share, learn. <br /><br />By treating fellow citizens as co-developers, fellow self-providers as equal contributors rather than passive consumers it unlocks this capacity that we all have.<br /><br />Read the A Right to build here <a href="http://issuu.com/alastairparvin/docs/2011_07_06_arighttobuild">http://issuu.com/alastairparvin/docs/2011_07_06_arighttobuild</a><br /><br />Alaistair Parvin's TED talk: <a href="http://www.ted.com/talks/alastair_parvin_architecture_for_the_people_by_the_people">http://www.ted.com/talks/alastair_parvin_architecture_for_the_people_by_the_people</a><br /><br />Wikihouse: <a href="http://wikihouse.cc/">http://wikihouse.cc/</a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/08/monitoring-solarpv-heatpump-and-house/">Monitoring SolarPV, Heatpump and house electric, EmonTx v2 system upgrade example</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-08-06T17:25:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-08-06 17:25:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> five minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/heat-pump/'>Heat Pump</a></li>
      
        <li><a class='category' href='/categories/emontx-v2/'>emonTx V2</a></li>
      
        <li><a class='category' href='/categories/upgrade/'>upgrade</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/08/monitoring-solarpv-heatpump-and-house/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Several years ago we did a community energy monitoring project in our local area, Penrhyndeudraeth, North Wales. It involved installing 20 openenergymonitor energy monitors in 20 households and carrying out energy assessment looking at electricity, heating and transport, there is a little more about it and some of the tools we developed <a href="http://openenergymonitor.blogspot.co.uk/2012/01/community-energy-plan-maker.html">here.</a><br /><br />The houses that where most engaged in the monitoring part of the project still have those energy monitors installed and yesterday I went to upgrade one of these systems, I thought Id write a blog post on what I did (written half as a guide) as it might be useful for those using older hardware such as the emonTx V2 and its also quite an interesting example of what you can do with the monitoring system.<br /><br />The upgrade essentially involved replacing a first generation nanode basestation with a RaspberryPI basestation running the latest image and also upgrading the emontx v2 that was in place with new firmware that both does the higher accuracy continuous sampling (developed by Robin Emley) and the watt hour calculation on board.<br /><br />This particular system is measuring Solar PV generation, household electric consumption and the electrical consumption of a heatpump. It has an EmonGLCD Display running the SolarPV firmware, with the red/green glowing ambient light depending on whether more power is being used than generated or vice versa and the data is also posted to emoncms.org for graphing.<br /><br />Here's a system diagram: <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-NSjTs-IBrD8/U-IYZE55v0I/AAAAAAAAFXI/miI26ZPQKDI/s1600/hp_pv_h_systemdiagram.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-NSjTs-IBrD8/U-IYZE55v0I/AAAAAAAAFXI/miI26ZPQKDI/s1600/hp_pv_h_systemdiagram.png" height="370" width="640" /><b></b></a></div><b>EmonTx:</b><br /><br />Upload to the EmonTxV2 the continuous sampling + watt hour firmware:<br /><a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV2/emonTx_continuous_watthours">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV2/emonTx_continuous_watthours&nbsp;</a><br /><br />The same thing can of course be achieved with an EmonTxV3 but with the added benefit of a fourth channel and only needing the one ACAC Power adapter. If you have the EmonTxV3 upload the continuous sampling + watt hour firmware found here:<a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM12B/Examples/emonTxV3_continuous_kwhtotals_noeeprom"> https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM12B/Examples/emonTxV3_continuous_kwhtotals_noeeprom </a><br /><br /><b>EmonGLCD</b><br />Open the SolarPV example: https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV<br /><br />On <a href="https://github.com/openenergymonitor/EmonGLCD/blob/master/SolarPV/SolarPV.ino#L68">lines 68 and 69</a> change the emontx radio packet defenition from:<br /><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; typedef struct { int power1, power2, power3, Vrms; } PayloadTX;<br />&nbsp;&nbsp;&nbsp; PayloadTX emontx;</span></span><br /><br />to:<br /><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; typedef struct { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned long msgNumber; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int heatpump; // heatpump<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int power1; // house power<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int power2; // solar power<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; long wh_CT1;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; long wh_CT2;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; long wh_CT3;<br />&nbsp;&nbsp;&nbsp; } PayloadTX;<br />&nbsp;&nbsp;&nbsp; PayloadTX emontx;</span></span><br /><br />I've named the second variable here heatpump instead of power1 and then powers 1 to 3 because power1 and power2 are used as house power and solar power lower down in the firmware.<br /><br /><b>RaspberryPI Basestation</b><br />I used the latest (28th of July emonSD image) that has EmonHub (thanks to Jerome and Paul Burnell) and emoncms ready to go but without the local emoncms installation enabled, the PI was just used as an EmonHub gateway forwarder to emoncms.org. I used the nice pimoroni berryblack raspberrypi case so that the installation was tidy.<br /><br /><a href="http://files.openenergymonitor.org/emonSD-13-08-14.img.zip">Download ready-to-go image: emonSD-13-08-14.img.zip [link updated]</a> <br /><br />To configure EmonHub to post to emoncms.org, SSH into the raspberrypi and put the PI in read/write mode with:<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp; rpi-rw</span></span><br /><br />and then open the emonhub configuration file:<br /><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; nano /boot/emonhub.conf</span></span><br /><br />Set the dispatcher url to: http://emoncms.org and the apikey to your emoncms.org account write apikey.<br /><br />In order to decode the emontx continuous + watt hour radio packet add a node decoder to the nodes section in the emonhub config file at the bottom:<br /><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; [nodes]<br />&nbsp;&nbsp;&nbsp; [[10]]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Datacodes = L,h,h,h,l,l,l</span></span><br /><br /><br />Secure the pi user by changing the password (the default password is raspberry)<br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><br /></span></span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp; passwd</span></span><br /><br />Place the PI back in read only mode:<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp; rpi-ro</span></span><br /><br /><b>Emoncms configuration</b><br /><br />With the emontx running and the raspberrypi configured as above the inputs will now appear in emoncms.org, but they will be un-named. For this particular installation I named them as in the picture below to correspond to the radio packet format and what I knew I was monitoring on each CT channel.<br /><br />I then logged each of the power inputs to a fixed interval with averaging (PHPFiwa) feed and used the Wh Accumulator input processor to record the Watt hour totals. The Wh Accumulator checks if the watt hour total has reset and if it does it continues the accumulation from the last point. I used the fixed interval without averaging feed engine for the watt hour feeds.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-MAZGbUyY-Q4/U-IhT7TGOdI/AAAAAAAAFXY/Oe5O3m7RZWc/s1600/inputconfig.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-MAZGbUyY-Q4/U-IhT7TGOdI/AAAAAAAAFXY/Oe5O3m7RZWc/s1600/inputconfig.png" height="524" width="640" /></a></div><br />To make use of the higher accuracy calculating of watt hours on the emontx and the recording of watt hour feeds<b>, </b>there is a slightly different procedure for creating dashboard kwh per day graphs: <br /><br /><b>Creating a daily electricity consumption graph in a dashboard using watt hour feeds (instead of the old power_to_kwhd method).&nbsp;</b>&nbsp; <b><br /></b><br /><br />Create a new dashboard and select visualisations &gt; bargraph.<br /><br />Click on the bargraph and click configure to bring up the configuration dialog. Select the watt hour feed that you want to display daily totals from, enter interval, units, dp, scale and delta=1 as below: (Note that you could change the interval here to any interval: hourly, half day, week etc)<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Tn1o4o0gNUA/U-IwqaYrUlI/AAAAAAAAFXo/eTAOIhczZqU/s1600/bargraphconfig.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-Tn1o4o0gNUA/U-IwqaYrUlI/AAAAAAAAFXo/eTAOIhczZqU/s1600/bargraphconfig.png" height="338" width="640" />&nbsp;</a></div><div class="separator" style="clear: both; text-align: left;">Click save and continue to add any other text and widgets as required. A simple dashboard showing daily consumption and the current power could look like the screenshot below and could be repeated adding a graph for each channel, heatpump, solarpv and house consumption.</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-adMy8oRQCqs/U-IwqgFm4VI/AAAAAAAAFXs/pH0NkxKeIgc/s1600/simpledashboard.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-adMy8oRQCqs/U-IwqgFm4VI/AAAAAAAAFXs/pH0NkxKeIgc/s1600/simpledashboard.png" height="300" width="640" /></a></div>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/08/pebble-smart-watch-emoncms-heating/">Pebble Smart Watch Emoncms Heating Control Demo</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-08-01T15:50:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-08-01 15:50:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> five minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/rfm12/'>RFM12</a></li>
      
        <li><a class='category' href='/categories/control/'>control</a></li>
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
        <li><a class='category' href='/categories/heating/'>heating</a></li>
      
        <li><a class='category' href='/categories/pebble/'>pebble</a></li>
      
        <li><a class='category' href='/categories/smartwatch/'>smartwatch</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/08/pebble-smart-watch-emoncms-heating/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    This post follows on my post a while back on&nbsp;<a href="http://openenergymonitor.blogspot.co.uk/2013/12/emoncms-early-heating-control-demo.html">Emoncms heating control</a>, and links in with my previous post on using Tasker to display Emoncms notifications. For details of the hardware and overview of the heating control setup, see the Emoncms heating control post linked above.<br><br>The Pebble is a Bluetooth connected smart watch which works with Apple and android smartphones. Using an e-ink display the Pebble watches achieves a week of battery life. Very impressive from a hardware point of view. I've been using a Pebble with my android phone for the past couple of weeks and found the Pebble to be useful for keeping up with <a href="http://openenergymonitor.blogspot.com/2014/08/android-tasker-pebble-smartwatch.html">notifications</a> while out out and about and&nbsp;especially for <a href="https://play.google.com/store/apps/details?id=ca.rebootsramblings.musicboss&amp;hl=en_GB">controlling music</a>, <a href="https://play.google.com/store/apps/details?id=com.batescorp.pebble.nav&amp;hl=en_GB">navigation directions</a> and <a href="https://play.google.com/store/apps/details?id=com.strava&amp;hl=en_GB">activity tracking</a> while out biking, running, driving and even swimming!<br><br>The thought occurred to me that the Pebble could potentially be a super convenient way to quickly control my heating. I've got working a simple demo to turn my heating on and off, the could easily be extended to allow setting a set point.<br><br>When the Pebble was first released my friend Ryan Brooks put together a <a href="http://openenergymonitor.blogspot.com/2014/02/pebble-smart-watch-emoncms-display.html">demo to display feed data from Emoncms on the pebble</a>. The code for this demo is up on GitHub, however since then things have moved on, Pebble have released SDK 2.0 and launched the pebble app store allowing many applications to be easily loaded onto the Pebble. One of the more powerful applications is <a href="https://play.google.com/store/apps/details?id=com.kodek.pebbletasker&amp;hl=en_GB">Pebble Tasker</a>, when linked with the <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">main Tasker App</a> on an android phone the possibles are endless. See my previous <a href="http://openenergymonitor.blogspot.com/2014/08/android-tasker-pebble-smartwatch.html">blog post on using Tasker to display Emoncms notification on an android phone</a>. Taking inspiration from <a href="http://nathan.chantrell.net/home-automation/">Nathan Chantrell's home automation setup</a> using Pebble and Tasker I decided to have a go at directly controlling my heating from my Pebble, here is the result:<br><br><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-_SSMd3zwwb4/U9p1Vm5zYDI/AAAAAAAA4ns/QS82TULGXx8/s1600/P1050327.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-_SSMd3zwwb4/U9p1Vm5zYDI/AAAAAAAA4ns/QS82TULGXx8/s1600/P1050327.JPG" height="240" width="320"></a></div><br><br><iframe allowfullscreen="" frameborder="0" height="315" src="//www.youtube.com/embed/yRyeDhEQVkg" width="560"></iframe> <br><div class="separator" style="clear: both; text-align: center;"></div><br><br><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-sJ0ArawyZgQ/U9p1WUgL-7I/AAAAAAAA4nw/SUXXwndvDN4/s1600/P1050328.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-sJ0ArawyZgQ/U9p1WUgL-7I/AAAAAAAA4nw/SUXXwndvDN4/s1600/P1050328.JPG" height="240" width="320"></a></div><div class="separator" style="clear: both; text-align: center;"><br></div><div class="separator" style="clear: both; text-align: left;">Here are the steps to replicate this system:</div><h3 style="clear: both; text-align: left;">1. Install Emoncms on a Raspberry Pi and enable RF12 Packetgen Module&nbsp;</h3><div class="separator" style="clear: both; text-align: left;">I used the new pre-built SD card image for the low write version of emoncms, downloadable from the link below. This is soon to become our default Raspberry Pi pre-built image once testing is complete</div><div class="separator" style="clear: both; text-align: left;"><a href="https://github.com/emoncms/emoncms/tree/bufferedwrite">https://github.com/emoncms/emoncms/tree/bufferedwrite</a></div><div class="separator" style="clear: both; text-align: left;"><br></div><div class="separator" style="clear: both; text-align: left;">Following the setup guide enable local logging and configure emonHub</div><div class="separator" style="clear: both; text-align: left;"><a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/setup.md">https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/setup.md</a></div><div class="separator" style="clear: both; text-align: left;"><br></div><div class="separator" style="clear: both; text-align: left;">The heating control setup requires the emoncms Packetgen module. Follow the steps to enable packetgen to work with emonHub.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/emonhubmod.md">https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/emonhubmod.md</a></div><div class="separator" style="clear: both; text-align: left;">More info on packetgen module can be found: <a href="https://github.com/emoncms/packetgen">https://github.com/emoncms/packetgen</a></div><h3 style="clear: both; text-align: left;">2. Setup RFM12B receiver and control relay&nbsp;</h3><div>To perform the actual control of the boiler you will need to setup an RFM12B receiver node with a relay or similar. The actual hardware setup will depend on what you want to control, a JeeLink or partially populated emonTx V2 work well as a good base for the control hardware. See my <a href="http://openenergymonitor.blogspot.com/2013/12/emoncms-early-heating-control-demo.html">previous post on heating control</a> for more info regarding the hardware. The packetgen module will provide an example Arduino sketch to upload.&nbsp;</div><div><br></div><h3>3. Install and Configure Tasker on your android Phone&nbsp;</h3><div><a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm</a><br><br><div>The emoncms API to set a packetgen variable is as follows:<br><br><i>http://YOUR_EMONCMS_SERVER_IP_OR_HOSTNAME/emoncms/packetgen/update.json?id=4&amp;value=1&amp;apikey="YOUR_RW_APIKEY"</i></div><div><br>ID is the id of the packetgen variable (they start at 0) and value is the value to be set, the example above will turn the heating on setting variable 4 which in my setup is a boolean control variable to '1'. You can test if this is working by calling the API in your browser.<br><br></div>I've created a Tasker template task which calls the above API which can be downloaded from Github and imported into Tasker, follow instructions on Github Readme. Variables should be self-explanatory.<br><br><a href="https://github.com/emoncms/androidTasker">https://github.com/emoncms/androidTasker</a><br><br><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-cUl9ckQsfuY/U9uzvgik16I/AAAAAAAA4s0/L8JNp-rUeE8/s1600/2014-08-01+15.32.06.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-cUl9ckQsfuY/U9uzvgik16I/AAAAAAAA4s0/L8JNp-rUeE8/s1600/2014-08-01+15.32.06.png" height="640" width="400"></a></div><div class="separator" style="clear: both; text-align: center;"><br></div><div class="separator" style="clear: both; text-align: left;">If a successful response is received from the Emoncms server a 'success' notification is displayed, else a fail notification is activated.&nbsp;</div><div class="separator" style="clear: both; text-align: center;"><br></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-PqdqiEaQ0IU/U9u0XAshGiI/AAAAAAAA4tA/U4Z2b-S7LmU/s1600/2014-08-01+15.32.51.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-PqdqiEaQ0IU/U9u0XAshGiI/AAAAAAAA4tA/U4Z2b-S7LmU/s1600/2014-08-01+15.32.51.png" height="400" width="225"></a></div><div class="separator" style="clear: both; text-align: center;"><br></div><br>Home screen Tasker task shortcut widgets can be created on your android home screen to allow Tasker tasks to be easily activated, or profiles can be setup to turn the heating on as you arrive home / leave work or certain times per day. The possibles are endless! Just make sure your system has some hardware fail-safe so you don't get home to a house like a sauna or worse!<br><br></div><div><br>If you are setting up Tasker yourself from scratch setup GET requst as follows:</div><div><br><i>New Task &gt; + new action &gt; net &gt; HTTP GET &gt; enter HTTP API above into host and (optionally) write output to log file&nbsp;</i></div><h3><br>4. Install &amp; configure Pebble Tasker on the Pebble Watch</h3><div class="separator" style="clear: both; text-align: left;"><a href="https://play.google.com/store/apps/details?id=com.kodek.pebbletasker&amp;hl=en_GB">https://play.google.com/store/apps/details?id=com.kodek.pebbletasker&amp;hl=en_GB</a></div><div class="separator" style="clear: both; text-align: left;"><br></div><div class="separator" style="clear: both; text-align: left;">To map Tasker tasks to allow easy control from a Pebble&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-d7UrLZR3-qU/U9umjLXlyEI/AAAAAAAA4sY/aLp4ph6XcXw/s1600/2014-07-31+17.10.26.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-d7UrLZR3-qU/U9umjLXlyEI/AAAAAAAA4sY/aLp4ph6XcXw/s1600/2014-07-31+17.10.26.png" height="400" width="225"></a></div><div class="separator" style="clear: both; text-align: center;"><br></div><h3 style="clear: both; text-align: left;">Other Pebble Tweaks I've found useful</h3><div style="clear: both; text-align: left;">While not directly relevant to heating control here are some further details of my Pebble smartwatch setup:&nbsp;</div><div style="clear: both; text-align: left;"><br></div><div style="clear: both; text-align: left;"></div><ul><li>Using <a href="http://pebblebits.com/">PebbleBits firmware</a> on the pebble to quickly launch pebble apps from the watch face</li><li>Using <a href="https://github.com/emoncms/androidTasker/blob/master/Strava_Start___Stop.tsk.xml">Tasker to Stop / Start Strava&nbsp;</a></li><li><a href="http://www.mypebblefaces.com/apps/1486/1299/">Modern Watchface</a> is my favourite watch face (shown in demo above)</li><li><a href="https://play.google.com/store/apps/details?id=ca.rebootsramblings.musicboss&amp;hl=en_GB">Music Boss </a>is great for controlling music and starting podcasts while driving or biking</li><li><a href="https://play.google.com/store/apps/details?id=com.batescorp.pebble.nav&amp;hl=en_GB">NavMe</a> is great for directions on the Pebble while on the bike &nbsp;</li><li>Tasker can be used to send commonly sent SMS's and call favourite contacts direct from the Pebble&nbsp;</li></ul><br><div style="clear: both; text-align: left;"><br></div><div style="clear: both; text-align: left;"><br></div><div class="separator" style="clear: both; text-align: left;"><br></div><div class="separator" style="clear: both; text-align: left;"><br></div><br><br>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/08/android-tasker-pebble-smartwatch/">Android Tasker & Pebble Smartwatch - Emoncms Notifications</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-08-01T14:12:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-08-01 14:12:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> 1 minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/tasker/'>Tasker</a></li>
      
        <li><a class='category' href='/categories/android/'>android</a></li>
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
        <li><a class='category' href='/categories/pebble/'>pebble</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/08/android-tasker-pebble-smartwatch/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">Tasker</a> is a powerful android app which can be used to automate all sorts of things on your phone or tablet.<br /><br />Using Tasker it's easy to create notifications using data from Emoncms to be triggered by certain events e.g. times of day, location, feed value etc. The possibilities are endless! Once you're done configuring Tasker it's possible to export your setup packaged as an android app to be easily installed on any device.<br /><br />Using <a href="https://play.google.com/store/apps/details?id=com.dattasmoon.pebble.plugin&amp;hl=en_GB">Pebble Notifier</a> (which integrates with Tasker) the notification can be sent to a Pebble Smartwatch. <a href="https://play.google.com/store/apps/details?id=com.kodek.pebbletasker&amp;hl=en_GB">Pebble Tasker</a> can be used to activate the task to trigger the notification directly from the watch.<br /><br /><div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-gRH2f0FOwok/U9ud9EEwuVI/AAAAAAAA4rc/Pv-zedH8HBA/s1600/2014-08-01+14.37.01.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-gRH2f0FOwok/U9ud9EEwuVI/AAAAAAAA4rc/Pv-zedH8HBA/s1600/2014-08-01+14.37.01.jpg" height="289" width="320" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-fmF6SFegNk0/U9ud9y_yZLI/AAAAAAAA4rk/X18Wey_9_Rc/s1600/2014-08-01+13.54.59.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-fmF6SFegNk0/U9ud9y_yZLI/AAAAAAAA4rk/X18Wey_9_Rc/s1600/2014-08-01+13.54.59.png" height="400" width="225" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">Here's the Tasker task I used to perform the notification show above, I have setup Tasker profile to activate this notification whenever I get home and at the end of the day at 11pm. &nbsp;</div><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-LILJ6vFxDsM/U9ufHGbcCYI/AAAAAAAA4sA/rrgtlfkDujc/s1600/2014-08-01+14.06.50.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-LILJ6vFxDsM/U9ufHGbcCYI/AAAAAAAA4sA/rrgtlfkDujc/s1600/2014-08-01+14.06.50.png" height="640" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">I have uploaded a generic version of this Tasker task to GitHub, follow the instruction on the GitHub Readme to import into Tasker.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><a href="https://github.com/emoncms/androidTasker">https://github.com/emoncms/androidTasker</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><br />
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/07/how-ct-sensors-are-made/">How CT Sensors are Made...</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-07-10T15:50:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-07-10 15:50:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/manufacturing/'>manufacturing</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/07/how-ct-sensors-are-made/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    <div class="separator" style="clear: both; text-align: left;">Ever wondered how CT sensors are made? I've just been sent these photos of inside the YHDC factory, here we can see the CT windings being wound:&nbsp;</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-vcmbCPrBWUU/U761QC5JTsI/AAAAAAAA25Y/bdzO8SGkkf4/s1600/P1020770.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-vcmbCPrBWUU/U761QC5JTsI/AAAAAAAA25Y/bdzO8SGkkf4/s1600/P1020770.jpg" height="640" width="480" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-v8rY5pMmmu0/U761RlhZNAI/AAAAAAAA25g/mc9TexB3DaM/s1600/P1020855.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-v8rY5pMmmu0/U761RlhZNAI/AAAAAAAA25g/mc9TexB3DaM/s1600/P1020855.jpg" height="480" width="640" /></a></div><br />
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/07/reducing-emoncms-write-load-and-minimal/">Reducing emoncms write load and a minimal python version of emoncms</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-07-07T12:36:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-07-07 12:36:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/07/reducing-emoncms-write-load-and-minimal/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    Over the last few weeks I have been investigating how to reduce the write load of emoncms to explore if it might be possible to achieve long term logging on SD cards.<br /><br /><b>A brief summary</b><br /><br />Through a mix of buffered writing of feed data to disk, reduction of the number of meta and average data files written to and use of the FAT filesystem, my home raspberrypi now has a write load of 0.4kb_wrtn/s down from 197kb_wrtn/s.. almost 500x less and the writes are all append only (there's no regular writing of the same part of a file again and again). The question is could this mean years of SD card logging rather than months?<br /><br /><b>Write buffering</b><br /><br />A single Emoncms PHPFina (PHP Fixed Interval No averaging) or PHPTimeSeries datapoint uses between 4 and 9 bytes. The write load on the disk however is a bit more complicated than that. Most filesystems and disk's have a minimum IO size that is much larger than 4-9 bytes, on a FAT filesystem the minimum IO size is 512 bytes this means that if you try and write 4 bytes the operation will actually cause 512 bytes of write load. But its not just the datafile that gets written to, every file has inode meta data which can also result in a further 512 bytes of write load. A single 4 byte write can therefore cause 1kb of write load.<br /><br />By buffering writes for as long as we can in memory and then writing in larger blocks its possible to reduce the write load significantly. The full investigation with a lot of benchmarking of different configurations including differences between FAT and Ext4 can be found here:<br /><br /><a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/writeloadinvestigation.md">https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/writeloadinvestigation.md</a><br /><br /><b>A minimal version of emoncms in python</b><br /><br />To make the investigation easier I simplified emoncms down to the core parts needed on a raspberrypi to get basic timeseries graphing: serial listener, node decoder, basic feed engine and a ui consisting of a nodelist and a single rawdata visualisation type and wrote the result in python making use of Jerome and Paul's (pb66) excellent work on the emonhub serial listener and node decoder.<br />Here's a diagram of the main components of the python app:<br /><img alt="" src="http://openenergymonitor.org/emon/sites/default/files/emon-py-system-diagram.png" style="height: 387px; width: 600px;" /><br /><br />And some screenshots of what it looks like:<br /><br />Node list:<br /><br /><img alt="" src="http://openenergymonitor.org/emon/sites/default/files/emon-py_0.png" style="height: 409px; width: 600px;" /><br /><br />Basic graphing:<br /><br /><br /><br /><img alt="" src="http://openenergymonitor.org/emon/sites/default/files/graph_1.png" style="height: 283px; width: 600px;" /><br /><br />The source code and an installation guide for this minimal python version of emoncms can be found here:<br /><br /><a href="https://github.com/emoncms/development/tree/master/experimental/emon-py">https://github.com/emoncms/development/tree/master/experimental/emon-py</a><br /><br /><b>Further development questions</b> (copied from the end of the write load investigation page)<br /><br />Is the reduced write load and longer SD card lifespan that might result from using the FAT filesystem worth the increased chance of data corruption from power failure that Ext4 might prevent?<br /><br />It would be interesting to compare the performance of the FAT filesystem + 5 min application based commit time with the EXT4 filesystem with Journaling turned off and filesystem delayed allocation set to 5 min instead of write buffering in the application.<br /><br /><br />I posted on the EmonHub issues list about this last friday and  I've been having a bit of a discussion there with Paul  <a href="https://github.com/emonhub/emonhub/issues/48">https://github.com/emonhub/emonhub/issues/48</a><br /><br />I've also posted this on the forum's here: <br /><a href="http://openenergymonitor.org/emon/node/5387">http://openenergymonitor.org/emon/node/5387 </a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/07/emonglcd-v2-smt-development/">emonGLCD V2 SMT Development</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-07-03T14:28:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-07-03 14:28:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emonglcd/'>emonGLCD</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/07/emonglcd-v2-smt-development/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    For sometime now the emonGLCD has been lagging behind other OpenEnergyMonitor hardware units in terms of development, we're still selling it only in thru-hole DIY kit form.<br /><br />We've been thinking about updating it to SMT pre-assembled for some time, however we've been dragged our heels somewhat since there has been thoughts that maybe a smartphone app could fill the same function. However I believe&nbsp;a physical LCD display unit fulfils a slightly different role to a smartphone app. I believe in certain circumstances there is certainly value to having an always-on low power LCD display located in a prominent location displaying current power consumption and or generation.<br /><br />I have found the emonGLCD with the ambient indication tri-colour LED's to be a really useful easy-to-read indication of solar PV import / export at any given time.<br /><br />Doing a quick <a href="https://www.google.co.uk/search?q=emonglcd&amp;safe=off&amp;rlz=1CAACAG_enGB573GB573&amp;es_sm=93&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ei=N1u1U42-KcXb7Abzk4CoDA&amp;ved=0CAkQ_AUoAg">Google search</a> shows that there are lots of emonGLCD being used and customized for all sorts of purposes we could not even have though of! For example: heat pump monitor, temperature measurements, electric car charge rate etc.<br /><br />With this in mind, we have decided to make an SMT version of the emonGLCD keeping the design largely the same (same LCD panel size and same controller chip ST7565). This will mean the current emonGLCD firmware sketches should run on the new unit with little or no modifications. <br /><br />I would be interested to heard your thoughts on what you would like in a new version of the emonGLCD?<br /><br />Over the past few weeks I've made a start to get a prototype, here is the main design criteria and features so far:<br /><ul><li>  ST7565&nbsp;128 x 64 LCD panel&nbsp;with integrated&nbsp;RGB backlight, <a href="http://www.vatronix.com/products/75.html">specifically this Vatronix unit</a> (to replace the LED's on the current version)</li><li>  Single front facing&nbsp;rotary encoder with push-to-select (to replace the three push buttons the the current)</li><li>  Option for lithium battery pack with USB battery charging circuit and battery voltage monitor</li><li>  Arduino compatiable ATmega328&nbsp;with RFM12B / RFM1269CW</li><li>  Option for on-board&nbsp;DS18B20 and DHT22&nbsp;temperature and humidity sensors&nbsp;</li></ul>Using SMT assembly and lower cost LCD unit and enclosure we should be able to reduce the price of the emonGLCD&nbsp;compared to the current version.<br /><br />Yesterday I sent off for the first prototype PCB revision:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-YAr16KVXPrE/U7Vno3nIb4I/AAAAAAAA2zc/5Z419xiIra8/s1600/emonGLCD_V2.0_brd.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-YAr16KVXPrE/U7Vno3nIb4I/AAAAAAAA2zc/5Z419xiIra8/s1600/emonGLCD_V2.0_brd.png" height="526" width="640" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-VyOmm39X200/U7VnoxaukPI/AAAAAAAA2zg/MyAATsXtGtA/s1600/emonGLCD_V2.0_sch.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-VyOmm39X200/U7VnoxaukPI/AAAAAAAA2zg/MyAATsXtGtA/s1600/emonGLCD_V2.0_sch.png" height="522" width="640" /></a></div><br /> <br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-kyenCaUIo8Y/U7VnteHlIYI/AAAAAAAA2zw/L3pF1d4kAN8/s1600/2014-05-23+13.55.25.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-kyenCaUIo8Y/U7VnteHlIYI/AAAAAAAA2zw/L3pF1d4kAN8/s1600/2014-05-23+13.55.25.jpg" height="300" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Testing the new LCD panel with built in RGB backlight</td></tr></tbody></table>These images and more can be viewed in higher resolution in the emonGLCD V2 SMT Development album on G+, I will be periodically updating this album with development photos as things develop!<br /><a href="https://plus.google.com/photos/114424977493521882459/albums/6016575729643776881#">https://plus.google.com/photos/114424977493521882459/albums/6016575729643776881#</a><br /><br /><h2> <strong>Enclosure&nbsp;</strong></h2>The enclosure is an important part of the emonGLCD&nbsp;design considerations. We plan to move to a 'proper' custom made enclosure for the new emonGLCD. These are the main options available:<br /><br />1.) 3D printed (for small volumes and prototyping, not really possible for 500+ per production run)<br />2.) layered laser cut plywood or acrylic (like the Pimoroni Raspberry Pi cases)<br />3.) Injection molded&nbsp;plastic<br /><br />I'm specifically interested in exploring if/how an enclosure could be made with<strong> lowest embodied energy and maximum&nbsp;recyclability.</strong><br />We have not yet made much progress on case design nor have we got a designer or manufacturer in mind. If you would like to work with us please get in touch. Equally if you have some ideas on enclosure design I look forward to hearing.<br /><br />Please use the the emonGLCD V2 SMT forum thread for comments and discussion: <a href="http://openenergymonitor.org/emon/node/5374">http://openenergymonitor.org/emon/node/5374&nbsp;</a><br /><br />
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/06/emoncms-time-series-feed-engine/">Emoncms time-series feed engine documentation</a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-06-19T11:46:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-06-19 11:46:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Trystan Lea</span> <br>
    <span><i class='icon-time'></i> Less than one minute reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emoncms/'>emoncms</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/06/emoncms-time-series-feed-engine/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    I've been working over the last few days on writing documentation on  how the emoncms time-series feed engines work (phpfiwa, phpfina and  phptimeseries). The documentation is an early draft at this stage and I  would very much welcome comments.<br /><br /> <a href="https://github.com/openenergymonitor/documentation/tree/master/BuildingBlocks/TimeSeries">https://github.com/openenergymonitor/documentation/tree/master/BuildingBlocks/TimeSeries</a><br /> <br />&nbsp;&nbsp;&nbsp; <a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/history.md">Emoncms time series database development history</a><br /> &nbsp;&nbsp;&nbsp; <a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/variableinterval.md">Variable interval time series</a><br /> &nbsp;&nbsp;&nbsp; <a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/fixedinterval.md">Fixed interval time series</a><br /> &nbsp;&nbsp;&nbsp; <a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/fixedintervalaveraging.md">Fixed interval with averaging time series</a><br /> <br />On a related note out of an interest in creating a version of emoncms  that will run and log to SD cards without wearing them out so fast I've  started to look at how the write load created by the emoncms feed  engines can be reduced through in memory buffering and writing in larger  blocks to disk, initial testing suggests that it could be reduced by  potentially more than a 1000x on systems with 30+ feeds, maybe several  100x on systems with only a few feeds.<br /><br />See forum post: <a href="http://openenergymonitor.org/emon/node/5319">http://openenergymonitor.org/emon/node/5319 </a>
    
  </div>
  </article>
  <hr>
  
  <article class="listing">
    <header>
  
  <h1 class="beta">
    <a href="/2014/06/emonpi-raspberry-pi-energy-monitoring/">emonPi Raspberry Pi Energy Monitoring Shield - Prototype Dev Update </a>
  </h1>
  

  
  <div class="meta clearfix">
    <time datetime="2014-06-06T22:45:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> 2014-06-06 22:45:00 +0000
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span> <br>
    <span><i class='icon-time'></i> three minutes reading time</span> <br>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/emonpi/'>emonPi</a></li>
      
        <li><a class='category' href='/categories/raspberry-pi/'>raspberry pi</a></li>
      
    
    </ul>
  </span> <br>
    
      <a class='comments'
         href="/2014/06/emonpi-raspberry-pi-energy-monitoring/#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div class="entry-content clearfix">
    For a while now I have been working on developing a Raspberry Pi energy monitoring shield. Here is a preview of the first prototype design.<br /><br />The emonPi is not designed to totally replace the emonTx V3, but rather to complement it. I see the emonPi fulfilling two applications:<br /><br />1. As a low cost Raspberry Pi add-on shield to make all-in-one home energy monitoring unit based on the Raspberry Pi. &nbsp;We will produce a version of the emonPi board on it's own (without enclosure, HDD and LCD), maybe even with just SMT components ready assembled (like the Arduino Lenoardo) to being the cost down further.<br /><br />2. As a high quality, robust and nicely enclosed stand-alone energy monitoring unit and web-connected base station with LCD status display, built in hard-drive for local logging and backup. The emonPi has also been designed to be perfect for installers of heat-pump monitoring systems which require many temperature sensor wired up (see temperature sensing part of my forum post update) as well as power monitoring.<br /><br />The emonPi has got an option for RFM12B / RFM69CW radio to enable it also to act as an emonBase, receiving date from other wireless nodes such as emonTH (room temperature and humidity node), emonTx V3 (energy monitoring node) and transmitting the current time to the emonGLCD LCD display. <br /><br />Since the emonPi is an energy monitor sensing node and remote posting base station all-in-one and coupled with a status LCD this should make system setup, installation and debugging easier. The emonPi should also be great for remote administration since with the correct network config the Raspberry Pi can be accessed remotely, log files checked and even upload Arduino sketch firmware onto the emonPi's ATmega328.<br /><br /><br />Development has been documented in an ongoing open forum thread:&nbsp;<a href="http://openenergymonitor.org/emon/node/3937">http://openenergymonitor.org/emon/node/3937</a><br /><br />My latest update post can be viewed here:&nbsp;<a href="http://openenergymonitor.org/emon/node/3937#comment-21865">http://openenergymonitor.org/emon/node/3937#comment-21865</a><br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-Ie1NJkM7fyM/U5JCDHS0spI/AAAAAAAA0kI/7SYI3mP42ec/s1600/2014-06-06+17.09.51.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-Ie1NJkM7fyM/U5JCDHS0spI/AAAAAAAA0kI/7SYI3mP42ec/s1600/2014-06-06+17.09.51.jpg" height="300" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">emonPi - Raspberry Pi Energy Monitoring Shield Prototype&nbsp;</td></tr></tbody></table><br /><h1>emon Pi Features&nbsp;</h1><div><ul><li>Two channel CT monitoring with AC sample input&nbsp;</li><li>Ability to power the Raspberry Pi and an external HDD without the need for an additional USB hub, emonPi can also function without a HDD</li><li>RJ45 DS18B20 on-wire temperature bus to allow many temperature sensors to easily be added using a RJ45 breakout board for heatpump monitoring applications&nbsp;</li><li>PWM and IRW I/O's on RJ45&nbsp;</li><li>Status LCD</li><li>Compatible with RaspberryPi model A and model B&nbsp;</li><li>Option for RFM12B / RFM69CW with SMA antenna to receive or transmit data from other sensor nodes</li><li>OOK (on-off keying) transmitter footprint for controlling remote plugs etc.&nbsp;</li><li>ATmega328 with ability to remotely upload sketches vis Raspberry Pi Serial&nbsp;</li><li>Open-source hardware, firmware and software&nbsp;</li><li>High quality custom made, wall mountable enclosure</li></ul></div><a href="https://lh5.googleusercontent.com/-IU7PpuMjM-8/U430w6Pj6sI/AAAAAAAAAiA/HNtFuP39CBQ/w791-h593-no/2014-06-03+16.06.07.jpg"><img alt="" src="https://lh5.googleusercontent.com/-IU7PpuMjM-8/U430w6Pj6sI/AAAAAAAAAiA/HNtFuP39CBQ/w791-h593-no/2014-06-03+16.06.07.jpg" style="height: 225px; width: 300px;" /></a>&nbsp;<a href="https://lh6.googleusercontent.com/-CIAg1dncpgk/U4x59fUq9BI/AAAAAAAAAg8/dSiGDZmtsD0/w642-h593-no/2014-06-02+14.02.51.jpg"><img alt="" src="https://lh6.googleusercontent.com/-CIAg1dncpgk/U4x59fUq9BI/AAAAAAAAAg8/dSiGDZmtsD0/w642-h593-no/2014-06-02+14.02.51.jpg" style="height: 185px; width: 200px;" /></a>&nbsp;<a href="https://lh6.googleusercontent.com/zEhhe_TfO98MdxIppFGBiI44u2Gdc_gauh39D5R7NT8=w650-h593-no"><img alt="" src="https://lh6.googleusercontent.com/zEhhe_TfO98MdxIppFGBiI44u2Gdc_gauh39D5R7NT8=w650-h593-no" style="height: 182px; width: 200px;" /></a>&nbsp;<a href="https://lh5.googleusercontent.com/-71eGH3u2zCM/U480yf_GVbI/AAAAAAAAAjQ/s2w-UPOjzGg/w974-h593-no/2014-06-04+15.23.09.jpg"><img alt="" src="https://lh5.googleusercontent.com/-71eGH3u2zCM/U480yf_GVbI/AAAAAAAAAjQ/s2w-UPOjzGg/w974-h593-no/2014-06-04+15.23.09.jpg" style="height: 183px; width: 300px;" /></a><br /><br />End-plate silkscreen draft:<br /><a href="https://lh6.googleusercontent.com/-5La40AHmBeM/U5JAeqttmHI/AAAAAAAAAls/Lqh-UPzcRcI/w839-h593-no/emonPi+Face+Panel+Print+DRAFT.png"><img alt="" src="https://lh6.googleusercontent.com/-5La40AHmBeM/U5JAeqttmHI/AAAAAAAAAls/Lqh-UPzcRcI/w839-h593-no/emonPi+Face+Panel+Print+DRAFT.png" style="height: 353px; width: 500px;" /></a><br />See G+ album for more photos: <a href="https://plus.google.com/b/114424977493521882459/photos/+OpenenergymonitorOrgpage/albums/5999656723837107313">https://plus.google.com/b/114424977493521882459/photos/+OpenenergymonitorOrgpage/albums/5999656723837107313</a><br /><br />&nbsp;LCD demo:<br /><br /><iframe allowfullscreen="" frameborder="0" height="315" src="//www.youtube.com/embed/qHizy1S4WXI" width="560"></iframe><br /><br /><br />Please join in the emonPi's open-development forum thread if you have any ideas of thoughts to contribute:<br /><a href="http://openenergymonitor.org/emon/node/3937#comment-21865">http://openenergymonitor.org/emon/node/3937#comment-21865</a><br /><br /><br />The disadvantages of the emonPi compared to the current emonTx V3 are:<br /><br /><ul><li>Only two CT channels, no (approximate) 3-phase</li><li>Due to higher power requirements of the Pi, the emonPi can't be powered from batteries, 5V DC USB mini-B is required.&nbsp;</li><li>Again, due to higher power requirements of the Pi, the emonPi can't be powered from an AC-AC adapter, for real power a 5V DC and 9V AC adapter will both be required.&nbsp;</li><li>Requires wifi connectivity or Ethernet to reach the location where the utility meter is located</li><li>Larger enclosure than the emonTx V3</li></ul><br /><ul></ul>
    
  </div>
  </article>
  <hr>
  

  <div class="pagination">
    
      <a class="btn pull-left" href="/posts/10">&larr; Older</a>
    

    
    <a class="btn pull-right" href="/posts/8">Newer &rarr;</a>
    
  </div>


    </div>

    
    <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
      <div class="grid">

 
 <section id="recent-posts" class="aside-module grid__item one-whole lap-one-half">
  <div class="searchtool">

  
  <form action="https://encrypted.google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="q" value="site:blog.openenergymonitor.org" />
      <input class="search" id="search" type="text" name="q" results="0" placeholder="Search..." />
      <button type="submit">
         <i class="fa fa-search"></i> Search
      </button>
    </fieldset>
  </form>
  

  </div>
  <h1 class="title delta">Recent Posts</h1>
  <ul class="divided">
    
      
        <li class="post">
          <a href="/2017/02/myhomeenergyplanner/">MyHomeEnergyPlanner - open source home energy assessment</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/02/learn-sustainable-energy/">Launching Learn: Sustainable Energy</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/01/new-home-page-and-learn/">New home page and Learn website!</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2017/01/openevse-build/">OpenEVSE EV Charge Controller Review</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/09/emonth2/">Introducing emonTH V2</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/09/summer-placement/">Summer Placement</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/08/ecohomelab-control/">EcoHome Lab: From Monitoring to Control</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/07/HTU21D-Temperature-Humidity-sensor/">HTU21D / Si72021 Temperature and Humidity Sensor</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/esp8266-ota-update/">Part 3/3: Continuous Deployment (Over-The-Air Update to ESP8266)</a>
        </li>
      
    
      
        <li class="post">
          <a href="/2016/06/emoncms-docker/">Emoncms Docker</a>
        </li>
      
    
  </ul>
</section>
  
  
     <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta">Categories</h1>
  <ul class="divided">
    
    
      <li><a href="/categories/air-quality-egg/">Air Quality Egg</a></li>
    
      <li><a href="/categories/antenna/">Antenna</a></li>
    
      <li><a href="/categories/building-energy-modelling/">Building Energy Modelling</a></li>
    
      <li><a href="/categories/china/">China</a></li>
    
      <li><a href="/categories/christmas/">Christmas</a></li>
    
      <li><a href="/categories/dc/">DC</a></li>
    
      <li><a href="/categories/dc-current-sensing/">DC current sensing</a></li>
    
      <li><a href="/categories/esp8266/">ESP8266</a></li>
    
      <li><a href="/categories/htu21d/">HTU21D</a></li>
    
      <li><a href="/categories/heat-pump/">Heat Pump</a></li>
    
      <li><a href="/categories/kaizen/">Kaizen</a></li>
    
      <li><a href="/categories/kicad/">KiCad</a></li>
    
      <li><a href="/categories/mqtt/">MQTT</a></li>
    
      <li><a href="/categories/nanoderf/">NanodeRF</a></li>
    
      <li><a href="/categories/nodered/">NodeRed</a></li>
    
      <li><a href="/categories/oem-labs/">OEM Labs</a></li>
    
      <li><a href="/categories/okg/">OKG</a></li>
    
      <li><a href="/categories/oscilloscope/">Oscilloscope</a></li>
    
      <li><a href="/categories/rfm12/">RFM12</a></li>
    
      <li><a href="/categories/rfm69/">RFM69</a></li>
    
      <li><a href="/categories/rs485/">RS485</a></li>
    
      <li><a href="/categories/sap-2012/">SAP 2012</a></li>
    
      <li><a href="/categories/shw/">SHW</a></li>
    
      <li><a href="/categories/srf/">SRF</a></li>
    
      <li><a href="/categories/tasker/">Tasker</a></li>
    
      <li><a href="/categories/android/">android</a></li>
    
      <li><a href="/categories/app/">app</a></li>
    
      <li><a href="/categories/application/">application</a></li>
    
      <li><a href="/categories/arduino/">arduino</a></li>
    
      <li><a href="/categories/award/">award</a></li>
    
      <li><a href="/categories/backup/">backup</a></li>
    
      <li><a href="/categories/batteries/">batteries</a></li>
    
      <li><a href="/categories/benchmarking/">benchmarking</a></li>
    
      <li><a href="/categories/build-sesh/">build sesh</a></li>
    
      <li><a href="/categories/business/">business</a></li>
    
      <li><a href="/categories/ciseco/">ciseco</a></li>
    
      <li><a href="/categories/community-energy/">community energy</a></li>
    
      <li><a href="/categories/community-smart-grid/">community smart grid</a></li>
    
      <li><a href="/categories/continuous-testing/">continuous testing</a></li>
    
      <li><a href="/categories/control/">control</a></li>
    
      <li><a href="/categories/current-sensor/">current sensor</a></li>
    
      <li><a href="/categories/current-transformer/">current transformer</a></li>
    
      <li><a href="/categories/dashboard/">dashboard</a></li>
    
      <li><a href="/categories/display/">display</a></li>
    
      <li><a href="/categories/diy-drones/">diy drones</a></li>
    
      <li><a href="/categories/docker/">docker</a></li>
    
      <li><a href="/categories/documentation/">documentation</a></li>
    
      <li><a href="/categories/ecohomelab/">ecohomelab</a></li>
    
      <li><a href="/categories/efergy/">efergy</a></li>
    
      <li><a href="/categories/electronics/">electronics</a></li>
    
      <li><a href="/categories/elektrocamp/">elektrocamp</a></li>
    
      <li><a href="/categories/email-notifications/">email notifications</a></li>
    
      <li><a href="/categories/embodied-energy/">embodied energy</a></li>
    
      <li><a href="/categories/emonbase/">emonBase</a></li>
    
      <li><a href="/categories/emonctrl/">emonCtrl</a></li>
    
      <li><a href="/categories/emonglcd/">emonGLCD</a></li>
    
      <li><a href="/categories/emonpi/">emonPi</a></li>
    
      <li><a href="/categories/emonsd/">emonSD</a></li>
    
      <li><a href="/categories/emonth/">emonTH</a></li>
    
      <li><a href="/categories/emontx/">emonTx</a></li>
    
      <li><a href="/categories/emontx-v2/">emonTx V2</a></li>
    
      <li><a href="/categories/emontxsmt/">emonTxSMT</a></li>
    
      <li><a href="/categories/emontxshield/">emonTxShield</a></li>
    
      <li><a href="/categories/emoncms/">emoncms</a></li>
    
      <li><a href="/categories/emonesp/">emonesp</a></li>
    
      <li><a href="/categories/emonpi/">emonpi</a></li>
    
      <li><a href="/categories/emontx/">emontx</a></li>
    
      <li><a href="/categories/end-to-end/">end to end</a></li>
    
      <li><a href="/categories/energy-monitor/">energy monitor</a></li>
    
      <li><a href="/categories/energy-monitoring/">energy monitoring</a></li>
    
      <li><a href="/categories/esp8266/">esp8266</a></li>
    
      <li><a href="/categories/ev/">ev</a></li>
    
      <li><a href="/categories/feed-storage/">feed storage</a></li>
    
      <li><a href="/categories/firmware/">firmware</a></li>
    
      <li><a href="/categories/forum/">forum</a></li>
    
      <li><a href="/categories/github/">github</a></li>
    
      <li><a href="/categories/graphing/">graphing</a></li>
    
      <li><a href="/categories/hackathon/">hackathon</a></li>
    
      <li><a href="/categories/hall-effect/">hall effect</a></li>
    
      <li><a href="/categories/hardware/">hardware</a></li>
    
      <li><a href="/categories/heating/">heating</a></li>
    
      <li><a href="/categories/heatpumpmonitor/">heatpumpmonitor</a></li>
    
      <li><a href="/categories/home-assistant/">home Assistant</a></li>
    
      <li><a href="/categories/home-camp/">home camp</a></li>
    
      <li><a href="/categories/humidity/">humidity</a></li>
    
      <li><a href="/categories/integrations/">integrations</a></li>
    
      <li><a href="/categories/interface/">interface</a></li>
    
      <li><a href="/categories/interview/">interview</a></li>
    
      <li><a href="/categories/java/">java</a></li>
    
      <li><a href="/categories/job/">job</a></li>
    
      <li><a href="/categories/kickstarter/">kickstarter</a></li>
    
      <li><a href="/categories/lightwaverf/">lightwaverf</a></li>
    
      <li><a href="/categories/linux/">linux</a></li>
    
      <li><a href="/categories/logo/">logo</a></li>
    
      <li><a href="/categories/manufacturing/">manufacturing</a></li>
    
      <li><a href="/categories/measurement/">measurement</a></li>
    
      <li><a href="/categories/media/">media</a></li>
    
      <li><a href="/categories/mobile/">mobile</a></li>
    
      <li><a href="/categories/mobile-app/">mobile app</a></li>
    
      <li><a href="/categories/modbus/">modbus</a></li>
    
      <li><a href="/categories/nanode/">nanode</a></li>
    
      <li><a href="/categories/ook/">ook</a></li>
    
      <li><a href="/categories/open-source/">open source</a></li>
    
      <li><a href="/categories/openhab/">openHAB</a></li>
    
      <li><a href="/categories/openenergymonitor/">openenergymonitor</a></li>
    
      <li><a href="/categories/openevse/">openevse</a></li>
    
      <li><a href="/categories/optical-pulse/">optical pulse</a></li>
    
      <li><a href="/categories/pcb/">pcb</a></li>
    
      <li><a href="/categories/pebble/">pebble</a></li>
    
      <li><a href="/categories/placement/">placement</a></li>
    
      <li><a href="/categories/platformio/">platformio</a></li>
    
      <li><a href="/categories/pluse/">pluse</a></li>
    
      <li><a href="/categories/presentation/">presentation</a></li>
    
      <li><a href="/categories/raspberry-pi/">raspberry pi</a></li>
    
      <li><a href="/categories/renewable/">renewable</a></li>
    
      <li><a href="/categories/serial/">serial</a></li>
    
      <li><a href="/categories/shop/">shop</a></li>
    
      <li><a href="/categories/showcase/">showcase</a></li>
    
      <li><a href="/categories/smartwatch/">smartwatch</a></li>
    
      <li><a href="/categories/social-energy-monitoring/">social energy monitoring</a></li>
    
      <li><a href="/categories/solarpv/">solarPV</a></li>
    
      <li><a href="/categories/sparkfun/">sparkfun</a></li>
    
      <li><a href="/categories/sustainability/">sustainability</a></li>
    
      <li><a href="/categories/temperature/">temperature</a></li>
    
      <li><a href="/categories/three-phase/">three phase</a></li>
    
      <li><a href="/categories/travisci/">travisci</a></li>
    
      <li><a href="/categories/tutorials/">tutorials</a></li>
    
      <li><a href="/categories/upgrade/">upgrade</a></li>
    
      <li><a href="/categories/user-guide/">user guide</a></li>
    
      <li><a href="/categories/utility-meters/">utility meters</a></li>
    
      <li><a href="/categories/voltage-sensing/">voltage sensing</a></li>
    
      <li><a href="/categories/vrms/">vrms</a></li>
    
      <li><a href="/categories/website/">website</a></li>
    
      <li><a href="/categories/wifipixel/">wifipixel</a></li>
    
      <li><a href="/categories/wind/">wind</a></li>
    
      <li><a href="/categories/wind-turbine/">wind turbine</a></li>
    
      <li><a href="/categories/wireless/">wireless</a></li>
    
      <li><a href="/categories/workshop/">workshop</a></li>
    
      <li><a href="/categories/zerocarbonbritain/">zerocarbonbritain</a></li>
    
  </ul>
</section>
  
</div>
    </aside>
    
  </div>
</div>

<footer>
  <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">

  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor/guide'><i class="icon-github"></i></a>
  <a rel="me" href='https://blog.openenergymonitor.org/feed.xml'><i class="icon-rss"></i></a>

  <div class="credit" style="text-align:center;">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and <a href='https://github.com/coogie/oscailte'>Oscalite</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
<!--
<div class="searchtool">


<form action="https://encrypted.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.openenergymonitor.org" />
    <input class="search" id="search" type="text" name="q" results="0" placeholder="Search..." />
  </fieldset>
</form>


</div> -->
</div>
    </div>
  </div>
</div>
</footer>

<!--[if lt IE 7]>
  <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->

</body>
</html>
