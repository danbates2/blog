<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Open Kontrol Gateway - emonBase - Blog | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="OpenEnergyMonitor Blog">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="http://blog.openenergymonitor.org/2012/08/09/open-kontrol-gateway-emonbase/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Open Kontrol Gateway - emonBase">
    <meta property="og:site_name" content="Blog | OpenEnergyMonitor">
    <meta property="og:url" content="http://blog.openenergymonitor.org/2012/08/09/open-kontrol-gateway-emonbase/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Open Kontrol Gateway - emonBase">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Blog | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
    
    
    
    <link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
	<link rel="apple-touch-icon" href="/images/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/images/favicon-144.png">
	<meta name="msapplication-config" content="/images/browserconfig.xml">
	
  </head>

  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
  <a href="/" class="site-title">
    <!--<img width='40' src='/images/favicon-192x192.png'> -->
    <span>Blog | OpenEnergyMonitor</span>
  </a>
</div>

<div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  <li><a href="http://openenergymonitor.org">Home</a></li>
  <li><a href="http://shop.openenergymonitor.com">Online-Store</a></li>
  <li><a href="http://guide.openenergymonitor.org">User Guide</a></li>
  <li><a href="http://emoncms.org">Emoncms</a></li>
  <li><a href="http://community.openenergymonitor.org">Forum</a></li>
</ul>
  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="post">
  
  <header>
  
  <h1 class="title indent">Open Kontrol Gateway - emonBase</h1>
  

  
  <div class="meta clearfix">
    <time datetime="2012-08-09T11:19:00+00:00" pubdate data-updated="true"><i class="icon-calendar"></i> </time>
    <span class="byline author vcard"><i class='icon-user'></i> Glyn Hudson</span>
    <span><i class='icon-time'></i> three minutes reading time</span>
    <span>
    <i class="icon-tags"></i>
    <ul class="tags unstyled">
    
      
        <li><a class='category' href='/categories/okg/'>OKG</a></li>
      
        <li><a class='category' href='/categories/emonbase/'>emonBase</a></li>
      
    
    </ul>
  </span>
    
      <a class='comments'
         href="#disqus_thread"
         >Comments</a>
    
  </div>
  
</header>


  <div>For a while now we have been using the NanodeRF as our emonBase web-connected base station. The NanodeRF is great and has met our needs well. However using the ENC28J60&nbsp;Ethernet&nbsp;chip does have some limitations.<br /><br />We have through about having an emonBase option which supports the Wiznet Ethernet chip. This is the chip that is used in the official Arduino&nbsp;Ethernet. On the Wiznet chip the TCP/IP stack is implemented on the chip as opposed to on the ATmega328 as in the case of the ENC28J60, this means ATmega328 has a greatly reduced load, more application memory is freed up and the code is much simpler and brought in line with the Arduino&nbsp;Ethernet&nbsp;code examples.<br /><br />In testing we have found the Wiznet chip to be more stable at holding a connection over a long period.<br /><br />However the Wiznet chip is more expensive than the ENC28J60, what we need is a&nbsp;flexible&nbsp;emonBase unit which is&nbsp;interchangeable&nbsp;between the two&nbsp;Ethernet&nbsp;chips, enter the Open Kontrol Gateway (OKG)!<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-2MhNilPj6U0/UCDuPVoX9uI/AAAAAAAAcgs/vlU9bgoHSxU/s1600/2012-08-07+10.43.56.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="240" src="http://2.bp.blogspot.com/-2MhNilPj6U0/UCDuPVoX9uI/AAAAAAAAcgs/vlU9bgoHSxU/s320/2012-08-07+10.43.56.jpg" width="320" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-HzMe7OKjbn4/UCDugFjA1OI/AAAAAAAAcg0/lt8ncHdduVk/s1600/2012-08-07+10.45.07.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="240" src="http://1.bp.blogspot.com/-HzMe7OKjbn4/UCDugFjA1OI/AAAAAAAAcg0/lt8ncHdduVk/s320/2012-08-07+10.45.07.jpg" width="320" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Opp6FDrMMM0/UCDu05W7n6I/AAAAAAAAchA/YixQcS1nOPg/s1600/gateway+pcb+v1.0.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="266" src="http://2.bp.blogspot.com/-Opp6FDrMMM0/UCDu05W7n6I/AAAAAAAAchA/YixQcS1nOPg/s400/gateway+pcb+v1.0.jpg" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div>The OKG is a very&nbsp;flexible web-connected base station based on the ATmega328 which is totally Arduino IDE&nbsp;compatible (Arduino UNO bootloader). The OKG has been designed and manufactured by our friend Miles who runs&nbsp;<a href="http://www.ciseco.co.uk/content/">Ciseco Plc</a>.<br /><br />The OKG PCB supports multiple wireless options such as RFM12B, XBEE, XRF, RN-XV Wifi. There is also PCB footprints for expansions like a RTC, SD card and SRAM. Finally what&nbsp;attracted&nbsp;us to the OKG was the ability to easily choose between the ENC28J60 or Wiznet&nbsp;Ethernet chips:<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-_6SxkiCo-Pw/UCDwJDEsHwI/AAAAAAAAchI/FD7XGW9cVXw/s1600/OKG_ENC28J60.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="299" src="http://2.bp.blogspot.com/-_6SxkiCo-Pw/UCDwJDEsHwI/AAAAAAAAchI/FD7XGW9cVXw/s320/OKG_ENC28J60.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">OKG ENC28J60 module</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-r7eOA-w7_EM/UCDwKqITzcI/AAAAAAAAchQ/Cq8RmY0V2ac/s1600/OKG_Wiznet.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="253" src="http://3.bp.blogspot.com/-r7eOA-w7_EM/UCDwKqITzcI/AAAAAAAAchQ/Cq8RmY0V2ac/s320/OKG_Wiznet.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">OKG Wiznet W5200 module&nbsp;</td></tr></tbody></table>We now have stock of the OKG in kit form in the OpenEnergyMonitor shop. The kits will come with an RFM12B wireless radio (choice of frequency) and a choice of ENC28J60 or Wiznet&nbsp;Ethernet&nbsp;chips.<br /><br />The OKG with the ENC28J60 is almost hardware identical to the NanodeRF. NanodeRF emonBase sketches will run on the OKG with a couple of little changes.<br /><br />See the OKG OpenEnergyMonitor wiki page for the changes required to make the OKG work with the RFM12B and OpenEnergyMonitor emonBase examples:<br /><br /><a href="http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway">http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway</a><br /><br />Note: The wiki is still in beta, we will blog more about it once it's been a bit more polished. It's our hope that by using a Media Wiki for our more technical documentation people will be more inclined to contribute&nbsp;corrections&nbsp;and additions and the documentations should be easier to organise and maintain. The OpenEnergyMonitor login should automatically log you in to the wiki. Just make sure your logged into the OpenEnergyMonitor website before opening up the wiki page. Try clearing your browsers cookies if this&nbsp;doesn't&nbsp;work first time.<br /><br />We are now stocking the OKG in the OpenEnergyMonitor shop:&nbsp;<a href="http://shop.openenergymonitor.com/open-kontrol-gateway/">http://shop.openenergymonitor.com/open-kontrol-gateway/</a><br /><br /><b>What about the Raspberry Pi!?&nbsp;</b><br />Don't worry we&nbsp;haven't&nbsp;overlooked the Raspberry Pi! We have&nbsp;successfully had <a href="http://openenergymonitor.org/emon/emoncms/installing-ubuntu-debian-pi">emoncms running on a Pi</a> receiving RFM12B data from a USB JeeLink, we plan to blog more about this soon. We're currently with&nbsp;<a href="http://harizanov.com/">Martin Harizanov</a>&nbsp;to make a RFM12B to Raspberry Pi GPIO expansion board. The Raspberry Pi will make a very powerful emonbase/home energy server however it's quite a complicated little beast for beginners who have limited linux knowledge. We think there is still a need to also have a simpler Arduino based emonBase option such as the NanodeRF or OKG.
</article>



        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">

  
  
  
  
  
  
  
</div>
        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">
  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor'><i class="icon-github"></i></a>

  <div class="credit">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and the <a href='https://github.com/coogie/oscailte'>Oscalite theme</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
</div>
    </div>
  </div>
</div>
    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script>
  var _gaq=[['_setAccount','UA-10321170-4'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<script>
  var disqus_shortname = 'openenergymonitor';
  
    
    var disqus_script = 'count.js';
  
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>


<script>
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>

  </body>
</html>